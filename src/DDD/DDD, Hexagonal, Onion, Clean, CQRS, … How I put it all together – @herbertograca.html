<!DOCTYPE html>
<!-- saved from url=(0119)https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">

<title>DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca</title>
		<script src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/remote-login.php" type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel="dns-prefetch" href="https://s2.wp.com/">
<link rel="dns-prefetch" href="https://s1.wp.com/">
<link rel="dns-prefetch" href="https://herbertograca.wordpress.com/">
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link rel="dns-prefetch" href="https://s.pubmine.com/">
<link rel="dns-prefetch" href="https://x.bidswitch.net/">
<link rel="dns-prefetch" href="https://static.criteo.net/">
<link rel="dns-prefetch" href="https://ib.adnxs.com/">
<link rel="dns-prefetch" href="https://aax.amazon-adsystem.com/">
<link rel="dns-prefetch" href="https://bidder.criteo.com/">
<link rel="dns-prefetch" href="https://cas.criteo.com/">
<link rel="dns-prefetch" href="https://gum.criteo.com/">
<link rel="dns-prefetch" href="https://ads.pubmatic.com/">
<link rel="dns-prefetch" href="https://gads.pubmatic.com/">
<link rel="dns-prefetch" href="https://tpc.googlesyndication.com/">
<link rel="dns-prefetch" href="https://ad.doubleclick.net/">
<link rel="dns-prefetch" href="https://googleads.g.doubleclick.net/">
<link rel="dns-prefetch" href="https://www.googletagservices.com/">
<link rel="dns-prefetch" href="https://cdn.switchadhub.com/">
<link rel="dns-prefetch" href="https://delivery.g.switchadhub.com/">
<link rel="dns-prefetch" href="https://delivery.swid.switchadhub.com/">
<link rel="alternate" type="application/rss+xml" title="@herbertograca » Feed" href="https://herbertograca.com/feed/">
<link rel="alternate" type="application/rss+xml" title="@herbertograca » Comments Feed" href="https://herbertograca.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="@herbertograca » DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together Comments Feed" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/feed/">
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=5.1-beta2-44730"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/wp-emoji-release.min.js.下载" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="all-css-0-1" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(2)" type="text/css" media="all">
<style id="independent-publisher-2-style-inline-css" type="text/css">
#hero-header { background: url("https://herbertograca.files.wordpress.com/2018/11/100-explicit-architecture-svg.png?w=1440&#038;h=600&#038;crop=1") no-repeat center; background-size: cover; background-attachment: scroll; }
</style>
<link rel="stylesheet" id="print-css-1-1" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/global-print.css" type="text/css" media="print">
<link rel="stylesheet" id="all-css-2-1" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(3)" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(4)"></script>
<link rel="stylesheet" id="all-css-0-2" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/style(1).css" type="text/css" media="all">
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbertograca.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Service Oriented Architecture (SOA)" href="https://herbertograca.com/2017/11/09/service-oriented-architecture-soa/">
<link rel="next" title="Just created hgraca/doctrine-test-db-regeneration-bundle" href="https://herbertograca.com/2018/03/06/just-created-hgraca-doctrine-test-db-regeneration-bundle/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">
<link rel="shortlink" href="https://wp.me/p6DnXN-3RU">
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F&amp;for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F&amp;for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together">
<meta property="og:url" content="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">
<meta property="og:description" content="In my last posts I’ve been writing about many of the concepts and principles that I’ve learned and a bit about how I reason about them. But I see these as just pieces of big a puzzle. 
…">
<meta property="article:published_time" content="2017-11-16T14:30:54+00:00">
<meta property="article:modified_time" content="2019-01-02T22:28:48+00:00">
<meta property="og:site_name" content="@herbertograca">
<meta property="og:image" content="https://herbertograca.files.wordpress.com/2018/11/100-explicit-architecture-svg.png?w=1200">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="821">
<meta property="og:locale" content="en_US">
<meta name="twitter:creator" content="@hgraca">
<meta name="twitter:site" content="@hgraca">
<meta name="twitter:text:title" content="DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together">
<meta name="twitter:image" content="https://herbertograca.files.wordpress.com/2018/11/100-explicit-architecture-svg.png?w=640">
<meta name="twitter:card" content="summary_large_image">
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom">

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/448a31aa6850fbccb7cc0021392a0d0b?s=32" sizes="16x16">
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/448a31aa6850fbccb7cc0021392a0d0b?s=32" sizes="16x16">
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/448a31aa6850fbccb7cc0021392a0d0b?s=114">
<link rel="openid.server" href="https://herbertograca.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="https://herbertograca.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="https://herbertograca.com/osd.xml" title="@herbertograca">
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com">
<link rel="pingback" href="https://herbertograca.com/xmlrpc.php"><meta name="application-name" content="@herbertograca"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbertograca.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/448a31aa6850fbccb7cc0021392a0d0b?s=16"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico"><meta name="description" content="In my last posts I&#39;ve been writing about many of the concepts and principles that I&#39;ve learned and a bit about how I reason about them. But I see these as just pieces of big a puzzle.  Todays post is about how I fit all of these pieces together.">
		<script type="text/javascript">
		function __ATA_CC() {var v = document.cookie.match('(^|;) ?personalized-ads-consent=([^;]*)(;|$)');return v ? 1 : 0;}
		var __ATA_PP = { pt: 1, ht: 0, tn: 'independent-publisher-2', amp: false, siteid: 8982, blogid: 98044927, consent: __ATA_CC() };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		__ATA.criteo = __ATA.criteo || {};
		__ATA.criteo.cmd = __ATA.criteo.cmd || [];
		</script>
		<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/head.js.下载" async=""></script><link rel="amphtml" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
<script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'none']);
	_gaq.push(['_setAllowLinker', true]);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script><script type="text/javascript" async="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ga.js.下载"></script>
<style type="text/css"></style><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/hovercard.min.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/services.min.css"></head>

<body class="post-template-default single single-post postid-14874 single-format-standard wp-embed-responsive mp6 customizer-styles-applied has-sidebar has-header-image highlander-enabled highlander-light tablet-desktop">

<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#content">Skip to content</a>

	<div id="hero-header" class="site-hero-section">
		<header id="masthead" class="site-header" role="banner">
			<div class="inner">
				<div class="site-branding">
					
											<a class="site-logo-link" href="https://herbertograca.com/">
							<img alt="" class="site-logo-image no-grav" width="80" height="80" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a.jpeg" originals="160" scale="2">
						</a><!-- .site-logo-link -->
													<p class="site-title"><a href="https://herbertograca.com/" rel="home">@herbertograca</a></p>
										</div><!-- .site-branding -->

				
				
			</div><!-- .inner -->
		</header><!-- #masthead -->
	</div>

		
	
	
	<div id="content-wrapper" class="content-wrapper">
		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-14874" class="post-14874 post type-post status-publish format-standard has-post-thumbnail hentry category-architecture category-development category-series category-the-software-architecture-chronicles category-uncategorized tag-architecture-2 tag-explicit-architecture tag-software-architecture tag-software-development">
			<header class="entry-header">
			<h1 class="entry-title">DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all&nbsp;together</h1>		</header><!-- .entry-header -->		<div class="entry-meta">
			<span class="byline">
				<a href="https://herbertograca.com/author/hgraca/" title="Posts by hgraca" rel="author">hgraca</a>			</span>
							<span class="cat-links">
					<a href="https://herbertograca.com/category/development/architecture/" rel="category tag">Architecture</a>, <a href="https://herbertograca.com/category/development/" rel="category tag">Development</a>, <a href="https://herbertograca.com/category/development/series/" rel="category tag">Series</a>, <a href="https://herbertograca.com/category/development/series/the-software-architecture-chronicles/" rel="category tag">The Software Architecture Chronicles</a>, <a href="https://herbertograca.com/category/uncategorized/" rel="category tag">Uncategorized</a>				</span><!-- .cat-links -->
			
			
			<span class="published-on">
				<time class="entry-date published" datetime="2017-11-16T15:30:54+01:00">November 16, 2017</time><time class="updated" datetime="2019-01-02T23:28:48+01:00">January 2, 2019</time>			</span>

			<span class="word-count">17 Minutes</span>		</div><!-- .entry-meta -->
	
	<div class="entry-content">
		<p style="text-align:justify;"><i>This post is part of </i><i><a href="https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/" target="_blank" rel="noopener">The Software Architecture Chronicles</a></i><i>, a </i><i><a href="https://herbertograca.com/category/development/series/software-architecture/">series of posts about Software Architecture</a></i><i>. In them, I write about what I’ve learned about Software Architecture, how I think of it, and how I use that knowledge. The contents of this post might make more sense if you read the previous posts in this series.</i></p>
<p style="text-align:justify;">After graduating from University I followed a career as a high school teacher until a few years ago I decided to drop it and become a full-time software developer.</p>
<p style="text-align:justify;">From then on, I have always felt like I need to recover the “lost” time and learn as much as possible, as fast as possible. So I have become a bit of an addict in experimenting, reading and writing, with a special focus on software design and architecture. That’s why I write these posts, to help me learn.</p>
<p style="text-align:justify;">In my last posts, I’ve been writing about many of the concepts and principles that I’ve learned and a bit about how I reason about them. But I see these as just pieces of big a puzzle.</p>
<p style="text-align:justify;">Today’s post is about how I fit all of these pieces together and, as it seems I should give it a name, I call it <strong>Explicit Architecture</strong>. Furthermore, these concepts have all “<em>passed their battle trials</em>” and are used in production code on highly demanding platforms.&nbsp;One is a SaaS e-com platform with thousands of web-shops worldwide, another one is a marketplace, live in 2 countries with a message bus that handles over 20 million messages per month.</p>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#fundamental-blocks-of-the-system">Fundamental blocks of the system</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#tools">Tools</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#connecting-the-tools-and-the-application-core">Connecting the tools and delivery mechanisms to the Application Core</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#ports">Ports</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#primary-or-driving-adapters">Primary or Driving Adapters</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#secondary-or-driving-adapters">Secondary or Driven Adapters</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#inversion-of-control">Inversion of control</a></li>
</ul>
</li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#application-core-organisation">Application Core Organisation</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#application-layer">Application Layer</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#domain-layer">Domain Layer</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#domain-services">Domain Services</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#domain-model">Domain Model</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#components">Components</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#decoupling-the-components">Decoupling the components</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#triggering-logic-in-other-components">Triggering logic in other components</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#getting-data-from-other-components">Getting data from other components</a>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#data-storage-shared-between-components">Data storage shared between components</a></li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#data-storage-segregated-per-component">Data storage segregated per component</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#flow-of-control">Flow of control</a></li>
</ul>
<p style="text-align:justify;"><span id="more-14874"></span></p>
<h2 id="fundamental-blocks-of-the-system" style="text-align:justify;"><strong>Fundamental blocks of the system</strong></h2>
<p style="text-align:justify;">I start by recalling <a href="https://herbertograca.com/2017/08/24/ebi-architecture/"><strong>EBI</strong></a> and <strong><a href="https://herbertograca.com/2017/09/14/ports-adapters-architecture/" target="_blank" rel="noopener">Ports &amp; Adapters</a></strong> architectures. Both of them make an explicit separation of what code is internal to the application, what is external, and what is used for connecting internal and external code.</p>
<p style="text-align:justify;">Furthermore,&nbsp;<strong><a href="https://herbertograca.com/2017/09/14/ports-adapters-architecture/" target="_blank" rel="noopener">Ports &amp; Adapters</a></strong> architecture explicitly identifies three fundamental blocks of code in a system:</p>
<ul style="text-align:justify;">
<li style="text-align:justify;">What makes it possible to run a <strong>user interface</strong>, whatever type of user interface it might be;</li>
<li style="text-align:justify;">The system <strong>business logic</strong>, or&nbsp;<strong>application core</strong>, which is used by the user interface to actually make things happen;</li>
<li style="text-align:justify;"><strong>Infrastructure</strong> code, that connects our application core to tools like a database, a search engine or 3rd party APIs.</li>
</ul>
<p style="text-align:justify;"><img data-attachment-id="16258" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/000-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="000 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16258 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/000-explicit-architecture-svg.png" alt="000 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/000-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">The application core is what we should really care about. It is the code that allows our code to do what it is supposed to do, it IS our application. It might use several user interfaces (progressive web app, mobile, CLI, API, …) but the code actually doing the work is the same and is located in the application core, it shouldn’t really matter what UI triggers it.</p>
<p style="text-align:justify;">As you can imagine, the typical application flow goes from the code in the user interface, through the application core to the infrastructure code, back to the application core and finally deliver a response to the user interface.</p>
<p style="text-align:justify;"><img data-attachment-id="16257" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/010-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="010 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16257 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/010-explicit-architecture-svg.png" alt="010 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/010-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<h2 id="tools" style="text-align:justify;"><strong>Tools</strong></h2>
<p style="text-align:justify;">Far away from the most important code in our system, the application core, we have the tools that our application uses, for example, a database engine, a search engine, a Web server or a CLI console (although the last two are also delivery mechanisms).</p>
<p style="text-align:justify;"><img data-attachment-id="16256" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/020-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="020 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16256 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/020-explicit-architecture-svg.png" alt="020 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/020-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">While it might feel weird to put a CLI console in the same “bucket” as a database engine, and although they have different types of purposes, they are in fact tools used by the application. The key difference is that, while the CLI console and the web server are used to <strong><span style="text-decoration:underline;">tell</span> our application to do something</strong>, the database engine is <strong><span style="text-decoration:underline;">told</span> by our application to do something</strong>. This is a very relevant distinction, as it has strong implications on how we build the code that connects those tools with the application core.</p>
<h2 id="connecting-the-tools-and-the-application-core" style="text-align:justify;"><strong>Connecting the tools and delivery mechanisms to the Application Core</strong></h2>
<p style="text-align:justify;">The code units that connect the tools to the application core are called adapters (<a href="https://herbertograca.com/2017/09/14/ports-adapters-architecture/" target="_blank" rel="noopener">Ports &amp; Adapters Architecture</a>). The adapters are the ones that effectively implement the code that will allow the business logic to communicate with a specific tool and vice-versa.</p>
<p style="text-align:justify;">The adapters that <strong>tell</strong> our application to do something are called&nbsp;<strong>Primary or Driving Adapters</strong>&nbsp;while&nbsp;the ones that are <strong>told</strong> by our application to do something are called&nbsp;<strong>Secondary or Driven Adapters</strong>.</p>
<h3 id="ports">Ports</h3>
<p style="text-align:justify;">These <em>Adapters</em>, however, are not randomly created. They are created to fit a very specific entry point to the Application Core, a <strong><em>Port</em></strong>. A port <strong>is nothing more than a specification</strong> of how the tool can use the application core, or how it is used by the Application Core. In most languages and in its most simple form, this specification, the Port, will be an Interface, but it might actually be composed of several Interfaces and DTOs.</p>
<p style="text-align:justify;">It’s important to note that <strong>the Ports (Interfaces) belong inside the business logic</strong>, while the adapters belong outside. For this pattern to work as it should, it is of utmost importance that the Ports are created to fit the Application Core needs and not simply mimic the tools APIs.</p>
<h3 id="primary-or-driving-adapters" style="text-align:justify;">Primary or Driving Adapters</h3>
<p style="text-align:justify;">The Primary or <strong>Driver Adapters <span style="text-decoration:underline;">wrap</span> around a Port</strong> and use it to tell the Application Core what to do.&nbsp;<strong>They translate whatever comes from a delivery mechanism into a method call in the Application Core.</strong></p>
<p style="text-align:justify;"><img data-attachment-id="16255" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/030-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="030 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16255 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/030-explicit-architecture-svg.png" alt="030 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/030-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">In other words, our Driving Adapters are Controllers or Console Commands who are injected in their constructor with some object whose class implements the interface (Port) that the controller or console command requires.</p>
<p style="text-align:justify;">In a more concrete example, a Port can be a Service interface or a Repository interface that a controller requires. The concrete implementation of the Service, Repository or Query is then injected and used in the Controller.</p>
<p style="text-align:justify;">Alternatively, a Port can be a Command Bus or Query Bus interface. In this case, a concrete implementation of the Command or Query Bus is injected into the Controller, who then constructs a Command or Query and passes it to the relevant Bus.</p>
<h3 id="secondary-or-driving-adapters" style="text-align:justify;">Secondary or Driven Adapters</h3>
<p style="text-align:justify;">Unlike the Driver Adapters, who wrap around a port, <strong>the Driven Adapters <span style="text-decoration:underline;">implement</span> a Port</strong>, an interface, and are then injected into the Application Core, wherever the port is required (type-hinted).</p>
<p><img data-attachment-id="16254" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/040-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="040 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16254 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/040-explicit-architecture-svg.png" alt="040 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/040-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">For example, let’s suppose that we have a naive application which needs to persist data. So we create a persistence interface that meets its needs, with a method to <em>save</em> an array of data and a method to <em>delete</em> a line in a table by its ID. From then on, wherever our application needs to save or delete data we will require in its constructor an object that implements the persistence interface that we defined.</p>
<p style="text-align:justify;">Now we create an adapter specific to MySQL which will implement that interface. It will have the methods to save an array and delete a line in a table, and we will inject it wherever the persistence interface is required.</p>
<p style="text-align:justify;">If at some point we decide to change the database vendor, let’s say to PostgreSQL or MongoDB, we just need to create a new adapter that implements the persistence interface and is specific to PostgreSQL, and inject the new adapter instead of the old one.</p>
<h3 id="inversion-of-control" style="text-align:justify;">Inversion of control</h3>
<p style="text-align:justify;">A characteristic to note about this pattern is that the adapters depend on a specific tool and a specific port (by implementing an interface). But our business logic only depends on the port (interface), which is designed to fit the business logic needs, so it doesn’t depend on a specific adapter or tool.</p>
<p style="text-align:justify;"><img data-attachment-id="16253" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/050-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="050 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16253 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/050-explicit-architecture-svg.png" alt="050 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/050-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">This means the direction of dependencies is towards the centre, it’s the <strong>inversion of control principle at the architectural level</strong>.</p>
<p style="text-align:justify;">Although, again,&nbsp;<strong>it is of utmost importance that the Ports are created to fit the Application Core needs and not simply mimic the tools APIs.</strong></p>
<h2 id="application-core-organisation" style="text-align:justify;"><strong>Application Core organisation</strong></h2>
<p style="text-align:justify;">The <a href="https://herbertograca.com/2017/09/21/onion-architecture/" target="_blank" rel="noopener">Onion Architecture</a> picks up the DDD layers and incorporates them into the <a href="https://herbertograca.com/2017/09/14/ports-adapters-architecture/" target="_blank" rel="noopener">Ports &amp; Adapters Architecture</a>. Those layers are intended to bring some organisation to the business logic, the interior of the Ports &amp; Adapters “hexagon”, and just like in Ports &amp; Adapters, the dependencies direction is towards the centre.</p>
<h3 id="application-layer" style="text-align:justify;">Application Layer</h3>
<p style="text-align:justify;">The use cases are the processes that can be triggered in our Application Core by one or several User Interfaces in our application. For example, in a CMS we could have the actual application UI used by the common users, another independent UI for the CMS administrators, another CLI UI, and a web API. These UIs (applications) could trigger use cases that can be specific to one of them or reused by several of them.</p>
<p style="text-align:justify;">The use cases are defined in the Application Layer, the first layer provided by DDD and used by the Onion Architecture.</p>
<p style="text-align:justify;"><img data-attachment-id="16252" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/060-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="060 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16252 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/060-explicit-architecture-svg.png" alt="060 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/060-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">This layer contains Application Services (and their interfaces) as first class citizens, but it also contains the Ports &amp; Adapters interfaces (ports) which include ORM interfaces, search engines interfaces, messaging interfaces and so on. In the case where we are using a Command Bus and/or a Query Bus, this layer is where the respective Handlers for the Commands and Queries belong.</p>
<p style="text-align:justify;">The Application Services and/or Command Handlers contain the logic to unfold a use case, a business process. Typically, their role is to:</p>
<ol style="text-align:justify;">
<li>use a repository to find one or several entities;</li>
<li>tell those entities to do some domain logic;</li>
<li>and use the repository to persist the entities again, effectively saving the data changes.</li>
</ol>
<p style="text-align:justify;"><span style="text-align:justify;">The Command Handlers can be used in two different ways:</span></p>
<ol style="text-align:justify;">
<li>They can contain the actual logic to perform the use case;</li>
<li style="text-align:justify;">They can be used as mere wiring pieces in our architecture, receiving a Command and simply triggering logic that exists in an Application Service.</li>
</ol>
<p style="text-align:justify;">Which approach to use depends on the context, for example:</p>
<ul style="text-align:justify;">
<li>Do we already have the Application Services in place and are now adding a Command Bus?</li>
<li>Does the Command Bus allow specifying any class/method as a handler, or do they need to extend or implement existing classes or interfaces?</li>
</ul>
<p style="text-align:justify;">This layer also contains the triggering of&nbsp;<strong>Application Events</strong>, which represent some outcome of a use case. These events trigger logic that is a side effect of a use case, like sending emails, notifying a 3rd party API, sending a push notification, or even starting another use case that belongs to a different component of the application.</p>
<h3 id="domain-layer" style="text-align:justify;">Domain Layer</h3>
<p style="text-align:justify;">Further inwards, we have the Domain Layer. The objects in this layer contain the data and the logic to manipulate that data, that is specific to the Domain itself and it’s independent of the business processes that trigger that logic, they are independent and completely unaware of the Application Layer.</p>
<p style="text-align:justify;"><img data-attachment-id="16251" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/070-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="070 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16251 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/070-explicit-architecture-svg.png" alt="070 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/070-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<h4 id="domain-services" style="text-align:justify;">Domain Services</h4>
<p style="text-align:justify;">As I mentioned above, the role of an Application Service is to:</p>
<ol style="text-align:justify;">
<li>use a repository to find one or several entities;</li>
<li>tell those entities to do some domain logic;</li>
<li>and use the repository to persist the entities again, effectively saving the data changes.</li>
</ol>
<p style="text-align:justify;">However, sometimes we encounter some domain logic that involves different entities, of the same type or not, and we feel that that domain logic does not belong in the entities themselves, we feel that that logic is not their direct responsibility.</p>
<p style="text-align:justify;">So our first reaction might be to place that logic outside the entities, in an Application Service. However, this means that&nbsp;that domain logic will not be reusable in other use cases: domain logic should stay out of the application layer!</p>
<p style="text-align:justify;">The solution is to create a Domain Service, which has the role of receiving a set of entities and performing some business logic on them. A Domain Service belongs to the Domain Layer, and therefore it knows nothing about the classes in the Application Layer, like the Application Services or the Repositories. In the other hand, it can use other Domain Services and, of course, the Domain Model objects.</p>
<h4 id="domain-model" style="text-align:justify;">Domain Model</h4>
<p style="text-align:justify;">In the very centre, depending on nothing outside it, is the Domain Model, which contains the business objects that represent something in the domain. Examples of these objects are, first of all, Entities but also Value Objects, Enums and any objects used in the Domain Model.</p>
<p style="text-align:justify;">The Domain Model is also where Domain Events “live”. These events are triggered when a specific set of data changes and they carry those changes with them. In other words, when an entity changes, a Domain Event is triggered and it carries the changed properties new values. These events are perfect, for example, to be used in Event Sourcing.</p>
<h2 id="components" style="text-align:justify;"><strong>Components</strong></h2>
<p style="text-align:justify;">So far we have been segregating the code based on layers, but that is the fine-grained code segregation. The coarse-grained segregation of code is at least as important and it’s about segregating the code according to sub-domains and <a href="http://ddd.fed.wiki.org/view/welcome-visitors/view/domain-driven-design/view/bounded-context" target="_blank" rel="noopener"><strong><em>bounded</em><em> contexts</em></strong></a>, following Robert C. Martin ideas expressed in&nbsp;<em><strong><a href="https://8thlight.com/blog/uncle-bob/2011/09/30/Screaming-Architecture.html" target="_blank" rel="noopener">screaming architecture</a></strong></em>. This is often referred to as “<em>Package by feature</em>” or “<em>Package by component</em>” as opposed to”<em>Package by layer</em>“, and it’s quite well explained by Simon Brown in his blog post&nbsp;“<a href="http://www.codingthearchitecture.com/2015/03/08/package_by_component_and_architecturally_aligned_testing.html" target="_blank" rel="noopener">Package by component and architecturally-aligned testing</a>“:</p>
<div class="tiled-gallery type-square" data-original-width="1100" data-carousel-extra="{&quot;blog_id&quot;:98044927,&quot;permalink&quot;:&quot;https:\/\/herbertograca.com\/2017\/11\/16\/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together\/&quot;,&quot;likes_blog_id&quot;:98044927}" itemscope="" itemtype="http://schema.org/ImageGallery"> <div class="gallery-row" style="width: 740px; height: 246px;" data-original-width="1100" data-original-height="366"> <div class="gallery-group" style="width: 246px; height: 246px;" data-original-width="366" data-original-height="366"> <div class="tiled-gallery-item " itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"> <a href="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png" border="0" itemprop="url"> <meta itemprop="width" content="362"> <meta itemprop="height" content="362"> <img data-attachment-id="16613" data-orig-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png" data-orig-size="1024,768" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="20150308-package-by-layer" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png?w=300" data-large-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png?w=1024" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/20150308-package-by-layer.png" width="242" height="242" data-original-width="362" data-original-height="362" itemprop="http://schema.org/image" title="20150308-package-by-layer" alt="20150308-package-by-layer" style="width: 242px; height: 242px;" srcset="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png?w=242&amp;h=242&amp;crop=1&amp;zoom=2 2x" src-orig="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-layer.png?w=362&amp;h=362&amp;crop=1" scale="2"> </a> </div> </div> <div class="gallery-group" style="width: 246px; height: 246px;" data-original-width="366" data-original-height="366"> <div class="tiled-gallery-item " itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"> <a href="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png" border="0" itemprop="url"> <meta itemprop="width" content="362"> <meta itemprop="height" content="362"> <img data-attachment-id="16614" data-orig-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png" data-orig-size="1024,768" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="20150308-package-by-feature" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png?w=300" data-large-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png?w=1024" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/20150308-package-by-feature.png" width="242" height="242" data-original-width="362" data-original-height="362" itemprop="http://schema.org/image" title="20150308-package-by-feature" alt="20150308-package-by-feature" style="width: 242px; height: 242px;" srcset="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png?w=242&amp;h=242&amp;crop=1&amp;zoom=2 2x" src-orig="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-feature.png?w=362&amp;h=362&amp;crop=1" scale="2"> </a> </div> </div> <div class="gallery-group" style="width: 246px; height: 246px;" data-original-width="366" data-original-height="366"> <div class="tiled-gallery-item " itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"> <a href="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png" border="0" itemprop="url"> <meta itemprop="width" content="362"> <meta itemprop="height" content="362"> <img data-attachment-id="16615" data-orig-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png" data-orig-size="1024,768" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="20150308-package-by-component" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png?w=300" data-large-file="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png?w=1024" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/20150308-package-by-component.png" width="242" height="242" data-original-width="362" data-original-height="362" itemprop="http://schema.org/image" title="20150308-package-by-component" alt="20150308-package-by-component" style="width: 242px; height: 242px;" srcset="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png?w=242&amp;h=242&amp;crop=1&amp;zoom=2 2x" src-orig="https://herbertograca.files.wordpress.com/2017/11/20150308-package-by-component.png?w=362&amp;h=362&amp;crop=1" scale="2"> </a> </div> </div> </div> </div>
<p style="text-align:justify;">I am an advocate for the&nbsp;“<em>Package by component</em>” approach and, picking up on Simon Brown diagram about&nbsp;<em>Package by component</em>, I would shamelessly change it to the following:</p>
<p><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/sZYMIOkDWr7ILUSmG_qvwFw.png" scale="0"></p>
<p style="text-align:justify;">These sections of code are cross-cutting to the layers previously described, they are the <em><strong><a href="https://herbertograca.com/2017/07/05/software-architecture-premises/" target="_blank" rel="noopener">components</a></strong></em> of our application. Examples of components can be <del>Authentication, Authorization,</del> Billing, User, Review or Account, but they are always related to the domain. Bounded contexts like Authorization and/or Authentication should be seen as external tools for which we create an adapter and hide behind some kind of port.</p>
<p style="text-align:justify;"><img data-attachment-id="16250" data-permalink="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/080-explicit-architecture-svg/" data-orig-file="https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=1100" data-orig-size="1600,1094" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="080 – Explicit Architecture.svg" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=1100?w=1024" class=" size-full wp-image-16250 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/080-explicit-architecture-svg.png" alt="080 - Explicit Architecture.svg" srcset="https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/11/080-explicit-architecture-svg.png 1600w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<h3 id="decoupling-the-components" style="text-align:justify;">Decoupling the components</h3>
<p style="text-align:justify;">Just like the fine-grained code units (classes, interfaces, traits, mixins, …), also the coarsely grained code-units (components) benefit from low coupling and high cohesion.</p>
<p style="text-align:justify;">To decouple classes we make use of Dependency Injection, by injecting dependencies into a class as opposed to instantiating them inside the class, and Dependency Inversion, by making the class depend on abstractions (interfaces and/or abstract classes) instead of concrete classes. This means that the depending class has no knowledge about the concrete class that it is going to use, it has no reference to the fully qualified class name of the classes that it depends on.</p>
<p style="text-align:justify;">In the same way, having completely decoupled components means that a component has no direct knowledge of any another component. In other words, it has no reference to any fine-grained code unit from another component, not even interfaces! This means that Dependency Injection and Dependency Inversion are not enough to decouple components, we will need some sort of architectural constructs. We might need events, a shared kernel, eventual consistency, and even a discovery service!</p>
<p><a href="https://drive.google.com/open?id=1E_hx5B4czRVFVhGJbrbPDlb_JFxJC8fYB86OMzZuAhg" target="_blank" rel="noopener"><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/s04p4OIbZDStJGtY4MlqnTg.png" scale="0"></a></p>
<h4 id="triggering-logic-in-other-components" style="text-align:justify;">Triggering logic in other components</h4>
<p style="text-align:justify;">When one of our components (component B) needs to do something whenever something else happens in another component (component A), we can not simply make a direct call from component A to a class/method in component B because A would then be coupled to B.</p>
<p style="text-align:justify;">However we can make A use an event dispatcher to dispatch an application event that will be delivered to any component listening to it, including B, and the event listener in B will trigger the desired action. This means that component A will depend on an event dispatcher, but it will be decoupled from B.</p>
<p style="text-align:justify;">Nevertheless, if the event itself “lives” in A this means that B knows about the existence of A, it is coupled to A. To remove this dependency, we can create a library with a set of application core functionality that will be shared among all components, the <a href="http://ddd.fed.wiki.org/view/welcome-visitors/view/domain-driven-design/view/shared-kernel" target="_blank" rel="noopener">Shared Kernel</a>. This means that the components will both depend on the Shared Kernel but they will be decoupled from each other. The Shared Kernel will contain functionality like application and domain events, but it can also contain Specification objects, and whatever makes sense to share, keeping in mind that it should be as minimal as possible because any changes to the Shared Kernel will affect all components of the application. Furthermore, if we have a polyglot system, let’s say a micro-services ecosystem where they are written in different languages, the Shared Kernel needs to be language agnostic so that it can be understood by all components, whatever the language they have been written in. For example, instead of the Shared Kernel containing an Event class, it will contain the event description (ie. name, properties, maybe even methods although these would be more useful in a Specification object) in an agnostic language like JSON, so that all components/micro-services can interpret it and maybe even auto-generate their own concrete implementations. Read more about this in my followup post:&nbsp;<a href="https://herbertograca.com/2018/07/07/more-than-concentric-layers/" target="_blank" rel="noopener">More than concentric layers</a>.</p>
<p><img data-attachment-id="16772" data-permalink="https://herbertograca.com/2018/07/07/more-than-concentric-layers/explicti_arch_layers/" data-orig-file="https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=1100" data-orig-size="1521,1043" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Explicti_arch_layers" data-image-description="" data-medium-file="https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=1100?w=300" data-large-file="https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=1100?w=1024" class=" size-full wp-image-16772 aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/explicti_arch_layers.png" alt="Explicti_arch_layers" srcset="https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=1100 1100w, https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=150 150w, https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=300 300w, https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=768 768w, https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png?w=1024 1024w, https://herbertograca.files.wordpress.com/2018/07/explicti_arch_layers.png 1521w" sizes="(max-width: 1100px) 100vw, 1100px"></p>
<p style="text-align:justify;">This approach works both in monolithic applications and distributed applications like micro-services ecosystems. However, when the events can only be delivered asynchronously, for contexts where triggering logic in other components needs to be done immediately this approach will not suffice! Component A will need to make a direct HTTP call to component B. In this case, to have the components decoupled, we will need a discovery service to which A will ask where it should send the request to trigger the desired action, or alternatively make the request to the discovery service who can proxy it to the relevant service and eventually return a response back to the requester. This approach will couple the components to the discovery service but will keep them decoupled from each other.</p>
<h4 id="getting-data-from-other-components" style="text-align:justify;">Getting data from other components</h4>
<p style="text-align:justify;">The way I see it, a component is not allowed to change data that it does not “own”, but it is fine for it to query and use any data.</p>
<h5 id="data-storage-shared-between-components" style="text-align:justify;">Data storage shared between components</h5>
<p style="text-align:justify;">When a component needs to use data that belongs to another component, let’s say a billing component needs to use the client name which belongs to the accounts component, the billing component will contain a query object that will query the data storage for that data. This simply means that the billing component can know about any dataset, but it must use the data that it does not “own” as read-only, by the means of queries.</p>
<h5 id="data-storage-segregated-per-component" style="text-align:justify;">Data storage segregated per component</h5>
<p style="text-align:justify;">In this case, the same pattern applies, but we have more complexity at the data storage level. Having components with their own data storage means each data storage contains:</p>
<ul>
<li style="text-align:justify;">A set of data that it owns and is the only one allowed to change, making it the single source of truth;</li>
<li style="text-align:justify;">A set of data that is a copy of other components data, which it can not change on its own, but is needed for the component functionality, and it needs to be updated whenever it changes in the owner component.</li>
</ul>
<p style="text-align:justify;">Each component will create a local copy of the data it needs from other components, to be used when needed. When the data changes in the component that owns it, that owner component will trigger a domain event carrying the data changes. The components holding a copy of that data will be listening to that domain event and will update their local copy accordingly.</p>
<h2 id="flow-of-control">Flow of control</h2>
<p style="text-align:justify;">As I said above, the flow of control goes, of course, from the user into the Application Core, over to the infrastructure tools, back to the Application Core and finally back to the user. But how exactly do classes fit together? Which ones depend on which ones? How do we compose them?</p>
<p style="text-align:justify;">Following Uncle Bob, in his article about Clean Architecture, I will try to explain the flow of control with UMLish diagrams…</p>
<h3>Without a Command/Query Bus</h3>
<p style="text-align:justify;">In the case we do not use a command bus, the Controllers will depend either on an Application Service or on a Query object.</p>
<p style="font-size:70%;text-align:justify;">[<strong>EDIT – 2017-11-18</strong>] I completely missed the DTO I use to return data from the query, so I added it now. Tkx to&nbsp;<a class="" href="https://www.reddit.com/user/MorphineAdministered" target="_blank" rel="noopener">MorphineAdministered</a>&nbsp;who <a href="https://www.reddit.com/r/PHP/comments/7dcz8k/ddd_hexagonal_onion_clean_cqrs_how_i_put_it_all/dpy6va4/" target="_blank" rel="noopener">pointed it out</a> for me.</p>
<p><img class=" aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/sxsr8juPiXpFd15czFzykdw.png" scale="0"></p>
<p style="text-align:justify;">In the diagram above we use an interface for the Application Service, although we might argue that it is not really needed since the Application Service is part of our application code and we will not want to swap it for another implementation, although we might refactor it entirely.</p>
<p style="text-align:justify;">The Query object will contain an optimized query that will simply return some raw data to be shown to the user. That data will be returned in a DTO which will be injected into a ViewModel. ThisViewModel may have some view logic in it, and it will be used to populate a View.</p>
<p style="text-align:justify;">The Application Service, on the other hand, will contain the use case logic, the logic we will trigger when we want to do something in the system, as opposed to simply view some data. The Application Services depend on Repositories which will return the Entity(ies) that contain the logic which needs to be triggered. It might also depend on a Domain Service to coordinate a domain process in several entities, but that is hardly ever the case.</p>
<p style="text-align:justify;">After unfolding the use case, the Application Service might want to notify the whole system that that use case has happened, in which case it will also depend on an event dispatcher to trigger the event.</p>
<p>It is interesting to note that we place interfaces both on the persistence engine and on the repositories. Although it might seem redundant, they serve different purposes:</p>
<ul>
<li style="text-align:justify;">The persistence interface is an abstraction layer over the ORM so we can swap the ORM being used with no changes to the Application Core.</li>
<li style="text-align:justify;">The repository interface is an abstraction on the persistence engine itself. Let’s say we want to switch from MySQL to MongoDB. The persistence interface can be the same, and, if we want to continue using the same ORM, even the persistence adapter will stay the same.&nbsp;However, the query language is completely different, so we can create new repositories which use the same persistence mechanism, implement the same repository interfaces but builds the queries using the MongoDB query language instead of SQL.</li>
</ul>
<h3>With a Command/Query Bus</h3>
<p style="text-align:justify;">In the case that our application uses a Command/Query Bus, the diagram stays pretty much the same, with the exception that the controller now depends on the Bus and on a command or a Query. It will instantiate the Command or the Query, and pass it along to the Bus who will find the appropriate handler to receive and handle the command.</p>
<p style="text-align:justify;">In the diagram below, the Command Handler then uses an Application Service. However, that is not always needed, in fact in most of the cases the handler will contain all the logic of the use case. We only need to extract logic from the handler into a separated Application Service if we need to reuse that same logic in another handler.</p>
<p style="font-size:70%;text-align:justify;">[<strong>EDIT – 2017-11-18</strong>] I completely missed the DTO I use to return data from the query, so I added it now. Tkx to&nbsp;<a class="" href="https://www.reddit.com/user/MorphineAdministered" target="_blank" rel="noopener">MorphineAdministered</a>&nbsp;who <a href="https://www.reddit.com/r/PHP/comments/7dcz8k/ddd_hexagonal_onion_clean_cqrs_how_i_put_it_all/dpy6va4/" target="_blank" rel="noopener">pointed it out</a> for me.</p>
<p><img class=" aligncenter" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/sEb9usC7SnTe3KOaRWIHn9w.png" scale="0"></p>
<p style="text-align:justify;">You might have noticed that there is no dependency between the Bus and the Command, the Query nor the Handlers. This is because they should, in fact, be unaware of each other in order to provide for good decoupling. The way the Bus will know what Handler should handle what Command, or Query, should be set up with mere configuration.</p>
<p style="text-align:justify;">As you can see, in both cases all the arrows, the dependencies, that cross the border of the application core, they point inwards. As explained before, this a fundamental rule of Ports &amp; Adapters Architecture, Onion Architecture and Clean Architecture.</p>
<p><a href="https://docs.google.com/drawings/d/1DGiP9qyBpRHPDPKRJoXdElw1DXwmJoR-88Qvtf6hBNA/edit?usp=sharing" target="_blank" rel="noopener"><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/sfi2Z4TyEiq_eHpGuTAeUKw.png" scale="0"></a></p>
<h2 id="conclusion" style="text-align:justify;"><strong>Conclusion</strong></h2>
<p style="text-align:justify;">The goal, as always, is to have a codebase that is loosely coupled and high cohesive, so that changes are easy, fast and safe to make.</p>
<blockquote><p>Plans are worthless, but planning is everything.</p>
<p style="text-align:right;">Eisenhower</p>
</blockquote>
<p style="text-align:justify;">This infographic is a concept map. Knowing and understanding all of these concepts will help us plan for a healthy architecture, a healthy application.</p>
<p>Nevertheless:</p>
<blockquote><p>The map is not the territory.</p>
<p style="text-align:right;">Alfred Korzybski</p>
</blockquote>
<p style="text-align:justify;">Meaning that <strong>these are just guidelines! The application is the territory, the reality, the concrete use case where we need to apply our knowledge, and that is what will define what the actual architecture will look like!</strong></p>
<p style="text-align:justify;"><strong>We need to understand all these patterns, but we also always need to think and understand exactly what our application needs, how far should we go for the sake of decoupling and cohesiveness.</strong> This decision can depend on plenty of factors, starting with the project functional requirements, but can also include factors like the time-frame to build the application, the lifespan of the application, the experience of the development team, and so on.</p>
<p style="text-align:justify;">This is it, this is how I make sense of it all. This is how I rationalize it in my head.</p>
<p>I expanded these ideas a bit more on a followup post:&nbsp;<a href="https://herbertograca.com/2018/07/07/more-than-concentric-layers/" target="_blank" rel="noopener">More than concentric layers</a>.</p>
<p style="text-align:justify;">However, how do we make all this explicit in the code base? That’s the subject of one of my next posts: how to reflect the architecture and domain, in the code.</p>
<p style="text-align:justify;">Last but not least, thanks to my colleague&nbsp;<a href="https://www.linkedin.com/in/francescomastrogiacomo/" target="_blank" rel="noopener">Francesco Mastrogiacomo</a>, for helping me make my infographic look nice. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<h2><strong>Translations</strong></h2>
<ul>
<li><a href="https://www.jianshu.com/p/d3e8b9ac097b" target="_blank" rel="noopener">Chinese</a>, by Qinyusuain</li>
<li><a href="https://tagoto.atlassian.net/wiki/spaces/public/blog/2018/02/18/37061127/DDD+Hexagonal+Onion+Clean+CQRS" target="_blank" rel="noopener">Japanese</a>, by Tagoto</li>
<li><a href="http://chepa.net/all/2018/10/25/%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4-ddd-hexagonal-onion-clean-cqrs-%D0%BA%D0%B0%D0%BA-%D1%8F-%D1%81%D0%BE%D0%B1%D1%80%D0%B0%D0%BB-%D0%B2%D1%81%D1%91-%D1%8D%D1%82%D0%BE-%D0%B2/" target="_blank" rel="noopener">Russian</a></li>
<li><a href="https://edwardthienhoang.wordpress.com/2018/08/24/ket-hop-cac-mau-kien-truc-pattern-vao-trong-mot-ddd-hexagonal-onion-clean-cqrs/" target="_blank" rel="noopener">Vietnamese</a>, by&nbsp;Edward Hien Hoang</li>
</ul>
<div id="atatags-370373-5c641ec7e4baf">
        <script type="text/javascript">
            __ATA.cmd.push(function() {
                __ATA.initVideoSlot('atatags-370373-5c641ec7e4baf', {
                    sectionId: '370373',
                    format: 'inread'
                });
            });
        </script>
    </div>		<div class="wpcnt">
			<div class="wpa wpmrec">
				<span class="wpa-about">Advertisements</span>
				<div class="u">		<div style="padding-bottom:15px;width:300px;height:250px;float:left;margin-right:5px;margin-top:0px">
		<div id="atatags-26942-5c641ec7e4be3">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-26942-5c641ec7e4be3',  {
					collapseEmpty: 'before',
					sectionId: '26942',
					width: 300,
					height: 250
				});
			});
			</script>
		</div></div>		<div style="padding-bottom:15px;width:300px;height:250px;float:left;margin-top:0px">
		<div id="atatags-114160-5c641ec7e4bee">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-114160-5c641ec7e4bee',  {
					collapseEmpty: 'before',
					sectionId: '114160',
					width: 300,
					height: 250
				});
			});
			</script>
		</div></div></div>
				
			</div>
		</div><div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-14874" class="share-twitter sd-button share-icon" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-14874" class="share-facebook sd-button share-icon" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span>Facebook<span class="share-count">543</span></span></a></li><li class="share-google-plus-1"><a rel="nofollow noopener noreferrer" data-shared="sharing-google-14874" class="share-google-plus-1 sd-button share-icon" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?share=google-plus-1&amp;nb=1" target="_blank" title="Click to share on Google+"><span>Google</span></a></li><li class="share-end"></li></ul></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-98044927-14874-5c641ec7ec32d" data-src="//widgets.wp.com/likes/index.html?ver=20180319#blog_id=98044927&amp;post_id=14874&amp;origin=herbertograca.wordpress.com&amp;obj_id=98044927-14874-5c641ec7ec32d" data-name="like-post-frame-98044927-14874-5c641ec7ec32d"><h3 class="sd-title">Like this:</h3><div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe class="post-likes-widget jetpack-likes-widget" name="like-post-frame-98044927-14874-5c641ec7ec32d" height="55px" width="100%" frameborder="0" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/index.html"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div>
<div id="jp-relatedposts" class="jp-relatedposts" style="display: block;">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
<div class="jp-relatedposts-items jp-relatedposts-items-minimal"><p class="jp-relatedposts-post jp-relatedposts-post0" data-post-id="10113" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/" title="The Software Architecture Chronicles

This post is the first of a series of posts about Software Architecture. In them, I write about what I&#39;ve learned on Software Architecture, how I think of it, and how I use that knowledge." rel="nofollow" data-origin="14874" data-position="0">The Software Architecture Chronicles</a></span><span class="jp-relatedposts-post-context">In "Architecture"</span></p><p class="jp-relatedposts-post jp-relatedposts-post1" data-post-id="5622" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://herbertograca.com/2017/07/05/software-architecture-premises/" title="Software Architecture Premises

In this post, I establish the very first concepts about Software Architecture, that will be needed in order to better understand the following posts." rel="nofollow" data-origin="14874" data-position="1">Software Architecture Premises</a></span><span class="jp-relatedposts-post-context">In "Architecture"</span></p><p class="jp-relatedposts-post jp-relatedposts-post2" data-post-id="8825" data-post-format="false"><span class="jp-relatedposts-post-title"><a class="jp-relatedposts-post-a" href="https://herbertograca.com/2017/09/28/clean-architecture-standing-on-the-shoulders-of-giants/" title="Clean Architecture: Standing on the shoulders of giants

Robert C. Martin (AKA Uncle Bob) published his ideas about Clean Architecture back in 2012, in a post on his blog, and lectured about it at a few conferences. The Clean Architecture leverages well-known and not so well-known concepts, rules, and patterns, explaining how to fit them together, to propose a standardised…" rel="nofollow" data-origin="14874" data-position="2">Clean Architecture: Standing on the shoulders of giants</a></span><span class="jp-relatedposts-post-context">In "Architecture"</span></p></div></div></div>	</div><!-- .entry-content -->

	<div class="entry-footer">
		<ul class="post-tags light-text"><li>Tagged</li><li><a href="https://herbertograca.com/tag/architecture-2/" rel="tag">architecture</a></li><li><a href="https://herbertograca.com/tag/explicit-architecture/" rel="tag">explicit architecture</a></li><li><a href="https://herbertograca.com/tag/software-architecture/" rel="tag">software architecture</a></li><li><a href="https://herbertograca.com/tag/software-development/" rel="tag">software development</a></li></ul><!-- .post-tags -->	</div><!-- .entry-footer -->

	<div class="entry-author-wrapper">
			<div class="entry-author author-avatar-show">
				<div class="author-avatar">
			<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(1).jpeg" class="avatar avatar-80 grav-hashed grav-hijack" height="80" width="80" id="grav-9e8bab4f1410e0e6e963d83cd848288a-0" originals="80" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=80&amp;d=identicon&amp;r=G" scale="2">		</div><!-- .author-avatar -->
		
		<div class="author-heading">
			<h2 class="author-title">Published by <span class="author-name">hgraca</span></h2>
		</div><!-- .author-heading -->

		<p class="author-bio">
						<a class="author-link" href="https://herbertograca.com/author/hgraca/" rel="author">
				View all posts by hgraca			</a>
		</p><!-- .author-bio -->
	</div><!-- .entry-auhtor -->
		<div class="site-posted-on">
			<strong>Published</strong>
			<time class="entry-date published" datetime="2017-11-16T15:30:54+01:00">November 16, 2017</time><time class="updated" datetime="2019-01-02T23:28:48+01:00">January 2, 2019</time>		</div><!-- .site-posted-on -->
	</div>
</article><!-- #post-## -->

			
	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://herbertograca.com/2017/11/09/service-oriented-architecture-soa/" rel="prev"><span class="meta-nav screen-reader-text">Previous Post</span> Service Oriented Architecture&nbsp;(SOA)</a></div><div class="nav-next"><a href="https://herbertograca.com/2018/03/06/just-created-hgraca-doctrine-test-db-regeneration-bundle/" rel="next"><span class="meta-nav screen-reader-text">Next Post</span> Just created hgraca/doctrine-test-db-regeneration-bundle</a></div></div>
	</nav>
			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			145 thoughts on “<span>DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all&nbsp;together</span>”		</h2><!-- .comments-title -->

		
		<ol class="comment-list">
					<li id="comment-3888" class="comment even thread-even depth-1 parent highlander-comment">
			<article id="div-comment-3888" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture" class="avatar avatar-48" height="48" width="48">						<b class="fn">Dmitriy Sinyavskiy</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3888">
							<time datetime="2019-01-29T09:06:33+01:00">
								January 29, 2019 at 09:06							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello, Herbert.<br>
A question about “Triggering logic in other components” and “Getting data from other components”<br>
What Do you think about to make A Parent component which connects two others components through Input Ports, something like ComponentC(ComponentAContract, ComponentVContract).</p>
<p>For example: RankingCalc (CreditHistory, AccountHistory) – here we want to calc client score to rank him (1 to 100). We use information from CreditHistory and AccountHistory to calculate the total score. So the call looks like RankingCalc.RankClient(clientId, presenter) and the internals do:<br>
c = CreditHistory.GetOverduePaymentsCount(clientId);<br>
b=AccountHistory.GetLastYearAvaerengeBalance(clientId);<br>
score, error = DoSomeCalc (c,b);<br>
if (!error) {<br>
  scoreRepository.save(score);<br>
  presenter.HandleSuccess(score)<br>
} else {<br>
  presenter.HandleError(error)<br>
}</p>
<p id="comment-like-3888" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3888&amp;_wpnonce=fcd46bd7f4" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3888" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3888#respond" data-commentid="3888" data-postid="14874" data-belowelement="div-comment-3888" data-respondelement="respond" aria-label="Reply to Dmitriy Sinyavskiy">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3896" class="comment byuser comment-author-anhchienhoang odd alt depth-2 parent highlander-comment">
			<article id="div-comment-3896" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/6d62d767bc55880b7a96dcfa0e53e293.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-6d62d767bc55880b7a96dcfa0e53e293-0" originals="48" src-orig="https://0.gravatar.com/avatar/6d62d767bc55880b7a96dcfa0e53e293?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Chien Hoang Anh</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3896">
							<time datetime="2019-01-29T09:31:58+01:00">
								January 29, 2019 at 09:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think this communication could be done via a Command Bus or Event Dispatcher.</p>
<p id="comment-like-3896" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3896&amp;_wpnonce=8934a76fc3" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3896" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3896#respond" data-commentid="3896" data-postid="14874" data-belowelement="div-comment-3896" data-respondelement="respond" aria-label="Reply to Chien Hoang Anh">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3949" class="comment even depth-3 highlander-comment">
			<article id="div-comment-3949" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture(1)" class="avatar avatar-48" height="48" width="48">						<b class="fn">Dmitriy Sinyavskiy</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3949">
							<time datetime="2019-01-29T14:47:52+01:00">
								January 29, 2019 at 14:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I would say that my code is not strictly follows the Clean Arch. In Clean Architecture the UseCase(Interactor) is a Command Pattern which must not return values and it must present results calling the presenter injected into UseCase.</p>
<p>Is a component just a set of usecases (AddTodoUseCase, RemoveTodoUseCase, ListTodoUseCase)? If so it should not return value from method call and call a OutputPort method (e.g. presenter).</p>
<p id="comment-like-3949" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3949&amp;_wpnonce=a05a33d1ba" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3949" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3949#respond" data-commentid="3949" data-postid="14874" data-belowelement="div-comment-3949" data-respondelement="respond" aria-label="Reply to Dmitriy Sinyavskiy">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-3227" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-3227" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/fc9709f3af7d61ad2a8c69b733392fb0" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-fc9709f3af7d61ad2a8c69b733392fb0-0" originals="48" src-orig="https://0.gravatar.com/avatar/fc9709f3af7d61ad2a8c69b733392fb0?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Rafał Sawicki</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3227">
							<time datetime="2019-01-26T17:29:37+01:00">
								January 26, 2019 at 17:29							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>One thing that I have hard time figuring out is what is the difference between domain events and application events.</p>
<p>For example, what about a simple event in shopping application like OrderShipped – where does it belong? On one hand, it feels like a domain event which changes order status and belongs to the orders feature. Definitely something I would like to store when using event sourcing, as you suggested for domain events. On the other hand, there might be a lot of different components that need to know when order status changes, so from this perspective it looks more like an application event.</p>
<p>Are application events and domain events sent through the same event bus?</p>
<p>Thank you for this great post by the way, it is very helpful in understanding a hexagonal architecture.</p>
<p id="comment-like-3227" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3227&amp;_wpnonce=fe58f4945a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3227" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3227#respond" data-commentid="3227" data-postid="14874" data-belowelement="div-comment-3227" data-respondelement="respond" aria-label="Reply to Rafał Sawicki">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3237" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-3237" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-1" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3237">
							<time datetime="2019-01-26T18:08:07+01:00">
								January 26, 2019 at 18:08							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, first i need to say this is my personal way of thinking about it, of rationalizing it. I saw this separation of event types in no other place, no guru said it, so it’s worth whatever it’s worth.<br>
And again, theres is no “one boot fits all”.<br>
That said, in your example i would see “OrderShipped” as an application event because its a business case that just happened. This can be used for an event store but might not be ideal cozz it depends on the application logic, so if u want to replay the event to reach the current entity state you will need to replay it with the logic of the application at the moment the event was triggered, which means checking out the correct code version from VCS for each event in the event store.<br>
However, “OrderUpdated” with the specification about what fields of the “Order” entity changed and to what values, that i would see as a Domain event as it is triggered when an entity changes. We don’t know why an entity changed, we just know it changed, and to what. I think this might be ideal for an event store cozz its independent of logic changes.<br>
On another hand, if the current state is wrong cozz there is a bug in the logic, and u want to fix the bug and replay the events to get the correct state… then you will want to have an event store made out of application events…<br>
Its complex stuff, very interesting to think and talk about but also frustrating cozz i don’t have all the answers <img draggable="false" class="emoji" alt="😦" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f626.svg" scale="0"><br>
Most likely it depends on the context, on your project actual needs and on the risks the project owner/lead is willing to accept.<br>
Hope this made it a bit more clear.</p>
<p id="comment-like-3237" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3237&amp;_wpnonce=1afd136cbc" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3237" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3237#respond" data-commentid="3237" data-postid="14874" data-belowelement="div-comment-3237" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3255" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-3255" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/fc9709f3af7d61ad2a8c69b733392fb0" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-fc9709f3af7d61ad2a8c69b733392fb0-1" originals="48" src-orig="https://0.gravatar.com/avatar/fc9709f3af7d61ad2a8c69b733392fb0?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Rafał Sawicki</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3255">
							<time datetime="2019-01-26T19:46:44+01:00">
								January 26, 2019 at 19:46							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>It is definitely more clear now which type of event is what, so thank you for taking time to respond.</p>
<p>However, with your definition I would argue that application events makes much more sense to be used with event sourcing than domain events <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"> . I’ve often read that when doing event sourcing, it’s better to store a business events instead of a entity field changes and I can agree with that. For auditing purposes (which ES seems to be a good fit for) we very much want to know what happened and not just which fields have changed.</p>
<p>I also think that storing application events is more resilient to code changes – what if some entity field used to be a boolean flag and now we want to store it as an enum. With events that contain specific field changes, we have to create a new version of the event and either handle old version in our code, or migrate existing events. With application events, since we don’t store any specific entity fields, we can just change the “Apply” logic, throw away existing read model, and recreate it from scratch using the event stream.</p>
<p>Now that I think about it (if I understood correctly), what you call application events is very similar to what Greg Young call domain events, so expect more confusion to come <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"> – <a href="http://codebetter.com/gregyoung/2010/04/11/what-is-a-domain-event/" rel="nofollow">http://codebetter.com/gregyoung/2010/04/11/what-is-a-domain-event/</a></p>
<p id="comment-like-3255" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3255&amp;_wpnonce=cc7856c616" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3255" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3255#respond" data-commentid="3255" data-postid="14874" data-belowelement="div-comment-3255" data-respondelement="respond" aria-label="Reply to Rafał Sawicki">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3258" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-3258" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-2" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3258">
							<time datetime="2019-01-26T19:52:11+01:00">
								January 26, 2019 at 19:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, i dont agree with your data type and format reasoning cozz these events showld be stored in a schemaless data store like mongodb or kafka.<br>
However, i can agree with everything else you said.<br>
<img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-3258" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3258&amp;_wpnonce=53847322b9" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3258" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3258#respond" data-commentid="3258" data-postid="14874" data-belowelement="div-comment-3258" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-2888" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-2888" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/lSSSET1I_normal.jpg" class="avatar avatar-48" height="48" width="48" srcset="https://i2.wp.com/pbs.twimg.com/profile_images/881759418790027264/lSSSET1I_normal.jpg?resize=48%2C48&amp;zoom=2 2x" scale="2">						<b class="fn"><a href="http://twitter.com/iamcroos" rel="external nofollow" class="url">Nilukshan Croos (@iamcroos)</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2888">
							<time datetime="2019-01-23T07:36:01+01:00">
								January 23, 2019 at 07:36							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Wow! I have got a great experience from this article. Can Anyone please compare this with Microservices architecture?</p>
<p id="comment-like-2888" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2888&amp;_wpnonce=dcdee30b5d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2888" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2888#respond" data-commentid="2888" data-postid="14874" data-belowelement="div-comment-2888" data-respondelement="respond" aria-label="Reply to Nilukshan Croos (@iamcroos)">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3238" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-3238" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-3" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3238">
							<time datetime="2019-01-26T18:10:39+01:00">
								January 26, 2019 at 18:10							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>This is about separating your application by components, which are domain wise modules of the application, the DDD bounded contexts.<br>
It is exactly the same goal when we have microservices. Each microservice represents a bounded context.</p>
<p id="comment-like-3238" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3238&amp;_wpnonce=f6c6f922f6" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3238" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3238#respond" data-commentid="3238" data-postid="14874" data-belowelement="div-comment-3238" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-2849" class="comment byuser comment-author-jijiechen odd alt thread-odd thread-alt depth-1 highlander-comment">
			<article id="div-comment-2849" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/df46e3fbdfdac5daf45656e9963717d4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-df46e3fbdfdac5daf45656e9963717d4-0" originals="48" src-orig="https://1.gravatar.com/avatar/df46e3fbdfdac5daf45656e9963717d4?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://jijiechen.wordpress.com/" rel="external nofollow" class="url">jijiechen</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2849">
							<time datetime="2019-01-17T08:48:16+01:00">
								January 17, 2019 at 08:48							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Very good reading, thank you!</p>
<p id="comment-like-2849" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2849&amp;_wpnonce=211a2291ce" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2849" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2849#respond" data-commentid="2849" data-postid="14874" data-belowelement="div-comment-2849" data-respondelement="respond" aria-label="Reply to jijiechen">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-2800" class="comment even thread-even depth-1 parent highlander-comment">
			<article id="div-comment-2800" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/413d3e96501851a41a5f788496fac298" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-413d3e96501851a41a5f788496fac298-0" originals="48" src-orig="https://1.gravatar.com/avatar/413d3e96501851a41a5f788496fac298?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Jason Johansson</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2800">
							<time datetime="2019-01-12T11:45:10+01:00">
								January 12, 2019 at 11:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>First of all thank you for a very interesting article, I just wish I had the knowledge gained from it a couple of years back ;)!</p>
<p>I have a question regarding driven ports and the domain model, I have tried designing the ports (interfaces(I’m using C#)) to not depend on the domain model but not sure this is correct?</p>
<p>I have tried to follow your advise on package by component so I have Component projects that depend on the Port project which makes it impossible for the interfaces defined in the Ports project to have references to any of the  Component projects (cyclic dependency).</p>
<p>I got into trouble when a use case like “Send X to a external actor” where X is a class defined in the domain model. I could define the port(interface in C#) to be “void Send(X x);” but that would give me a cyclic dependency (Port depend on ComponentX and ComponentX depend on Port).</p>
<p>Another way to solve this is to define the port the same way I have solved Persistance Port “void Send(Y y);”. Here Y is something defined in SharedKernel and all domain models has Y as base class. What I don’t like about this solution is that the Send Port gets way to generic when it’s not supposed to do anything else then Send(x)..</p>
<p>A third way to solve this is to move this Port definition into ComponentX but that would (as I have understood it) break Package by Component idea…</p>
<p>Any thoughts on this is highly appreciated!</p>
<p id="comment-like-2800" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2800&amp;_wpnonce=ab92303a3a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2800" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2800#respond" data-commentid="2800" data-postid="14874" data-belowelement="div-comment-2800" data-respondelement="respond" aria-label="Reply to Jason Johansson">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3242" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-3242" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-4" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3242">
							<time datetime="2019-01-26T18:23:51+01:00">
								January 26, 2019 at 18:23							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, sorry for the late reply.<br>
The Ports should reflect what your application core needs, but they should indeed not depend on the application core, and they should be usable by any component.<br>
Since the ports are specific to the application core, they should be in the same repo, you shouldn’t try to reuse them in different projects, although i do understant why it is appealing to do so.<br>
The components can depend on the port, that is how it should be. But neither the components not the ports should depend on adapters. In your example  “void Send(X x);” maybe you should not depend on that X object but instead depend on an interface (from the shared kernel) or finer grained data.<br>
Indeed i would avoid breaking package by component.<br>
Hope thus helped, and again i apologize for taking so long to reply.</p>
<p id="comment-like-3242" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3242&amp;_wpnonce=3de69b4c0f" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3242" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3242#respond" data-commentid="3242" data-postid="14874" data-belowelement="div-comment-3242" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-3433" class="comment even depth-3 highlander-comment">
			<article id="div-comment-3433" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/413d3e96501851a41a5f788496fac298" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-413d3e96501851a41a5f788496fac298-1" originals="48" src-orig="https://1.gravatar.com/avatar/413d3e96501851a41a5f788496fac298?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Jason Johansson</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-3433">
							<time datetime="2019-01-27T13:14:26+01:00">
								January 27, 2019 at 13:14							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Firstl of all, NO need to apologize for taking your time to respond I am very great full that you take the time to reason with me on this topic!</p>
<p>Your answer is spot on and your suggested solution is about the same as what I did with the persistence port just never realized I could (of course) design some interface in the shared kernel specific for this port… Thank you for showing me the light <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>About sharing ports, I totally agree with you and that was never my intention. Just wanted to organize the code in a way to “protect” the intended architecture (making it harder to break the hexagon pattern).</p>
<p>The code is available here if anyone are interested in a C# implementation of this article (of course there can be many other possible solutions in C#, this is how I put it together and its work in progress): <a href="https://github.com/ForsetiSWE/VF" rel="nofollow">https://github.com/ForsetiSWE/VF</a></p>
<p id="comment-like-3433" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=3433&amp;_wpnonce=827d14f972" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-3433" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=3433#respond" data-commentid="3433" data-postid="14874" data-belowelement="div-comment-3433" data-respondelement="respond" aria-label="Reply to Jason Johansson">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-2443" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-2443" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/a9280e4178702a3501e77a6d2d9af721" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-a9280e4178702a3501e77a6d2d9af721-0" originals="48" src-orig="https://1.gravatar.com/avatar/a9280e4178702a3501e77a6d2d9af721?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://www.oda.gr/" rel="external nofollow" class="url">ALEXANDER XANTHOUDAKIS</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2443">
							<time datetime="2018-12-03T22:14:34+01:00">
								December 3, 2018 at 22:14							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I have a system build with the Hexagon architecture (Ports and adapters). My system’s overall implementation is fine thought i am having trouble when trying to initiate two Adapters for the same port and inject them (via DI) in my use case to execute. My goal is this: the Hexagon defines a Port via an Interface IBoarding that adapters (Application adapters) implement in order for my use case to be able to communicate with two other different applications. But there is no way to Register the 2 adapters on a container ( i.e simple injector ) and find a way to inject either both when i want my use case to write to both other apps or only one of them when i want to write only to one app. Any help appreciated!!</p>
<p id="comment-like-2443" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2443&amp;_wpnonce=be9a7c00d6" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2443" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2443#respond" data-commentid="2443" data-postid="14874" data-belowelement="div-comment-2443" data-respondelement="respond" aria-label="Reply to ALEXANDER XANTHOUDAKIS">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2444" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-2444" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-5" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2444">
							<time datetime="2018-12-03T22:52:14+01:00">
								December 3, 2018 at 22:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,<br>
I would always inject them both, maybe lazy loaded, and use a strategy pattern to decide what to do at runtime.</p>
<p id="comment-like-2444" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2444&amp;_wpnonce=a6d408da8c" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2444" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2444#respond" data-commentid="2444" data-postid="14874" data-belowelement="div-comment-2444" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2445" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-2445" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/a9280e4178702a3501e77a6d2d9af721" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-a9280e4178702a3501e77a6d2d9af721-1" originals="48" src-orig="https://1.gravatar.com/avatar/a9280e4178702a3501e77a6d2d9af721?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://www.oda.gr/" rel="external nofollow" class="url">ALEXANDER XANTHOUDAKIS</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2445">
							<time datetime="2018-12-03T23:15:07+01:00">
								December 3, 2018 at 23:15							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you for you answer!! Since they implement the same Interface i am registering them as a Collection in the DI container so in the use case constructor i have BoardUseCase(IEnumerable boardingadapters) ….and inside the use case i was iterating via all adapters executing the action to be performed. Any suggestions on where and how to use the strategy pattern?? Thanks in advance!</p>
<p id="comment-like-2445" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2445&amp;_wpnonce=8f8778642e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2445" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2445#respond" data-commentid="2445" data-postid="14874" data-belowelement="div-comment-2445" data-respondelement="respond" aria-label="Reply to ALEXANDER XANTHOUDAKIS">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2446" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-2446" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-6" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2446">
							<time datetime="2018-12-03T23:31:04+01:00">
								December 3, 2018 at 23:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>In each iteration you can check conditions to decide if that adapter should be used.</p>
<p id="comment-like-2446" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2446&amp;_wpnonce=3fde3616d4" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2446" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2446#respond" data-commentid="2446" data-postid="14874" data-belowelement="div-comment-2446" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-2363" class="comment odd alt thread-even depth-1 highlander-comment">
			<article id="div-comment-2363" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture(2)" class="avatar avatar-48" height="48" width="48">						<b class="fn">Dan Boris</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2363">
							<time datetime="2018-11-20T21:09:20+01:00">
								November 20, 2018 at 21:09							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto,<br>
I was thinking about @Dmitry comment above about how authorisation in a business rule context should be handled and how can this be implemented in a meaningful way. So to give an example, stackoverflow has some rules that force user to be first of all authenticated, have an active user account and to have at least 15 points to comment, 50 to answer a question, loose a point if you downvote, etc.</p>
<p>I would say that Authentication should be treated as a tool, of course, and that some resources should be prevented from being accessed if you are not authenticated/authorised (ex: user account) and can be configured from the firewall.</p>
<p>Most people do these Business Authorisation checks at the Command Handler itself or have an Application Service that will check whilst doing the rest of the action. This means that we are checking if a user is allowed to comment in the same place we are “posting a comment” or some other action.</p>
<p>I think business authorisation should be done using the Specification pattern : <a href="https://en.wikipedia.org/wiki/Specification_pattern" rel="nofollow">https://en.wikipedia.org/wiki/Specification_pattern</a> so we could have single reusable complex authorisation rules before activating a specific logic so that we could check that user have posting permission</p>
<p>This means that not only business authorisation logic is on a Domain Service separated from the use case, but this can be reused within other use cases that could implemented same fucntionality. You actually talk about this here : “However, sometimes we encounter some domain logic that involves different entities, of the same type or not, and we feel that that domain logic does not belong in the entities themselves, we feel that that logic is not their direct responsibility.”</p>
<p>I would love to hear your opinion on this matter <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"> and perhaps a better way of handling such logic</p>
<p id="comment-like-2363" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2363&amp;_wpnonce=450b045e82" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2363" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2363#respond" data-commentid="2363" data-postid="14874" data-belowelement="div-comment-2363" data-respondelement="respond" aria-label="Reply to Dan Boris">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-2240" class="comment even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-2240" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture(3)" class="avatar avatar-48" height="48" width="48">						<b class="fn">Evgeny Pekerman</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2240">
							<time datetime="2018-10-31T11:50:55+01:00">
								October 31, 2018 at 11:50							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello Herberto,<br>
Great article and juniors should learn from it)) I’m software architect and I have found so many common approaches that I have used in my projects. At the end of the day all those successful architectures for big/enterprise solutions look almost the same as you described on your diagram. There is no silver bullet and people come to that kind of  Explicit Architecture which is clean, extendable and scalable.<br>
Herberto, I would love to use that extremely beautiful drawings pattern in lectures for my students. If it is possible, can you please share it with us(your subscribers)?</p>
<p id="comment-like-2240" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2240&amp;_wpnonce=f328ead9e0" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2240" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2240#respond" data-commentid="2240" data-postid="14874" data-belowelement="div-comment-2240" data-respondelement="respond" aria-label="Reply to Evgeny Pekerman">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2241" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-2241" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-7" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2241">
							<time datetime="2018-10-31T12:07:58+01:00">
								October 31, 2018 at 12:07							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Tkx.<br>
Be my guest, the final image links to a google draw document, but here’s the link anyway: <a href="https://docs.google.com/drawings/d/1E_hx5B4czRVFVhGJbrbPDlb_JFxJC8fYB86OMzZuAhg/edit?usp=drive_open&amp;ouid=114834316208200522715" rel="nofollow">https://docs.google.com/drawings/d/1E_hx5B4czRVFVhGJbrbPDlb_JFxJC8fYB86OMzZuAhg/edit?usp=drive_open&amp;ouid=114834316208200522715</a></p>
<p id="comment-like-2241" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2241&amp;_wpnonce=6f4fe52aac" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2241" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2241#respond" data-commentid="2241" data-postid="14874" data-belowelement="div-comment-2241" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2242" class="comment even depth-3 highlander-comment">
			<article id="div-comment-2242" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture(4)" class="avatar avatar-48" height="48" width="48">						<b class="fn">Evgeny Pekerman</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2242">
							<time datetime="2018-10-31T12:24:45+01:00">
								October 31, 2018 at 12:24							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Appreciate it!</p>
<p id="comment-like-2242" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2242&amp;_wpnonce=3445ded176" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2242" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2242#respond" data-commentid="2242" data-postid="14874" data-belowelement="div-comment-2242" data-respondelement="respond" aria-label="Reply to Evgeny Pekerman">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1962" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-1962" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/picture(5)" class="avatar avatar-48" height="48" width="48">						<b class="fn">Michał Kalkowski</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1962">
							<time datetime="2018-09-25T08:40:12+01:00">
								September 25, 2018 at 08:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,<br>
great article! I have a question. All of your query you put to query bus? Some of people use finders to get results from DB and not put them to the query bus. Finders are injected directly to the controller/command handler or other where do you need results.<br>
Regards</p>
<p id="comment-like-1962" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1962&amp;_wpnonce=e8e41beceb" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1962" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1962#respond" data-commentid="1962" data-postid="14874" data-belowelement="div-comment-1962" data-respondelement="respond" aria-label="Reply to Michał Kalkowski">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1963" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-1963" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-8" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1963">
							<time datetime="2018-09-25T09:17:24+01:00">
								September 25, 2018 at 09:17							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx.<br>
It depends on your needs, and human &amp; technical resources.<br>
The requirements drive the architecture.</p>
<p>So, having query objects and/or repositories is perfectly valid. I dont know exactly what you mean by finders but i suppose u refer to one of those.</p>
<p>However, if you have a query bus, i would stick to it, so theres ony one way of doing that in the codebase. It makes it consistent, easier to understand and change.</p>
<p id="comment-like-1963" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1963&amp;_wpnonce=cdbf1d7120" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1963" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1963#respond" data-commentid="1963" data-postid="14874" data-belowelement="div-comment-1963" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2063" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-2063" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/6d62d767bc55880b7a96dcfa0e53e293.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-6d62d767bc55880b7a96dcfa0e53e293-1" originals="48" src-orig="https://0.gravatar.com/avatar/6d62d767bc55880b7a96dcfa0e53e293?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Alex Hoang</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2063">
							<time datetime="2018-10-09T10:37:30+01:00">
								October 9, 2018 at 10:37							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think he means “the repository for querying”.</p>
<p id="comment-like-2063" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2063&amp;_wpnonce=e7c642b05e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2063" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2063#respond" data-commentid="2063" data-postid="14874" data-belowelement="div-comment-2063" data-respondelement="respond" aria-label="Reply to Alex Hoang">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1896" class="comment byuser comment-author-tuannguyenssu even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-1896" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9870c9d707803b6f160c30973d08b4f4" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9870c9d707803b6f160c30973d08b4f4-0" originals="48" src-orig="https://0.gravatar.com/avatar/9870c9d707803b6f160c30973d08b4f4?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://tuannguyenssu.wordpress.com/" rel="external nofollow" class="url">nguyenvantuan</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1896">
							<time datetime="2018-09-13T08:51:27+01:00">
								September 13, 2018 at 08:51							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Reblogged this on <a href="https://tuannguyenssu.wordpress.com/2018/09/13/ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/" rel="nofollow">Nguyen Van Tuan</a>.</p>
<p id="comment-like-1896" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1896&amp;_wpnonce=1b0cd47c7a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1896" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1896#respond" data-commentid="1896" data-postid="14874" data-belowelement="div-comment-1896" data-respondelement="respond" aria-label="Reply to nguyenvantuan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2086" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 highlander-comment">
			<article id="div-comment-2086" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-9" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2086">
							<time datetime="2018-10-10T21:13:50+01:00">
								October 10, 2018 at 21:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>hey, I’m finally taking care of my blog again, and saw your comment but it seems your link is broken… <img draggable="false" class="emoji" alt="😦" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f626.svg" scale="0"></p>
<p id="comment-like-2086" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2086&amp;_wpnonce=40b1bef6f9" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2086" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2086#respond" data-commentid="2086" data-postid="14874" data-belowelement="div-comment-2086" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1792" class="pingback even thread-even depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://edwardthienhoang.wordpress.com/2018/08/24/ket-hop-cac-mau-kien-truc-pattern-vao-trong-mot-ddd-hexagonal-onion-clean-cqrs/" rel="external nofollow" class="url">Kết hợp các mẫu kiến trúc / pattern vào trong một (DDD, Hexagonal, Onion, Clean, CQRS, …) – Java Việt Nam</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-1643" class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://herbertograca.com/2018/07/07/more-than-concentric-layers/" rel="external nofollow" class="url">More than concentric layers – @herbertograca</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-1618" class="comment even thread-even depth-1 parent highlander-comment">
			<article id="div-comment-1618" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/e5a5dae1ed16a5d7dd8b1cc811d01672" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-e5a5dae1ed16a5d7dd8b1cc811d01672-0" originals="48" src-orig="https://2.gravatar.com/avatar/e5a5dae1ed16a5d7dd8b1cc811d01672?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">wsz</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1618">
							<time datetime="2018-07-11T01:30:38+01:00">
								July 11, 2018 at 01:30							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto,</p>
<p>I consider your articles and the Dev Curricula one of the best resources about Software Architecture I have ever seen on the Internet. It had a big impact on my development as a software developer.<br>
One thing is still hard to grasp for me. How would you divide your application into components when some part of domain is shared. For example you may have a domain model for Employee that is required both in accounting (sum up salaries for monthly balance) and human resources module (request a leave process). Should I place such part in the Shared Kernel or maybe a rule of thumb is to put two things into one component if they have anything in common on the domain level? Am I missing something?</p>
<p>Regards,<br>
Wojtek</p>
<p id="comment-like-1618" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1618&amp;_wpnonce=230f9c3921" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1618" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1618#respond" data-commentid="1618" data-postid="14874" data-belowelement="div-comment-1618" data-respondelement="respond" aria-label="Reply to wsz">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1619" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-1619" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-10" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1619">
							<time datetime="2018-07-11T08:00:06+01:00">
								July 11, 2018 at 08:00							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi!<br>
Tkx, glad u liked it. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Regarding your question, it depends (cliché answer, I know <img draggable="false" class="emoji" alt="😬" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f62c.svg" scale="0">). There can be several reasons for that to be happening.<br>
Most often what I see is that not the whole component needs to be shared, or just the data needs to be shared.</p>
<p>Using your example, I can imagine that Accounting doesn’t need the Employee name nor other data, just its ID, so I would put the Employee ID in the shared kernel and use the Employee ID in both components/bounded contexts (BC).</p>
<p>However, I can imagine that the HR module needs the Employee name, date of birth, etc., so I could do 2 things:</p>
<p>Keep 2 separated BCs, where the Employee BC contains the entities and services with the logic that changes the employee data, and in the HR BC uses query objects to get the raw data it needs (but not entities with business logic).<br>
Merge Employee and HR modules in one BC, so that the HR logic can access the Employee entity(s) and business logic.</p>
<p>For me, it usually helps to ask myself “how would I do it if instead of a monolith I would have a micro-service ecosystem?”.</p>
<p>Hope this helped.</p>
<p id="comment-like-1619" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1619&amp;_wpnonce=c15d5a9027" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1619" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1619#respond" data-commentid="1619" data-postid="14874" data-belowelement="div-comment-1619" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2064" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-2064" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/6d62d767bc55880b7a96dcfa0e53e293.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-6d62d767bc55880b7a96dcfa0e53e293-2" originals="48" src-orig="https://0.gravatar.com/avatar/6d62d767bc55880b7a96dcfa0e53e293?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Alex Hoang</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2064">
							<time datetime="2018-10-09T11:01:04+01:00">
								October 9, 2018 at 11:01							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>“in the HR BC uses query objects to get the raw data it needs” Do you mean using API to fetch the data from the Employee BC?</p>
<p id="comment-like-2064" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2064&amp;_wpnonce=923822f0a2" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2064" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2064#respond" data-commentid="2064" data-postid="14874" data-belowelement="div-comment-2064" data-respondelement="respond" aria-label="Reply to Alex Hoang">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2091" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 parent highlander-comment">
			<article id="div-comment-2091" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-11" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2091">
							<time datetime="2018-10-10T21:47:32+01:00">
								October 10, 2018 at 21:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>No, if it’s a monolith so we don’t need to use an API.</p>
<p>I see repositories as classes similar to collections, which return objects from persistence.<br>
I see query objects as objects with a single method containing a (SQL) query which returns an array of data.</p>
<p>Entities are used to read and write data, but an array of data is only useful for reading purposes, ie showing data to the users.</p>
<p>An entity belongs only to one component, and only that component can instantiate it, and therefore tell it to do something that changes its data.</p>
<p>So if in component A we need data from component B, we can not a repository to get entities from B cozz they belong only to B, but we can use a query object belonging to A in order to get raw data that belongs to B.</p>
<p>This is more/less what we would do if we would have a microservice, with the difference that in a monolith we have only one DB while in microservices we have separate DBs with events coming in from other microservices to update the local data copies that belong to those microservices.</p>
<p>I hope I didn’t confuse you even more… <img draggable="false" class="emoji" alt="😀" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f600.svg" scale="0"></p>
<p id="comment-like-2091" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2091&amp;_wpnonce=190674e8d5" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2091" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2091#respond" data-commentid="2091" data-postid="14874" data-belowelement="div-comment-2091" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2150" class="comment even depth-5 highlander-comment">
			<article id="div-comment-2150" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/6d62d767bc55880b7a96dcfa0e53e293.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-6d62d767bc55880b7a96dcfa0e53e293-3" originals="48" src-orig="https://0.gravatar.com/avatar/6d62d767bc55880b7a96dcfa0e53e293?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Alex Hoang</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2150">
							<time datetime="2018-10-17T09:40:52+01:00">
								October 17, 2018 at 09:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I see. Thanks for your explanation. I’m trying to implement CQRS-ES within DDD approach on top of Symfony 4 here <a href="https://github.com/anhchienhoang/sf4-cqrs-es-demo" rel="nofollow">https://github.com/anhchienhoang/sf4-cqrs-es-demo</a>. Please give some comments if you have time.</p>
<p id="comment-like-2150" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2150&amp;_wpnonce=b9e04eb6d2" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2150" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2150#respond" data-commentid="2150" data-postid="14874" data-belowelement="div-comment-2150" data-respondelement="respond" aria-label="Reply to Alex Hoang">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1575" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-1575" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/c3289eff870aa46eee70124f43d8129f" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-c3289eff870aa46eee70124f43d8129f-0" originals="48" src-orig="https://0.gravatar.com/avatar/c3289eff870aa46eee70124f43d8129f?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Stronger</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1575">
							<time datetime="2018-06-20T07:12:55+01:00">
								June 20, 2018 at 07:12							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello, what software are you using to draw such as diagrams ?</p>
<p id="comment-like-1575" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1575&amp;_wpnonce=93bbc47c3d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1575" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1575#respond" data-commentid="1575" data-postid="14874" data-belowelement="div-comment-1575" data-respondelement="respond" aria-label="Reply to Stronger">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1576" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-1576" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-12" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1576">
							<time datetime="2018-06-20T07:16:08+01:00">
								June 20, 2018 at 07:16							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, i use Google Draw.</p>
<p id="comment-like-1576" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1576&amp;_wpnonce=2e0a3e290f" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1576" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1576#respond" data-commentid="1576" data-postid="14874" data-belowelement="div-comment-1576" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1577" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-1577" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/c3289eff870aa46eee70124f43d8129f" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-c3289eff870aa46eee70124f43d8129f-1" originals="48" src-orig="https://0.gravatar.com/avatar/c3289eff870aa46eee70124f43d8129f?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Stronger</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1577">
							<time datetime="2018-06-20T07:18:32+01:00">
								June 20, 2018 at 07:18							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you</p>
<p id="comment-like-1577" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1577&amp;_wpnonce=8b6b78d4ec" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1577" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1577#respond" data-commentid="1577" data-postid="14874" data-belowelement="div-comment-1577" data-respondelement="respond" aria-label="Reply to Stronger">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1371" class="pingback even thread-even depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://www.geoffmazeroff.com/2018/05/07/professional-development-2018-week-18/" rel="external nofollow" class="url">Professional Development – 2018 – Week 18 – Geoff Mazeroff</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-1354" class="comment byuser comment-author-baoduy2412 odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-1354" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/c1b360ef601551a98ff92bfae42dad28.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-c1b360ef601551a98ff92bfae42dad28-0" originals="48" src-orig="https://0.gravatar.com/avatar/c1b360ef601551a98ff92bfae42dad28?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://drunkcoding.net/" rel="external nofollow" class="url">baoduy2412</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1354">
							<time datetime="2018-05-02T17:45:54+01:00">
								May 2, 2018 at 17:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I really love this articles. But need time to understand all. Is there any recommend books or course should i take for this?</p>
<p id="comment-like-1354" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1354&amp;_wpnonce=c1a34167f2" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1354" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1354#respond" data-commentid="1354" data-postid="14874" data-belowelement="div-comment-1354" data-respondelement="respond" aria-label="Reply to baoduy2412">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1356" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-1356" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-13" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1356">
							<time datetime="2018-05-03T09:20:15+01:00">
								May 3, 2018 at 09:20							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx.</p>
<p>I don’t know about courses, I heard there are some teaching platforms like coursera, that have good online courses but I can’t say by my own experience.<br>
But you can have a look to the list of articles, talks and books I’ve been compiling: <a href="https://herbertograca.com/dev-theory-articles-listing/" rel="nofollow">https://herbertograca.com/dev-theory-articles-listing/</a></p>
<p id="comment-like-1356" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1356&amp;_wpnonce=43c9681e4c" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1356" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1356#respond" data-commentid="1356" data-postid="14874" data-belowelement="div-comment-1356" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1347" class="pingback odd alt thread-even depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="http://blog.thesoftwarementor.com/2018/04/30/professional-development-4-23-2018-4-29-2018/" rel="external nofollow" class="url">Professional Development 4/23/2018 – 4/29/2018 – The Software Mentor</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-1278" class="comment byuser comment-author-javaconferences even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-1278" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/2ecec54a40e56e69a2d4e47efd79de81" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-2ecec54a40e56e69a2d4e47efd79de81-0" originals="48" src-orig="https://2.gravatar.com/avatar/2ecec54a40e56e69a2d4e47efd79de81?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Kamil Wykop</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1278">
							<time datetime="2018-04-13T18:55:32+01:00">
								April 13, 2018 at 18:55							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi I have question. What do you think about this approach:</p>
<div class="jetpack-video-wrapper"><span class="embed-youtube" style="text-align:center; display: block;"><iframe class="youtube-player" type="text/html" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/sND1AR7Q_T0.html" allowfullscreen="true" style="border: 0px; display: block; margin: 0px; width: 710px; height: 399.536px;" data-ratio="0.5627272727272727" data-width="1100" data-height="619"></iframe></span></div>
<p>Do you know why the default scope in Java is package-private? Because that’s what designers thought should be the most popular scope. Is that the scope you most often see? Probably not. Somehow Java devs became crazy communists-capitalists, recognising only private and public access, and preferring public everywhere. And so our projects look like a lawn right after snow melts: full of shit laying in public. Hard to put into your head. Hard to reason about. Entanglement instead of encapsulation. People even register every possible class in an IoC container, because FU (nctional) programming, that’s why. You wanna find something in my code? Google it. Or how about inheritance? James Gosling asked in 2001 about what he would do differently if he had a chance to recreate Java, said he would probably remove class inheritance. We are in 2016, having lambdas, defaults on interfaces, AOP and other tricks, but young developers still prefer to just add another abstract class to your code. Gonna be fun navigating those seven layers of hell when you read it. Ok, maybe it’s not THAT bad, but it’s not much better either. The problem, of course, is that we all start with tutorials, which cut corners for brevity. And we don’t pay attention to those small problems till they hit us hard. Let’s see how we can make our situation a little bit better, using Domain Driven Design, package-private scope, sensible packaging structure, and CQRS on microservices. Because it is actually easier than not doing it. Real life project examples included.</p>
<p id="comment-like-1278" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1278&amp;_wpnonce=8de5ac86c1" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1278" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1278#respond" data-commentid="1278" data-postid="14874" data-belowelement="div-comment-1278" data-respondelement="respond" aria-label="Reply to Kamil Wykop">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1286" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 highlander-comment">
			<article id="div-comment-1286" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-14" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1286">
							<time datetime="2018-04-15T14:17:51+01:00">
								April 15, 2018 at 14:17							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx for your comment!</p>
<p>Yes, I agree with you!<br>
We have languages designed with privates, protected, publics, finals, abstracts… so that we can express intentionality in our code, so that our code is not used in the wrong way. We should use those artifacts a lot more than we do.</p>
<p>Maybe because of the nature of our industry where we have an ever growing number of developers, most developers are in the learning stage and most of us keep doing the same mistakes over and over…</p>
<p>Package level modifiers make total sense to me, for the same reason it makes sense to use class level modifiers. We should be able to clearly and objectively, without any ambiguity, define a package interface: the methods that other packages are supposed to use in order to interact with a package.</p>
<p>I don’t know how many languages have this feature, I just know JAVA does, although still limited, and PHP doesn’t. In PHP I end up organising the package structure with the classes that are supposed to be used outside the package in its root.</p>
<p>I also remember reading somewhere that JAVA might get improvements on its package level modifiers, but didn’t read anything about it recently…</p>
<p id="comment-like-1286" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1286&amp;_wpnonce=84d5a0b65e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1286" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1286#respond" data-commentid="1286" data-postid="14874" data-belowelement="div-comment-1286" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1243" class="comment even thread-even depth-1 parent highlander-comment">
			<article id="div-comment-1243" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/a9280e4178702a3501e77a6d2d9af721" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-a9280e4178702a3501e77a6d2d9af721-2" originals="48" src-orig="https://1.gravatar.com/avatar/a9280e4178702a3501e77a6d2d9af721?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://www.oda.gr/" rel="external nofollow" class="url">ALEXANDER XANTHOUDAKIS</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1243">
							<time datetime="2018-04-04T22:20:01+01:00">
								April 4, 2018 at 22:20							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Great article!! Do you have any link to a good code sample in C# implementing the architecture!! Thanks in advance!</p>
<p id="comment-like-1243" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1243&amp;_wpnonce=092f307284" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1243" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1243#respond" data-commentid="1243" data-postid="14874" data-belowelement="div-comment-1243" data-respondelement="respond" aria-label="Reply to ALEXANDER XANTHOUDAKIS">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1244" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-1244" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-15" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1244">
							<time datetime="2018-04-04T22:23:33+01:00">
								April 4, 2018 at 22:23							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Tkx!<br>
Unfortunately not. However, I am currently working on a PHP implementation. I will write a post about it once I have it finished.<br>
I hope sometime in this quarter, although I also need to dive into kubernetes…</p>
<p id="comment-like-1244" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1244&amp;_wpnonce=7ed5e7055a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1244" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1244#respond" data-commentid="1244" data-postid="14874" data-belowelement="div-comment-1244" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1258" class="comment byuser comment-author-codescribler even depth-3 parent highlander-comment">
			<article id="div-comment-1258" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/763b518f6efac381ec3e6c1622c3ebe6.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-763b518f6efac381ec3e6c1622c3ebe6-0" originals="48" src-orig="https://1.gravatar.com/avatar/763b518f6efac381ec3e6c1622c3ebe6?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">codescribler</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1258">
							<time datetime="2018-04-09T16:45:20+01:00">
								April 9, 2018 at 16:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Have a look at <a href="http://danielwhittaker.me/" rel="nofollow">http://danielwhittaker.me</a>. It’s all about CQRS ES and example code is in c#.</p>
<p id="comment-like-1258" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1258&amp;_wpnonce=79ad04a635" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1258" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1258#respond" data-commentid="1258" data-postid="14874" data-belowelement="div-comment-1258" data-respondelement="respond" aria-label="Reply to codescribler">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1259" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-1259" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-16" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1259">
							<time datetime="2018-04-09T17:02:26+01:00">
								April 9, 2018 at 17:02							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>cool! Will take a look <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"><br>
tkx!</p>
<p id="comment-like-1259" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1259&amp;_wpnonce=85fb6a946e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1259" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1259#respond" data-commentid="1259" data-postid="14874" data-belowelement="div-comment-1259" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1322" class="comment even depth-2 highlander-comment">
			<article id="div-comment-1322" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/26bfe61462ae617ed39b3d9c83197324" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-26bfe61462ae617ed39b3d9c83197324-0" originals="48" src-orig="https://2.gravatar.com/avatar/26bfe61462ae617ed39b3d9c83197324?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">lgclrd</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1322">
							<time datetime="2018-04-23T15:26:40+01:00">
								April 23, 2018 at 15:26							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>A simple example of clean architecture based on C# is found here:</p>
<p><a href="https://fullstackmark.com/post/11/better-software-design-with-clean-architecture" rel="nofollow">https://fullstackmark.com/post/11/better-software-design-with-clean-architecture</a></p>
<p id="comment-like-1322" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1322&amp;_wpnonce=9d33145863" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1322" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1322#respond" data-commentid="1322" data-postid="14874" data-belowelement="div-comment-1322" data-respondelement="respond" aria-label="Reply to lgclrd">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1219" class="comment byuser comment-author-xiemeilong odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-1219" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/82620b7b781a2b4246fc4bc1c839018d" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-82620b7b781a2b4246fc4bc1c839018d-0" originals="48" src-orig="https://2.gravatar.com/avatar/82620b7b781a2b4246fc4bc1c839018d?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://gravatar.com/xiemeilong" rel="external nofollow" class="url">xiemeilong</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1219">
							<time datetime="2018-03-28T07:23:59+01:00">
								March 28, 2018 at 07:23							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>How do you name Query(DTO) and Query(Handler)? xxxQueryDTO and xxxQueryHandler ?</p>
<p id="comment-like-1219" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1219&amp;_wpnonce=ab9474fc95" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1219" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1219#respond" data-commentid="1219" data-postid="14874" data-belowelement="div-comment-1219" data-respondelement="respond" aria-label="Reply to xiemeilong">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1220" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-1220" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-17" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1220">
							<time datetime="2018-03-28T08:40:08+01:00">
								March 28, 2018 at 08:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,</p>
<p>I would name it xxxQuery and xxxQueryHandler.</p>
<p id="comment-like-1220" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1220&amp;_wpnonce=e385ba95f0" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1220" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1220#respond" data-commentid="1220" data-postid="14874" data-belowelement="div-comment-1220" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1100" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-1100" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/45a7cf4202fd46e398a832cf3547d718" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-45a7cf4202fd46e398a832cf3547d718-0" originals="48" src-orig="https://1.gravatar.com/avatar/45a7cf4202fd46e398a832cf3547d718?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Aleq</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1100">
							<time datetime="2018-03-07T15:07:48+01:00">
								March 7, 2018 at 15:07							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello,</p>
<p>Great post, I enjoyed reading all of your posts about software architecture.</p>
<p>I would like to hear your opinion on one topic – you have placed the event bus / message queue on the right side but I feel it we could be also added to the left.</p>
<p>Why? Actually the event bus / queue shares two responsibilities – from one side it’s the publisher / producer, and on the other side of the channel is the subscriber / consumer, and those responsibilities are normally handled by different applications / processes / bounded contexts. Consuming an event / message is just another way to trigger command in a distributed system. What do you think?</p>
<p>Aleq</p>
<p id="comment-like-1100" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1100&amp;_wpnonce=f894947520" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1100" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1100#respond" data-commentid="1100" data-postid="14874" data-belowelement="div-comment-1100" data-respondelement="respond" aria-label="Reply to Aleq">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1101" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-1101" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-18" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1101">
							<time datetime="2018-03-07T23:16:28+01:00">
								March 7, 2018 at 23:16							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>You have a very good point.<br>
The way I see it, and as is in the infographic, the commands are on the left side because they start something, while the events are on the right side because they are triggered as a consequence of something that happened, they are driven.</p>
<p>However, I did put the command bus port/adapter on the right side and maybe it should be on the left side indeed.<br>
Nevertheless, the event bus port/adapter I would still place it on the right side, as the message bus which is the underlying tool used by both the command bus and the event bus.</p>
<p>Either way  it was convenient, for the infographic design, to have it in the right side although maybe I will change it now that u made me think about it. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Tkx for the feedback <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-1101" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1101&amp;_wpnonce=32ccabdec8" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1101" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1101#respond" data-commentid="1101" data-postid="14874" data-belowelement="div-comment-1101" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-1103" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-1103" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-19" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1103">
							<time datetime="2018-03-08T12:46:34+01:00">
								March 8, 2018 at 12:46							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I’ve been thinking more about this and I will not change it. Here’s why:</p>
<p>A primary adapter (on the left) adapts a use case to a delivery mechanism. This is the case with controllers, console commands and such.</p>
<p>A secondary adapter (on the right) adapts a tool to what the application needs it to be.</p>
<p>In the case of the command and event buses, they are adapters that wrap around a tool, the message bus, and adapts it to whatever interface the application uses.</p>
<p>Rationalizing it in this way, it becomes clear that really belong where they are located in the infographic.</p>
<p>Does it make sense to you? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-1103" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1103&amp;_wpnonce=d29ca9d17f" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1103" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1103#respond" data-commentid="1103" data-postid="14874" data-belowelement="div-comment-1103" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1105" class="comment even depth-3 highlander-comment">
			<article id="div-comment-1105" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/45a7cf4202fd46e398a832cf3547d718" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-45a7cf4202fd46e398a832cf3547d718-1" originals="48" src-orig="https://1.gravatar.com/avatar/45a7cf4202fd46e398a832cf3547d718?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Aleq</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1105">
							<time datetime="2018-03-08T16:20:26+01:00">
								March 8, 2018 at 16:20							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,</p>
<p>It makes sense, though I face more and more cases where I need to read messages from a queue (mainly background processes) and fire the same commands through Command bus as controllers do. But indeed it feels like queues are indirectly involved in “driving” a use case.</p>
<p>Thanks for your feedback.</p>
<p id="comment-like-1105" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1105&amp;_wpnonce=0ae1f578f7" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1105" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1105#respond" data-commentid="1105" data-postid="14874" data-belowelement="div-comment-1105" data-respondelement="respond" aria-label="Reply to Aleq">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-1111" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-1111" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-0" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1111">
							<time datetime="2018-03-08T17:11:07+01:00">
								March 8, 2018 at 17:11							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello, I agree with @Aleq . In the case of incoming events to the application, the message queue is a delivery mechanism, it drives the application. The event arrives and it triggers a command on the left side in order to execute logic in the app that reacts to the event. A primary adapter would have to be created for taking the event from the queue and adapt it to a command.</p>
<p>In the case of outcoming events, events generated from the app, the queue is a tool on the right side.</p>
<p>Message queue plays both «roles»: for incoming events is at the left side, and for outgoing events is at the right side.</p>
<p>Regards,<br>
Juan.</p>
<p>@hgraca … I would like to agree with you some day <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"><br>
Un saludo, Juan.</p>
<p id="comment-like-1111" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1111&amp;_wpnonce=fc2e9fda6d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1111" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1111#respond" data-commentid="1111" data-postid="14874" data-belowelement="div-comment-1111" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1112" class="comment even depth-4 parent highlander-comment">
			<article id="div-comment-1112" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/45a7cf4202fd46e398a832cf3547d718" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-45a7cf4202fd46e398a832cf3547d718-2" originals="48" src-orig="https://1.gravatar.com/avatar/45a7cf4202fd46e398a832cf3547d718?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Aleq</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1112">
							<time datetime="2018-03-09T10:42:14+01:00">
								March 9, 2018 at 10:42							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>@Juan, fully agree with you</p>
<p id="comment-like-1112" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1112&amp;_wpnonce=c6847a620a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1112" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1112#respond" data-commentid="1112" data-postid="14874" data-belowelement="div-comment-1112" data-respondelement="respond" aria-label="Reply to Aleq">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1115" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-5 parent highlander-comment">
			<article id="div-comment-1115" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-20" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1115">
							<time datetime="2018-03-10T10:10:42+01:00">
								March 10, 2018 at 10:10							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>@Juan @Aleq I thought about it even more (thank you for the challenge) and here’s the cases I can forsee:</p>
<p>1.<br>
The MessageBus (CommandBus &amp; EventBus) is internal to the application.<br>
So when we send a command or event we wrap it in an envelope saying what service (handler or listener) should receive the content of the message. As its internal, the application knows the message “language”, how to serialize and hydrate the message content and where and how to deliver it.<br>
There is no need for driving adapters, only a driven adapter around the bus tool.</p>
<p>The MessageBus is external and we need to pull messages.<br>
We need a driven adapter around the bus tool to pull messages. As these messages contents can (probably) not be hydrated, because they come from external systems, we will need something to translate these messages into commands. This “something” are the driver adapters, some controller like construct, for which there are already examples in the infographic. Nevertheless, the external MessageBus is still on the right side, as an external tool the application uses.</p>
<p>3.<br>
The MessageBus is external and it pushes messages to our application.<br>
In this case the message bus is totally independent of the application, so we don’t need a driven adapter. We do need driver adapters to translate the messages into commands, but that is basically an API endpoint which is an example that already exists in the infographic.</p>
<p>So, to conclude, I think that if we need a MessageBus adapter it will be in the right side, although it can forward message contents to adapters on the left side. Either way the infographic already has examples that can fit these cases.<br>
I feel tempted to add these specific examples but I’m afraid it would overload the already overloaded infographic. <img draggable="false" class="emoji" alt="😦" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f626.svg" scale="0"></p>
<p>Hope this is clear and we can finally agree on it. <img draggable="false" class="emoji" alt="☺" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/263a.svg" scale="0"></p>
<p>Again, tkx for the feedback and making me think about these things.</p>
<p id="comment-like-1115" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1115&amp;_wpnonce=0ab6a1ce38" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1115" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1115#respond" data-commentid="1115" data-postid="14874" data-belowelement="div-comment-1115" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1116" class="comment even depth-6 highlander-comment">
			<article id="div-comment-1116" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-1" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1116">
							<time datetime="2018-03-10T11:11:22+01:00">
								March 10, 2018 at 11:11							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello @hgraca… as always, it’s all in the language… «We do need driver adapters to translate the messages into commands, but that is basically an API endpoint»… we talk about the same thing but name it differently and we put it at the left side in each one’s architecture. So name it whatever you want, but we are talking about the same concepts. We have different terms, different architecture (but very slightly), different ULs, different «contexts» when we talk… but in the end we are saying the same thing.</p>
<p>Regards, Juan</p>
<p id="comment-like-1116" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1116&amp;_wpnonce=42de935fb4" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1116" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1116#respond" data-commentid="1116" data-postid="14874" data-belowelement="div-comment-1116" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1017" class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://nenadlivaic.wordpress.com/2017/12/25/onion-layer-responsibilities/" rel="external nofollow" class="url">Onion layer responsibilities – Nenad Livaic Knowledge Base</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-983" class="comment even thread-even depth-1 parent highlander-comment">
			<article id="div-comment-983" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-0" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-983">
							<time datetime="2018-02-18T16:40:31+01:00">
								February 18, 2018 at 16:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hey mate,</p>
<p>Quick question: Where would you put your Command Validators (using a Command Bus and a Validation Command Handler decorator); in the Port or in the component itself?</p>
<p>Best..<br>
Fadil</p>
<p id="comment-like-983" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=983&amp;_wpnonce=91e5eec5fd" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-983" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=983#respond" data-commentid="983" data-postid="14874" data-belowelement="div-comment-983" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-984" class="comment odd alt depth-2 parent highlander-comment">
			<article id="div-comment-984" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-1" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-984">
							<time datetime="2018-02-18T16:55:26+01:00">
								February 18, 2018 at 16:55							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>One more thing: I used to use Fluent Validation for validation. In this kind of architecture, would it be still possible to use the library and where you it be used? I don’t think it should be in the component since it should be technology-agnostic. Any thoughts on that too?</p>
<p id="comment-like-984" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=984&amp;_wpnonce=c417fb5162" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-984" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=984#respond" data-commentid="984" data-postid="14874" data-belowelement="div-comment-984" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-987" class="comment byuser comment-author-hgraca bypostauthor even depth-3 highlander-comment">
			<article id="div-comment-987" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-21" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-987">
							<time datetime="2018-02-18T18:35:14+01:00">
								February 18, 2018 at 18:35							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I would create a validation port/adapter, so that we could switch the validator lib for another one or for a new BC breaking version, and would inject that port/adapter into the command bus validation decorator or middleware.</p>
<p id="comment-like-987" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=987&amp;_wpnonce=86a187edb3" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-987" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=987#respond" data-commentid="987" data-postid="14874" data-belowelement="div-comment-987" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-986" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 highlander-comment">
			<article id="div-comment-986" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-22" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-986">
							<time datetime="2018-02-18T18:31:25+01:00">
								February 18, 2018 at 18:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi</p>
<p>It depends on how you implement it:<br>
1. If that decorator is something simple, specific to a command/handler and what actually knows the rules to validate the command data, I would put it in the component as it will be used only by that component.<br>
2. If it is something generic that can be used in any command/handler and gets the validation rules from somewhere else (ie. yaml or annotations config), then I would put it in the command bus port/adapter as it can/will be used by any component.</p>
<p id="comment-like-986" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=986&amp;_wpnonce=4b6b54e6af" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-986" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=986#respond" data-commentid="986" data-postid="14874" data-belowelement="div-comment-986" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-904" class="comment even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-904" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/397fc4730321231b1f643902d6063e35" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-397fc4730321231b1f643902d6063e35-0" originals="48" src-orig="https://0.gravatar.com/avatar/397fc4730321231b1f643902d6063e35?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://gravatar.com/mlvn23" rel="external nofollow" class="url">Melvin</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-904">
							<time datetime="2018-01-31T17:52:49+01:00">
								January 31, 2018 at 17:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Herberto,</p>
<p>Thanks for writing this piece. I think it’s all coming together for me now.</p>
<p>Do you have any thoughts on how to model or apply DDD and best practices on rich front-end apps like SPA or Android / iOS apps?</p>
<p>Thanks,</p>
<p>Melvin</p>
<p id="comment-like-904" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=904&amp;_wpnonce=88a825e32b" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-904" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=904#respond" data-commentid="904" data-postid="14874" data-belowelement="div-comment-904" data-respondelement="respond" aria-label="Reply to Melvin">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-905" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 highlander-comment">
			<article id="div-comment-905" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-23" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-905">
							<time datetime="2018-01-31T18:51:27+01:00">
								January 31, 2018 at 18:51							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Your welcome <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>I don’t have first hand experience with front-end apps. I’ve only been doing back-end. However, I can imagine it is perfectly possible to follow these ideas, although maybe with some differences derived from technology differences/limitations. For example Phyton doesn’t have interfaces, and that will certainly bring differences in implementation. I imagine the same will happen with other technologies. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-905" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=905&amp;_wpnonce=60cc84bd50" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-905" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=905#respond" data-commentid="905" data-postid="14874" data-belowelement="div-comment-905" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-898" class="comment even thread-even depth-1 highlander-comment">
			<article id="div-comment-898" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/cbbb22af9f8d67e0e44a434b94001042" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-cbbb22af9f8d67e0e44a434b94001042-0" originals="48" src-orig="https://0.gravatar.com/avatar/cbbb22af9f8d67e0e44a434b94001042?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">James Mclean</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-898">
							<time datetime="2018-01-29T00:15:37+01:00">
								January 29, 2018 at 00:15							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto.</p>
<p>I just wanted to say thank you so much for the Software Architecture Chronicles and in particular this article.</p>
<p>I’d been developing websites (Joomla primarly) for the past few years however recently I’ve started learning more about enterprise architecture patterns for C# application development. Over the past few months I’ve read countless books and articles and watched numerous videos all explaining aspects of and approaches to domain driven design, CQRS, Ports and Adaptors, Mediator, etc. Whilst each has added to my knowledge of the various topics I can honestly say that no other source managed to put it all together as clearly and succinctly as this article. This article brought it all into focus for me. Thank you!</p>
<p>Cheers,<br>
James</p>
<p id="comment-like-898" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=898&amp;_wpnonce=b2549391af" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-898" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=898#respond" data-commentid="898" data-postid="14874" data-belowelement="div-comment-898" data-respondelement="respond" aria-label="Reply to James Mclean">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-880" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-880" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-2" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-880">
							<time datetime="2018-01-24T16:27:22+01:00">
								January 24, 2018 at 16:27							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think I now understand what you meant. Thanks a lot mate!</p>
<p id="comment-like-880" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=880&amp;_wpnonce=08b56ce904" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-880" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=880#respond" data-commentid="880" data-postid="14874" data-belowelement="div-comment-880" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-881" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-881" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-24" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-881">
							<time datetime="2018-01-24T16:31:42+01:00">
								January 24, 2018 at 16:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I was gonna reply later, but im glad u already understood. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Cheers!</p>
<p id="comment-like-881" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=881&amp;_wpnonce=df1f578460" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-881" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=881#respond" data-commentid="881" data-postid="14874" data-belowelement="div-comment-881" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-875" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-875" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-3" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-875">
							<time datetime="2018-01-24T12:48:12+01:00">
								January 24, 2018 at 12:48							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Makes sense yes. Thank you.</p>
<p>Where would put your Query Objects though? Application layer?</p>
<p id="comment-like-875" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=875&amp;_wpnonce=d89c55283e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-875" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=875#respond" data-commentid="875" data-postid="14874" data-belowelement="div-comment-875" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-876" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-876" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-25" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-876">
							<time datetime="2018-01-24T12:51:20+01:00">
								January 24, 2018 at 12:51							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Yes. Domain objects don’t care where other domain objects come from, and know nothing of persistence.<br>
Tha application layer is the one that needs to know to what entities a use case applies to, so it needs repositories and query objects.</p>
<p id="comment-like-876" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=876&amp;_wpnonce=9d0e7ed7e3" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-876" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=876#respond" data-commentid="876" data-postid="14874" data-belowelement="div-comment-876" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-878" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-878" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-4" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-878">
							<time datetime="2018-01-24T13:22:47+01:00">
								January 24, 2018 at 13:22							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hmm, okay.</p>
<p>In your previous reply, when you said:</p>
<p>“Ideally this interfaces would have only one method, which would spit out a DTO (belonging in the persistence port) that would be expected_by/specific_to each persistence adapter.”</p>
<p>Why would you create DTOs when you can use the Query Objects themselves in the persistence port and adapter? And where would you please those DTOs?</p>
<p id="comment-like-878" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=878&amp;_wpnonce=f18f36d6af" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-878" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=878#respond" data-commentid="878" data-postid="14874" data-belowelement="div-comment-878" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-859" class="comment even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-859" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-5" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-859">
							<time datetime="2018-01-23T16:36:49+01:00">
								January 23, 2018 at 16:36							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Great post!</p>
<p>I have two questions regarding Persistence.</p>
<p>Imagine you have one Persistence port which abstract an ORM (let’s say Dapper) and your application is using that port for persistence to the relational database using Stored Procedures. So you would normally implement that port with methods such as Execute(string query, object parameters) and Query(string query, object parameters).</p>
<p>Question 1: Now let’s say you need to change your persistence engine to using NoSQL databases for instance. Normally you would need to write a new adapter for your NoSQL database. But would that means you also need to change your Persistence port to use NoSQL-related methods such as Save(object item), Delete(long id), Get(long id) and Update(long id, object item)?</p>
<p>Question 2: Since your application core (application and domain) depends on your Persistence port, would that not couple the domain with “relational” persistence concepts?</p>
<p>Thanks!<br>
Fadil</p>
<p id="comment-like-859" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=859&amp;_wpnonce=bb980c0874" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-859" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=859#respond" data-commentid="859" data-postid="14874" data-belowelement="div-comment-859" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-861" class="comment odd alt depth-2 highlander-comment">
			<article id="div-comment-861" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-6" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-861">
							<time datetime="2018-01-23T22:45:50+01:00">
								January 23, 2018 at 22:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Perhaps, creating two ports/interfaces, one RelationalPersistenceService and NonRelationalPersistenceService?</p>
<p id="comment-like-861" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=861&amp;_wpnonce=6687292c4d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-861" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=861#respond" data-commentid="861" data-postid="14874" data-belowelement="div-comment-861" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-862" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-862" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-26" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-862">
							<time datetime="2018-01-23T23:01:30+01:00">
								January 23, 2018 at 23:01							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you.</p>
<p>I see the repositories and/or query objects as adapters over a query language as opposed to adapters over a tool.<br>
Furthermore I think an application will always be dependent of languages (sql, dql, mongoql, the same as depending of PHP, java, whatever).<br>
The persistence adapter will adapt over Doctrine or whatever ORM we use.</p>
<p>I think that if we use a command pattern (no relation to command bus), we can leverage a clean persistence port. The idea would be to create a Query Object as a DTO, which is passed to the persistence port. Whatever adapter receives it will know how to translate that DTO (the query object) into what the underlying tool expects. This means that the adapter would only need to implement one method ie “handleQuery”.</p>
<p>Furthermore, the port could be composed by an interface AND a strategy pattern implementation, which would have whatever adapters inside and when receiving the query object would decide what adapter would be used. So if it would receive a SQL Query Object it would deliver it to a PDO adapter, if its a MongoQL Query object delivers it to the mongo Adapter, and so forth so on. This way we allways inject that Proxy/strategy implementation and dont care about injecting the matching adapter to the query object we use in the client code.</p>
<p>Did it make sense? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-862" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=862&amp;_wpnonce=2a7ee99607" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-862" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=862#respond" data-commentid="862" data-postid="14874" data-belowelement="div-comment-862" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-871" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-871" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/81a3a9de6f5338ff79adb1133db15ded.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-81a3a9de6f5338ff79adb1133db15ded-7" originals="48" src-orig="https://2.gravatar.com/avatar/81a3a9de6f5338ff79adb1133db15ded?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Fadil</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-871">
							<time datetime="2018-01-24T08:00:43+01:00">
								January 24, 2018 at 08:00							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for the explanation.</p>
<p>Let me give you some context on what I need to achieve.</p>
<p>I am using ORM (Dapper) which calls stored procedures. I have a Transaction Repository which uses the persistence port. The persistence adapter then wraps around the ORM to execute/handle queries. But because I am using stored procedures, the client code (Transaction Repository) will need to pass the SQL parameters and specify which stored procedure to use (the persistence adapter by itself does not know which stored procedure to use).</p>
<p>Now let’s say tomorrow I need to use MongoDB instead of SQL Server, the client code does not need to specify which stored procedure to use anymore. The client code will need to specify the collection name and the object to persist (again the persistence adapter by itself does not know about which collection name to use).</p>
<p>Then let’s say I need to use Elasticsearch instead of MongoDB, the client code does not need to specify which collection name to use anymore. The client code will need to specify the index name and the object to persist (again the persistence adapter by itself does not know about which index name to use).</p>
<p>So in this case, does that mean you need to explicitly model your Query Objects with persistence-specific concepts such as:</p>
<p>public interface IRelationalQueryObject<br>
{<br>
   string QueryName { get; } // which contains the name of the stored procedure to call<br>
   object Parameters { get; }<br>
}</p>
<p>public GetAllTransactions : IRelationalQueryObject<br>
{<br>
   string QueryName<br>
   {<br>
      return “[dbo].[GetAllTransactions] @DateFrom, @DateTo”;<br>
   }</p>
<p>// …<br>
}</p>
<p>OR</p>
<p>public interface INoSqlQueryObject<br>
{<br>
   string CollectionName { get; } // which contains the name of the collection to use<br>
   object Data { get; }<br>
}</p>
<p>public GetAllTransactions : INoSqlQueryObject<br>
{<br>
   string CollectionName<br>
   {<br>
      return “Transactions”;<br>
   }</p>
<p>// …<br>
}</p>
<p>OR</p>
<p>public interface IIndexQueryObject<br>
{<br>
   string IndexName { get; } // which contains the name of the index to use<br>
   object Data { get; }<br>
}</p>
<p>public GetAllTransactions : IIndexQueryObject<br>
{<br>
   string IndexName<br>
   {<br>
      return “Transactions”;<br>
   }</p>
<p>// …<br>
}</p>
<p>What I am trying to say is that the client code (Transaction Repository) somehow needs to know the “type” of Query Object beforehand in order for the strategy implementation to know which persistence adapter to use.</p>
<p>Thanks..<br>
Fadil</p>
<p id="comment-like-871" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=871&amp;_wpnonce=a4c59c497e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-871" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=871#respond" data-commentid="871" data-postid="14874" data-belowelement="div-comment-871" data-respondelement="respond" aria-label="Reply to Fadil">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-874" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-874" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-27" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-874">
							<time datetime="2018-01-24T10:56:02+01:00">
								January 24, 2018 at 10:56							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, I see Query objects and Repositories as adapters around a query language, and I see it as ok for the application core to know what language it wants to use, although I agree that ideally it wouldn’t care. So it depends on how far you want/need to go with it.</p>
<p>If you really want to abstract from the query language, you can have a QueryObject that is initialized with the data filters, and it can implement different interfaces (belonging to the persistence port) where each interface corresponds to one query language. That would make it possible for the same query object to be used with different persistence mechanisms, so the client code would be agnostic to the query language (which would only exist inside the query object) and to the persistence mechanism (which would be behind the persistence port).</p>
<p>Ideally this interfaces would have only one method, which would spit out a DTO (belonging in the persistence port) that would be expected_by/specific_to each persistence adapter.</p>
<p>When the persistence port (through a proxy/strategy object) would receive a query object would check what interface it implements and would forward it to the corresponding adapter (mongo, PDO, Doctrine, Elasticsearch, …). However, if a query object implements multiple interfaces, this means the persistence port (proxy/strategy object) would need to have a smarter mechanism to choose which persistence adapter to use, maybe using a priority list set in the configuration.</p>
<p>Does this make sense to you? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-874" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=874&amp;_wpnonce=3363f43ff1" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-874" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=874#respond" data-commentid="874" data-postid="14874" data-belowelement="div-comment-874" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-845" class="comment byuser comment-author-jantonioreyes odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-845" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/78b46ee0c937cbdc06c03fcd6ede8306.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-78b46ee0c937cbdc06c03fcd6ede8306-0" originals="48" src-orig="https://1.gravatar.com/avatar/78b46ee0c937cbdc06c03fcd6ede8306?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">jantonioreyes</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-845">
							<time datetime="2018-01-16T10:58:50+01:00">
								January 16, 2018 at 10:58							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,</p>
<p>I agree that entities should never use a repository, but not entirely sure about its use in Doman Services, f.e. when applying business rules regarding some type of data validation (stored in database) before a command execution.</p>
<p>However, if you place repository in Application layer, the use of repositories is restricted in Domain, but they could be used from Presentation, as it can access to all Application functionality. And in a DDD context, I don’t think this is really correct, as any access from UI should be through Application Services or Command/Queries Handlers.</p>
<p>Anyway, I don’t agree with @Juan about that infrastructure depends on both application layer and domain model in DDD. From my point of view, dependencies in DDD do in this way:</p>
<p>Application –&gt; Domain &lt;– Infrastructure</p>
<p>Where domain is the core of everything.</p>
<p>It’ll be interesting to know your opinions about all the things discussed here.</p>
<p>Regards.</p>
<p id="comment-like-845" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=845&amp;_wpnonce=f77ed886a3" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-845" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=845#respond" data-commentid="845" data-postid="14874" data-belowelement="div-comment-845" data-respondelement="respond" aria-label="Reply to jantonioreyes">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-846" class="comment even depth-2 highlander-comment">
			<article id="div-comment-846" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-2" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-846">
							<time datetime="2018-01-16T12:31:40+01:00">
								January 16, 2018 at 12:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi @jantonioreyes. Infraestructure must depend on Application Layer in order to implement the application logic that needs to deal with technology or frameworks.</p>
<p>For example, transactions are a cross-cutting concern that should live in the application layer, and the implementation (with Spring framework for example) should live in the infraestrucure.</p>
<p>Sending a notification is another example of application logic. The interface lives in the application layer and the implementation (using email, sms or whatever) lives in the infraestructure.</p>
<p>Look at the layered architecture diagram using DIP (page 124 in the book “Implementing DDD” by Vaughn Vernon). Infraestructure depends on all layers.</p>
<p>I don’t use layered architecture though. I use hexagonal architecture, but it’s similar: application logic belongs to the inside of the hexagon, and it can use ports (interfaces that belongs to the hexagon too). This ports are implemeted by adapters (the infraestructure, the outside of the hexagon).</p>
<p>Regards, Juan.</p>
<p id="comment-like-846" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=846&amp;_wpnonce=6298a73e69" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-846" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=846#respond" data-commentid="846" data-postid="14874" data-belowelement="div-comment-846" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-863" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-863" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-28" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-863">
							<time datetime="2018-01-23T23:04:09+01:00">
								January 23, 2018 at 23:04							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I dont agree with you on this. I think dependencies go like this:</p>
<p>Delivery Mechanism (http, console, …) &lt;- UI -&gt; Application –&gt; Domain &lt;- Application – &gt; Port &lt;- Adapter – &gt; Tools (ORM, SearchEngine, Emailing , …)</p>
<p id="comment-like-863" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=863&amp;_wpnonce=567f5ecb6c" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-863" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=863#respond" data-commentid="863" data-postid="14874" data-belowelement="div-comment-863" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-865" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-865" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-3" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-865">
							<time datetime="2018-01-23T23:25:35+01:00">
								January 23, 2018 at 23:25							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Where do you implement application logic that needs infraestructure? For example, security (identity and access management), transactions, logging, etc. It’s not domain logic.</p>
<p>Un saludo.</p>
<p id="comment-like-865" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=865&amp;_wpnonce=e09674713d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-865" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=865#respond" data-commentid="865" data-postid="14874" data-belowelement="div-comment-865" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-866" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-866" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-29" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-866">
							<time datetime="2018-01-23T23:28:02+01:00">
								January 23, 2018 at 23:28							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Sorry, half what I wrote disapeard !! <img draggable="false" class="emoji" alt="😀" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f600.svg" scale="0"></p>
<p>I think dependencies go like this:</p>
<p>Delivery Mechanism (http, console, …) &lt;- UI -&gt; Application –&gt; Domain &lt;- Application – &gt; Port &lt;- Adapter – &gt; Tools (ORM, SearchEngine, Emailing , …)</p>
<p id="comment-like-866" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=866&amp;_wpnonce=cb7073495e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-866" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=866#respond" data-commentid="866" data-postid="14874" data-belowelement="div-comment-866" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-868" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-868" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-30" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-868">
							<time datetime="2018-01-23T23:35:02+01:00">
								January 23, 2018 at 23:35							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Finally, I managed to fix my comment!!</p>
<p>The security (identity and access management), transactions, logging, all that is infrastructure, its not Domain logic nor Application logic.<br>
Although logging is a special case, as it is cross cutting…</p>
<p id="comment-like-868" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=868&amp;_wpnonce=394b55f930" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-868" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=868#respond" data-commentid="868" data-postid="14874" data-belowelement="div-comment-868" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-869" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-869" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-4" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-869">
							<time datetime="2018-01-23T23:38:19+01:00">
								January 23, 2018 at 23:38							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I agree. Application uses ports. And ports are implemented by adapters (infraestructure). I do it that way too.</p>
<p id="comment-like-869" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=869&amp;_wpnonce=5323246fee" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-869" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=869#respond" data-commentid="869" data-postid="14874" data-belowelement="div-comment-869" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-870" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-870" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-5" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-870">
							<time datetime="2018-01-24T00:45:39+01:00">
								January 24, 2018 at 00:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto, this is a nightmare hahahaha. I saw your fixes now. Well I agree about dependencies (more or less, although my architecture is slightly different, but the essence is similar). I don’t agree about this sentence though:</p>
<p>“The security (identity and access management), transactions, logging, all that is infrastructure, its not Domain logic nor Application logic. Although logging is a special case, as it is cross cutting…”</p>
<p>Security, transactions, exception management, and more, are cross-cutting concerns too and they are centralized in the application layer. For example, if you use the command/query bus (I do), they are command/query decorators in the application layer.</p>
<p>Our arguments are a never ending story <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0">   We have different points of view here, you consider yours is correct, I consider mine <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Maybe we should stop aguing about this… it’s for sure that maybe we will find other topics of discussion <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>I like to talk about these thinkgs though, and share knowledge, undertanding and points of view. I appreciate your posts, as I like DDD and ports&amp;adapters architecture.</p>
<p>Regards,<br>
Juan.</p>
<p id="comment-like-870" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=870&amp;_wpnonce=e42d138f76" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-870" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=870#respond" data-commentid="870" data-postid="14874" data-belowelement="div-comment-870" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-877" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-877" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-31" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-877">
							<time datetime="2018-01-24T12:53:16+01:00">
								January 24, 2018 at 12:53							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Yes, we could discuss this stuff for a long time… <img draggable="false" class="emoji" alt="😂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f602.svg" scale="0"><br>
But its a interesting discussion.<br>
I wonder what we would come up with if we would ever work together <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-877" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=877&amp;_wpnonce=16a08407ac" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-877" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=877#respond" data-commentid="877" data-postid="14874" data-belowelement="div-comment-877" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-882" class="comment even depth-3 highlander-comment">
			<article id="div-comment-882" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-6" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-882">
							<time datetime="2018-01-24T17:43:17+01:00">
								January 24, 2018 at 17:43							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hahaha. Well I think it would be a good team after all. In the end I think that sometimes<br>
 we are saying the same thing… I also could say that security, for example, is an infraestructure service in the sense that implementation lives in the infraestructure layer (adapter). But sometimes clearly we say different things (I say that security is crosscutting concern).</p>
<p>Again, congratulations for your great posts. I think I’ve found more topics for discussion :), but I will tell you another day when I have time <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0">  this is a hobby for me, as in my job DDD and hexagonal architecture are not used. I use them in a personal training project, to put in practice all my lesrning about these subjects. I hope that some day I could publish all my learning and knowledge like you do. But time goes by and it’s not enough for me.</p>
<p>Un saludo Herberto… keep it going</p>
<p id="comment-like-882" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=882&amp;_wpnonce=2f1df8717a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-882" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=882#respond" data-commentid="882" data-postid="14874" data-belowelement="div-comment-882" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-864" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-864" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-32" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-864">
							<time datetime="2018-01-23T23:06:27+01:00">
								January 23, 2018 at 23:06							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>And as for the Domain services, I still don’t see a reason for them to know about persistence.<br>
They perform some domain logic on domain objects. The domain object should be passed to them and they do the logic, they don’t care where the domain objects come from.</p>
<p><img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-864" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=864&amp;_wpnonce=4dd49b8238" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-864" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=864#respond" data-commentid="864" data-postid="14874" data-belowelement="div-comment-864" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-912" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-912" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-7" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-912">
							<time datetime="2018-02-04T03:25:35+01:00">
								February 4, 2018 at 03:25							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto… I’m back <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>in reply of:<br>
“The security (identity and access management), transactions, logging, all that is infrastructure, its not Domain logic nor Application logic.”</p>
<p>Security and transactional management are application logic (they belong to application layer). When I say this I mean that at least interfaces of transactional and security live in the application layer. But as any other services, if their implementation need technology, the implementation should live in the infraestructure layer.</p>
<p>Look at page 120 of The Red Book:</p>
<p>“Application Services reside in the Application Layer. … They may control persistence transactions and security.”</p>
<p>And page 521:</p>
<p>“… the Application Services also control transactions … Security is also commonly cared for by Application Services.”</p>
<p>And page 533:</p>
<p>“… infrastructure … works out very well if its components depend on the interfaces from … Application Services … that require special technical capabilities.”</p>
<p>And page 113 of the book “PPP of DDD” by Scott Millet:</p>
<p>“Application services contain application logic only. This logic covers security, transaction management…”</p>
<p>Un saludo,<br>
Juan.</p>
<p id="comment-like-912" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=912&amp;_wpnonce=c9385edbe2" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-912" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=912#respond" data-commentid="912" data-postid="14874" data-belowelement="div-comment-912" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-918" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-918" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-33" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-918">
							<time datetime="2018-02-05T23:54:41+01:00">
								February 5, 2018 at 23:54							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, i have to admit that in a small/medium application thats how it will work indeed. However, in an enterprise application we will most likely use a command bus and the transaction start/end/rollback will be controlled there in a middleware. But yeah, i have to agree that application services <em>may</em> control persistence transactions. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>When it comes to security, i can agree that in <em>some</em> cases it might be desirable, but in <em>most</em> cases i want to control who can access a view and that i do in the controller, usually through configuration of an infrastructure service, like the doctrine security annotations. So no application layer involved. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-918" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=918&amp;_wpnonce=8c30ab8cf6" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-918" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=918#respond" data-commentid="918" data-postid="14874" data-belowelement="div-comment-918" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-919" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-919" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-8" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-919">
							<time datetime="2018-02-06T00:33:52+01:00">
								February 6, 2018 at 00:33							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hola Herberto…</p>
<p>“Well, i have to admit that in a small/medium application thats how it will work indeed. However, in an enterprise application we will most likely use a command bus and the transaction start/end/rollback will be controlled there in a middleware.”</p>
<p>In that case (enterprise app with a command/query bus), an easy way to control all those application concerns (transactions, security, logging, etc) is with decorators that wrap the commands/querys. The bus is the entry point to the app, and decorators are wrappers around it. In this case command/querys, their handlers, and the decorators, all belong to the “application layer”.</p>
<p>“When it comes to security, i can agree that in some cases it might be desirable, but in most cases i want to control who can access a view and that i do in the controller, usually through configuration of an infrastructure service, like the doctrine security annotations. So no application layer involved.”</p>
<p>Of course. Views and controllers are out of the hexagon, they dont belong to the core app. They are the UI.</p>
<p>Un saludo,<br>
Juan.</p>
<p>PD: sorry I quote your words in order to response, because your comment doesn’t show a “reply” link.</p>
<p id="comment-like-919" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=919&amp;_wpnonce=87a382d7c6" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-919" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=919#respond" data-commentid="919" data-postid="14874" data-belowelement="div-comment-919" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-924" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 parent highlander-comment">
			<article id="div-comment-924" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-34" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-924">
							<time datetime="2018-02-07T20:13:47+01:00">
								February 7, 2018 at 20:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Solved the “reply” limit, it was set to 3, now its 10 (the maximum). I didn’t realise this problem existed, so tkx for letting me know.</p>
<p>Back to the subject, the application layer is all about the use cases. In order to perform the use cases we need to get entities out of the persistence, and we use a persistence port to get those entities and to persist them back.</p>
<p>But that is all the use case needs from the persistence mechanism, get and put entities from/in persistence. If it uses transactions or not, it’s not a concern of the use case, it is an implementation detail. If we put transaction control (begin, end, rollback) in a use case, then if we switch the persistence tool to something that does not use transactions, does it make sense to leave those method calls in the use case? I don’t think so.</p>
<p>That being said, if its a small application I wouldn’t care about it and would just put it there.<br>
If its a medium size application I would try to bind the transaction control to request/response events. For example Symfony has events when receiving a request, when sending a response and when there is an error, so I would those events to the transaction start/end/rollback.</p>
<p>If its a big enterprise application, then I would use a command bus and take care of transaction control in a middleware in the command bus.<br>
Where would that middleware live?<br>
Well, it is not specific to any component, so it will be use by all components, so it will be outside the components application layer.<br>
Maybe in the persistence port or in the command bus port (ports are also application layer)? In this case that would mean that the middleware would be exactly the same for any persistence and/or command bus implementation which would be very hard, if not impossible to achieve.<br>
The remaining option is to put it in an adapter, which is outside the application layer. And this is in line with the fact that transactions are an implementation detail of a persistence mechanism, not relevant to a use case logic.</p>
<p>Does this make sense to you? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-924" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=924&amp;_wpnonce=2555117768" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-924" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=924#respond" data-commentid="924" data-postid="14874" data-belowelement="div-comment-924" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-925" class="comment even depth-5 parent highlander-comment">
			<article id="div-comment-925" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-9" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-925">
							<time datetime="2018-02-08T00:47:06+01:00">
								February 8, 2018 at 00:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, I think that maybe 10 replies is not enough for us :).</p>
<p>Transactions has to do with application services (or command/query handlers), as every use case has to be executed inside a transaction. Use cases are transactional.</p>
<p>But I’m not saying that a use case calls the methods to control transactions (begin, end, commit, rollback). I put transactional mechanism as a wrapper (decorator) of the application service interface (or command/query bus). This wrapper lives in the application layer, and it calls a port (implemented by an adapter that lives in infraestructure).</p>
<p>If, as you said, we switch the persistence tool to something that does’t use transactions, I switch the transactional adapter to another one that does nothing, or simply I don’t apply the wrapper to the application services.</p>
<p>In the end, I think we are saying more or less the same things. Maybe it’s my fault that I don’t express myself well in english. Maybe we don’t speak the same UL and I have to put an ACL, because it’s for sure that you are the upstream side <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>The issue in which we don’t agree is where the code that apply transactional concern to the use cases (being these services or command/query handlers) should live. For me, this code should live in the application layer because it is application logic, based in what I have read about the subject (I put here some references to some books pages). But this code is not implemented in the application layer, because the implementation is technology dependant. So this code use a port that is implemented by an adapter (infraestructure). I name this port “transactional port”.</p>
<p>I think that I’m not going to convince you and you are not going to convince me neither <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Regards,<br>
Juan.</p>
<p id="comment-like-925" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=925&amp;_wpnonce=6042461b22" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-925" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=925#respond" data-commentid="925" data-postid="14874" data-belowelement="div-comment-925" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-928" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-6 parent highlander-comment">
			<article id="div-comment-928" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-35" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-928">
							<time datetime="2018-02-09T20:09:27+01:00">
								February 9, 2018 at 20:09							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Haha!</p>
<p>Yeah, lets agree on disagreeing! <img draggable="false" class="emoji" alt="😃" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f603.svg" scale="0"></p>
<p>Lets go for a beer if u ever come to Amsterdam <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-928" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=928&amp;_wpnonce=06c9bcf650" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-928" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=928#respond" data-commentid="928" data-postid="14874" data-belowelement="div-comment-928" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-929" class="comment even depth-7 parent highlander-comment">
			<article id="div-comment-929" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-10" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-929">
							<time datetime="2018-02-09T20:38:13+01:00">
								February 9, 2018 at 20:38							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hahaha, I guess we would get drunk while arguing, because we will never agree <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"><br>
But maybe not, maybe speaking face to face we would realize that we are saying the same thing. It’s all about language. Spoken language better than written. Speaking to each other makes a shared understanding . Like Jeff Patton says in his book about user story mapping technic, speaking with the user is better than written user requirements documentation.</p>
<p>By the way do I have your permission to put a link to your posts if I write mine about all these subjects? I don’t know if I will but it’s my intention to publish all the knowledge I have learnt about putting together ports&amp;adapters, DDD, etc, and to publish source code as well.</p>
<p>Though we don’t agree in some things, I think that your articles are great and that you have done an amazing work.</p>
<p>Saludos,<br>
Juan.</p>
<p id="comment-like-929" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=929&amp;_wpnonce=03eb0dca1d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-929" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=929#respond" data-commentid="929" data-postid="14874" data-belowelement="div-comment-929" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-930" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-8 parent highlander-comment">
			<article id="div-comment-930" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-36" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-930">
							<time datetime="2018-02-09T21:13:40+01:00">
								February 9, 2018 at 21:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Sure, go ahead.<br>
Im also preparing some code for my next post, but its taking me a long time…</p>
<p id="comment-like-930" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=930&amp;_wpnonce=ffb5238325" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-930" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=930#respond" data-commentid="930" data-postid="14874" data-belowelement="div-comment-930" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-931" class="comment even depth-9 highlander-comment">
			<article id="div-comment-931" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-11" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-931">
							<time datetime="2018-02-09T21:37:08+01:00">
								February 9, 2018 at 21:37							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Yes, I understand you. It takes a lot of time. Me too. I don’t have enough time to do all that I want.<br>
Keep it going.<br>
Bye.</p>
<p id="comment-like-931" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=931&amp;_wpnonce=9ab39fd7ce" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-931" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=931#respond" data-commentid="931" data-postid="14874" data-belowelement="div-comment-931" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-1192" class="comment byuser comment-author-nenadlivaicdev odd alt depth-3 parent highlander-comment">
			<article id="div-comment-1192" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/7ded171203a83024d1e547e7884e6478" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-7ded171203a83024d1e547e7884e6478-0" originals="48" src-orig="https://1.gravatar.com/avatar/7ded171203a83024d1e547e7884e6478?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">nenadlivaicdev</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1192">
							<time datetime="2018-03-22T11:52:49+01:00">
								March 22, 2018 at 11:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Herberto, I just ran into a case along the lines of what you mention here.<br>
I have some data retrieved via the repo (a collection of max. 5 elements: line items in an order) and I must further process the collection according to some context-specific business rules to determine which of the various line item is relevant for my specific use case.<br>
The filtering logic is clearly a Domain service responsibility (SpecialCaseLineItemService), but I was thinking of what you said: “I still don’t see a reason for them to know about persistence”.</p>
<p>My questions:<br>
1. I will apply the same filtering logic in three specific places: RetrieveCase1(), RetrieveCase2() and SaveCase() – will it not make more sense to wrap the repo inside the domain service?<br>
2. Do I inject the domain service into the application service?</p>
<p>Thank you.</p>
<p id="comment-like-1192" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1192&amp;_wpnonce=b563006054" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1192" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1192#respond" data-commentid="1192" data-postid="14874" data-belowelement="div-comment-1192" data-respondelement="respond" aria-label="Reply to nenadlivaicdev">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1193" class="comment byuser comment-author-hgraca bypostauthor even depth-4 parent highlander-comment">
			<article id="div-comment-1193" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-37" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1193">
							<time datetime="2018-03-22T13:08:36+01:00">
								March 22, 2018 at 13:08							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,</p>
<p>Well, if we fully control the collection object, I would put the filtering logic in the collection object, so the collection (which is a domain object) would have several filtering methods, which could be used in application services.</p>
<p>If we don’t control the collection (maybe because the ORM spits out one of its generic collections), then I would probably use a collection wrapper which would contain those methods (it would be something like a Domain service) and use that one in the application services to wrap the collection and then filter it.</p>
<p>So:<br>
1. I wouldn’t do it this way because then the domain service (domain layer) will have knowledge about the repository (application layer) so it would break the dependencies rule.<br>
2. Indeed, I would prefer to use the repository in an application service, use the repository (application layer) to get all of the line items as a collection (domain layer), and filter it using the collection methods.</p>
<p>Does this make sense to you? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-1193" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1193&amp;_wpnonce=a44f0930fe" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1193" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1193#respond" data-commentid="1193" data-postid="14874" data-belowelement="div-comment-1193" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1194" class="comment byuser comment-author-nenadlivaicdev odd alt depth-5 parent highlander-comment">
			<article id="div-comment-1194" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/7ded171203a83024d1e547e7884e6478" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-7ded171203a83024d1e547e7884e6478-1" originals="48" src-orig="https://1.gravatar.com/avatar/7ded171203a83024d1e547e7884e6478?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">nenadlivaicdev</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1194">
							<time datetime="2018-03-22T14:43:37+01:00">
								March 22, 2018 at 14:43							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I am new to DDD world and am rethinking a bunch of old problems in a new light.<br>
Your answers make a lot of sense, in fact you just made me rethink that part of the model concerning the collection of objects: it is a class in itself, representing a business concept.</p>
<p>P.S. Thanks for replying so quickly, appreciate it. Have a nice day!</p>
<p id="comment-like-1194" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1194&amp;_wpnonce=a3cd9390e4" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1194" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1194#respond" data-commentid="1194" data-postid="14874" data-belowelement="div-comment-1194" data-respondelement="respond" aria-label="Reply to nenadlivaicdev">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-1195" class="comment byuser comment-author-hgraca bypostauthor even depth-6 highlander-comment">
			<article id="div-comment-1195" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-38" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-1195">
							<time datetime="2018-03-22T14:44:49+01:00">
								March 22, 2018 at 14:44							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Your welcome <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-1195" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=1195&amp;_wpnonce=c23a90021a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-1195" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=1195#respond" data-commentid="1195" data-postid="14874" data-belowelement="div-comment-1195" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-838" class="comment byuser comment-author-jantonioreyes odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-838" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/78b46ee0c937cbdc06c03fcd6ede8306.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-78b46ee0c937cbdc06c03fcd6ede8306-1" originals="48" src-orig="https://1.gravatar.com/avatar/78b46ee0c937cbdc06c03fcd6ede8306?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">jantonioreyes</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-838">
							<time datetime="2018-01-15T14:09:44+01:00">
								January 15, 2018 at 14:09							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Great article.<br>
Thanks for this post.</p>
<p>I’ve a doubt about just one point, where you’re talking about put repository interfaces in the Application Layer. According to DDD we use to put them in Domain, so if they belong to Application, where they must be implemented?<br>
If interfaces are in Application, and implementations in Infrastructure, must Infrastructure have dependencies from Domain and Application layers?</p>
<p>Thank you so much, and keep it going!</p>
<p>Regards.</p>
<p id="comment-like-838" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=838&amp;_wpnonce=3b429dc0ff" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-838" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=838#respond" data-commentid="838" data-postid="14874" data-belowelement="div-comment-838" data-respondelement="respond" aria-label="Reply to jantonioreyes">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-841" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-841" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-39" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-841">
							<time datetime="2018-01-15T23:52:37+01:00">
								January 15, 2018 at 23:52							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx for your comment.</p>
<p>I put both the repository interface and the implementation(s) in the application layer.<br>
I see the repository interfaces as an abstraction over a query language. So there can be different implementations of the same repository interface, each implementation using a different query language, ie one implementation with DQL, another with SQL, another with Mongo QL, …<br>
Each implementation gets injected a persistence interface which lives  and is implemented in the infrastructure layer. The persistence interface implementation injected can be different for all different repositories or it can be the same by using a strategy pattern.</p>
<p>I hope this was clear…</p>
<p>In my next post i have an example of this implementation. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-841" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=841&amp;_wpnonce=f16ee2a649" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-841" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=841#respond" data-commentid="841" data-postid="14874" data-belowelement="div-comment-841" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-842" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-842" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-12" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-842">
							<time datetime="2018-01-16T00:54:56+01:00">
								January 16, 2018 at 00:54							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi hgraca, I don’t agree with you at this point. I think that neither putting repo interfaces nor their implementations in the application layer is right from a DDD point of view.</p>
<p>Repo interfaces belong to the domain, one Repo per Aggregate Root. And the implementation should live in the infraestructure layer, implementing the repo methods (named using the UL) with languages according to the storage (SQL, Mogo, etc).</p>
<p>The application layer, as the direct client of the domain, uses the repositories interfaces.</p>
<p>Persistence is not a cross-cutting concern, like transactions, logging, exception handling, etc, so persistence shouldn’t live in the application layer.</p>
<p>Well that’s my point of view from what I’ve been learning about DDD. Maybe I’m wrong.</p>
<p>In response to jantonioreyes, I wanted to say that in DDD, infraestructure depends on both application layer and domain model. In order to implement cross-cutting concerns, the interface lives in the application layer and the implementation lives in the infraestructure.</p>
<p>Regards, Juan.</p>
<p id="comment-like-842" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=842&amp;_wpnonce=0f5c7d3e80" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-842" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=842#respond" data-commentid="842" data-postid="14874" data-belowelement="div-comment-842" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-844" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-844" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-40" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-844">
							<time datetime="2018-01-16T07:47:21+01:00">
								January 16, 2018 at 07:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>That’s fair enough <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>However, if you place repository interfaces in the domain layer, that means that an Entity could eventually use a repository. I think that should never be the case. So by putting the repository interface in the application layer, you explicitly say that a domain object should never use a repository.</p>
<p>Collections, on the other hand, yes. We can have a User and a Role entities in a 1-* relation, and then the User will contain a collection of Roles, and that collection can contain business rules inside.</p>
<p>I have never encountered a case where a domain object (entity, value obj, collection, specification, …) would need to know about persistence.</p>
<p>A use case, on the other hand, needs to know to what entities it applies to, needs to get them from persistence, tell them to do something, and persist them again.</p>
<p>Furthermore, I don’t think the repository implementation should live in the infrastructure because a repository is specific to a component, it should not be used in other components. A repository is not cross cutting through components, unlike the persistence interface which will be used by all components.</p>
<p>This is how I see it anyway <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-844" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=844&amp;_wpnonce=cb3cece2ba" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-844" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=844#respond" data-commentid="844" data-postid="14874" data-belowelement="div-comment-844" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-2392" class="comment byuser comment-author-jantonioreyes odd alt depth-3 parent highlander-comment">
			<article id="div-comment-2392" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/78b46ee0c937cbdc06c03fcd6ede8306.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-78b46ee0c937cbdc06c03fcd6ede8306-2" originals="48" src-orig="https://1.gravatar.com/avatar/78b46ee0c937cbdc06c03fcd6ede8306?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">jantonioreyes</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2392">
							<time datetime="2018-11-26T17:59:26+01:00">
								November 26, 2018 at 17:59							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi again,</p>
<p>Just a pending doubt about my previous question, now that I’m trying to implement an hexagonal architecture.</p>
<p>If repositories interfaces and/or implementations are located at Application layer, as @hgraca proposes, and not in Domain (interfaces) and Infrastructure (implementation) f.e., then it should be possible to access to repositories directly from Presentation. I think this make possible to skip all the logic implemented in the use cases, despite this could make direct queries faster, or it could be also used at a Presenter handler.</p>
<p>What do you think about that?</p>
<p>Regards and thanks in advance.</p>
<p id="comment-like-2392" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2392&amp;_wpnonce=7b1724032a" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2392" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2392#respond" data-commentid="2392" data-postid="14874" data-belowelement="div-comment-2392" data-respondelement="respond" aria-label="Reply to jantonioreyes">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2400" class="comment byuser comment-author-hgraca bypostauthor even depth-4 parent highlander-comment">
			<article id="div-comment-2400" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-41" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2400">
							<time datetime="2018-11-27T22:40:44+01:00">
								November 27, 2018 at 22:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think either way the Presentation layer can access the repositories because it’s the outermost layer and therefore can access any of the inner layers.<br>
You can decide to make the layers access only the layer next to it, but that might end up creating a lot of indirection layers in the code. The so-called lazagna architecture. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>My main points about repositories in the application layer are because the entry/exit points in the application are located in the application layer, and it would be awkward for an entity to be allowed to use a repository.</p>
<p id="comment-like-2400" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2400&amp;_wpnonce=037b9dbc36" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2400" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2400#respond" data-commentid="2400" data-postid="14874" data-belowelement="div-comment-2400" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2404" class="comment byuser comment-author-jantonioreyes odd alt depth-5 parent highlander-comment">
			<article id="div-comment-2404" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/78b46ee0c937cbdc06c03fcd6ede8306.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-78b46ee0c937cbdc06c03fcd6ede8306-3" originals="48" src-orig="https://1.gravatar.com/avatar/78b46ee0c937cbdc06c03fcd6ede8306?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">jantonioreyes</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2404">
							<time datetime="2018-11-28T13:10:00+01:00">
								November 28, 2018 at 13:10							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you,</p>
<p>I was thinking about this matter. The question that I don’t like repositories in the application layer is that, for me, repositories return Domain entities, so I don’t like these entities to be exposed outside the application layer.</p>
<p>So, dealing with Clean architecture, I have decided to declare repositories in Domain to manage entities on the one hand, as I use to do with DDD. And on the other hand, I will define Query interfaces in the Application layer, more or less like Read-only repositories but trying to optimize the implementation as much as possible and returning Use-cases response objects directly. Both, repositories and queries, implemented in Infrastructure.</p>
<p>What do you think about this approach?</p>
<p id="comment-like-2404" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2404&amp;_wpnonce=512bee4de4" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2404" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2404#respond" data-commentid="2404" data-postid="14874" data-belowelement="div-comment-2404" data-respondelement="respond" aria-label="Reply to jantonioreyes">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-2406" class="comment byuser comment-author-hgraca bypostauthor even depth-6 highlander-comment">
			<article id="div-comment-2406" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-42" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-2406">
							<time datetime="2018-11-28T13:15:10+01:00">
								November 28, 2018 at 13:15							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think that is a very good approach.<br>
Using query objects, that return raw data in an array or DTO, is also my prefered way to expose data to the UI, while I prefer to use repositories only in the use cases themselves because they return the entities with the domain logic the use case needs to trigger.</p>
<p id="comment-like-2406" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=2406&amp;_wpnonce=b73d50da75" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-2406" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=2406#respond" data-commentid="2406" data-postid="14874" data-belowelement="div-comment-2406" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-753" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-753" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-13" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-753">
							<time datetime="2017-12-19T13:40:44+01:00">
								December 19, 2017 at 13:40							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for your answer, I appreciate it a lot too, because the architecture of my project is very similar to yours, I’m a fan of ports and adapters architecture and DDD. When I saw this post I said: “this is amazing, perfect”. And the picture of the whole architecture is awesome. In general, your posts are great. I say it because it’s what I really think.</p>
<p>By secondary ports I mean what you call just ports. They belong to the core but I split them phisically apart (core = domain model + secondary ports). Domain model depends on secondary ports. They are interfaces for talking to external actors (systems,humans,services,databases or whatever). The language of the port methods signatures are the language of the core. A secondary adapter implements (depends on) the secondary port for a specific external actor and technology. I said Repository (persistence port) as an example of secondary port. In my case I split the core in modules (DDD concept), more or less is what you call component. A module has one or more aggregates, each one with its repository interface. This aggregates repo interfaces should be the secondary port, but if I place them (one per aggregate) in the port, then I break the “package by feature” design. So I decided to add kind of a “port proxy” in the domain model, that gets the port injected and forward the method calls to the port. By this I add complexity and duplication. But if I don’t do it, then the persistence adapter (repo implementation) should depend on the whole domain model, and that’s not correct from my point of view. Every secondary adapter must depend just on the secondary port that it implements.</p>
<p>I think your answer (“Repositories are specific to a component, si I place them in its specific component. They depend on the ORM port, it is injected in the repository constructor”) is more or less what I mean.</p>
<p>Thank you very much.</p>
<p>PD: Just one more question: do you have a persistence model in the persistence port, different from the domain model, and a translator between the two? Components of the domain model depend on persistence port and persistence adapter depends on the port too. Port doesn’t depend on anything, so it knows nothing about the domain model.</p>
<p id="comment-like-753" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=753&amp;_wpnonce=7d8f5dfe5d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-753" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=753#respond" data-commentid="753" data-postid="14874" data-belowelement="div-comment-753" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-754" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-754" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-43" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-754">
							<time datetime="2017-12-19T19:50:39+01:00">
								December 19, 2017 at 19:50							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you again for your comment, quite interesting how you do see it, and how similarly we do it! <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>I’m not quite sure what you mean by a persistence model. However, I can say that the persistence port indeed knows nothing of the domain although all ports should be designed to fit what the domain needs as opposed to what would be easier to implement by the adapter. Otherwise, the adapter is just a wrapper around the tool. In other words, we should first design the port as it would be easier to use by the components, and then implement the adapter.<br>
In my concrete case, I use Doctrine (similar to Hibernate) which is an ORM that uses a data-mapper pattern, as opposed to an active-record pattern, so I can indeed have a data model completely different from the domain model, although that is not usually the case, and the mapping from domain model to data model is set up with configuration files understood by the ORM itself.</p>
<p>Did this answer your question? <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-754" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=754&amp;_wpnonce=f790ae126e" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-754" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=754#respond" data-commentid="754" data-postid="14874" data-belowelement="div-comment-754" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-755" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-755" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-14" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-755">
							<time datetime="2017-12-19T20:36:28+01:00">
								December 19, 2017 at 20:36							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I totally agree with you.</p>
<p>By persistence model I mean the model mapped to the database. I use jpa and xml mapping, in order to not polute the entities with annotations. Again, I think it is similar to yours.</p>
<p>Of course you did answer my question.</p>
<p>Thanks again.</p>
<p>I’m looking forward to see your next articles.</p>
<p>Regards, Juan.</p>
<p id="comment-like-755" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=755&amp;_wpnonce=0326ba54d8" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-755" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=755#respond" data-commentid="755" data-postid="14874" data-belowelement="div-comment-755" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-750" class="comment even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-750" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-15" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-750">
							<time datetime="2017-12-19T01:34:51+01:00">
								December 19, 2017 at 01:34							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello. Great post. Congratulations.</p>
<p>How do you deal with secondary ports and components?</p>
<p>Do you consider a port being part of the component, or is the port a separate layer?</p>
<p>For example, if each component owns its repository the secondary adapter should depends on all components (the whole app core, not just the ports).</p>
<p>But if you put ports in a separate layer, the you break package by component design.</p>
<p>Thanks, Juan.</p>
<p id="comment-like-750" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=750&amp;_wpnonce=3e9bb046a3" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-750" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=750#respond" data-commentid="750" data-postid="14874" data-belowelement="div-comment-750" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-752" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 highlander-comment">
			<article id="div-comment-752" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-44" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-752">
							<time datetime="2017-12-19T11:23:44+01:00">
								December 19, 2017 at 11:23							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Tkx for your nice words, I appreciate it. <img draggable="false" class="emoji" alt="☺" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/263a.svg" scale="0"></p>
<p>As for your question, I don’t understand what you mean by ‘secondary ports and components’. But maybe this will make it clear:</p>
<p>If my application uses an ORM, I will create a Persistence port and an adapter for the ORM. That port will be used by all components that need the ORM. The ports belong to the application core, its an entry/exit point to the application core, not to a specific component.</p>
<p>Repositories are specific to a component, si I place them in its specific component. They depend on the ORM port, it is injected in the repository constructor.<br>
The tricky thing with repositories is that they are also specific to the query language. They implement a repository interface, but then there can be different implementations per query language. A query language depends on the persistence engine used, it can be SQL, Mongo Query Language, Elasticsearch query language, Doctrine Query Language, … whatever.<br>
This means that a repository, although not an adapter around the ORM, it is an adapter for the query language, and it might need to know some specifics about what is outside the Application Core, it definitely needs to know what language it is using, and if using DQL it needs the doctrine query builder to be injected. Unless we create our own query language, like Doctrine did, but I think that is going way too far.</p>
<p>Did this answer your question?</p>
<p id="comment-like-752" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=752&amp;_wpnonce=407b123c33" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-752" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=752#respond" data-commentid="752" data-postid="14874" data-belowelement="div-comment-752" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-784" class="comment even depth-2 parent highlander-comment">
			<article id="div-comment-784" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/625bfdcc5ebe17f847a1de7f6ce4c0a0" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-625bfdcc5ebe17f847a1de7f6ce4c0a0-0" originals="48" src-orig="https://0.gravatar.com/avatar/625bfdcc5ebe17f847a1de7f6ce4c0a0?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Oleksandr Sova</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-784">
							<time datetime="2017-12-30T03:50:34+01:00">
								December 30, 2017 at 03:50							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello. Why do you think that <cite>put ports in a separate layer, the you break package by component design</cite>? Your packages/modules may strictly require other module which in this case may be it’s bounadry. Uncle Bob described it like “plug-in approach”. So consider next packages relation structure:<br>
+——————-                        +———————+                       +—————+<br>
| Infrastructure   |                       | UseCase           |                        | App impl    |<br>
| module where |==requires==&gt;| boundary           |&lt;==requires==| where        |<br>
| ControllerA     |                        | where is            |                        | ConcreteA  |<br>
| belongs to       |                       | &lt; I &gt; ContractA  |                        | belongs to  |<br>
+——————-+                      +———————+                       +—————+<br>
Infrastructure do knows about boundary and only about it as a contract but dependencies are still inwards. So ControllerA –depends on–|&gt; ContractA implemented by ConcreteA. What is breaking this way? Packages may require other packages to be a part of it so it’s still top level package by component. And packages may be re-used at other packages/components so it’s way like plugin. As for example – to publish an IDE plugin you don’t have to publish whole IDE with it.</p>
<p id="comment-like-784" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=784&amp;_wpnonce=e50fb1c20f" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-784" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=784#respond" data-commentid="784" data-postid="14874" data-belowelement="div-comment-784" data-respondelement="respond" aria-label="Reply to Oleksandr Sova">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-788" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-788" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/f6d9e22f3b8e99baeda85717f28c30aa.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-f6d9e22f3b8e99baeda85717f28c30aa-16" originals="48" src-orig="https://0.gravatar.com/avatar/f6d9e22f3b8e99baeda85717f28c30aa?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Juan</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-788">
							<time datetime="2017-12-31T05:51:28+01:00">
								December 31, 2017 at 05:51							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, I explain it in my reply to hgraca ( <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-753" rel="nofollow">https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-753</a> ). In my implementation of hexagonal architecture, I have a jar for every port and another jar for the core (hexagon = core + ports). Ports are the boundary of the hexagon. The outside world (adapters) access the inside through ports. I have a jar for every adapter. Core depends on ports (interfaces), and every adapter depends on the port that it implements. Ports isolate the core from the outside. So say you have ComponentA and ComponentB in the core. RepositoryA and RepositoryB are interfaces belonging to the persistence port for accessing the database, so they both belong to the “persistence port”. But this breaks “package by feature” (because RepositoryA should belong to ComponentA, and RepositoryB to ComponentB). My solution was to add a RepositoryA class in ComponentA, that just gets injected the RepositoryA interface of the port, and forwards every method call to the port. Same for B.</p>
<p>Apologize to hgraca, this is your blog, not mine (I don’t have any), but I’ve answered as the question was about something I said.</p>
<p>Regards,<br>
Juan.</p>
<p id="comment-like-788" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=788&amp;_wpnonce=740ef5eb76" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-788" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=788#respond" data-commentid="788" data-postid="14874" data-belowelement="div-comment-788" data-respondelement="respond" aria-label="Reply to Juan">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-790" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-790" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-45" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-790">
							<time datetime="2017-12-31T07:41:40+01:00">
								December 31, 2017 at 07:41							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>No need to apologize Juan, the more ppl participate the better.<br>
One of the reasons i created the blog was to give back to the community, and we are all part of it <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-790" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=790&amp;_wpnonce=9bd5a9c8b1" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-790" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=790#respond" data-commentid="790" data-postid="14874" data-belowelement="div-comment-790" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-738" class="pingback odd alt thread-even depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://edwardthienhoang.wordpress.com/2017/12/13/ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/" rel="external nofollow" class="url">DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – Java Việt Nam</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-732" class="comment even thread-odd thread-alt depth-1 highlander-comment">
			<article id="div-comment-732" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/4763b4d6e4b51ca8fb4dbf4620f71d81" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-4763b4d6e4b51ca8fb4dbf4620f71d81-0" originals="48" src-orig="https://1.gravatar.com/avatar/4763b4d6e4b51ca8fb4dbf4620f71d81?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://radblog.pl/" rel="external nofollow" class="url">Radek Maziarka</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-732">
							<time datetime="2017-12-12T23:25:38+01:00">
								December 12, 2017 at 23:25							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I am amazed by this post. Great work <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p id="comment-like-732" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=732&amp;_wpnonce=d8b5828c6f" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-732" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=732#respond" data-commentid="732" data-postid="14874" data-belowelement="div-comment-732" data-respondelement="respond" aria-label="Reply to Radek Maziarka">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-714" class="comment odd alt thread-even depth-1 highlander-comment">
			<article id="div-comment-714" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/NYsigyB8_normal.jpg" class="avatar avatar-48" height="48" width="48" srcset="https://i2.wp.com/pbs.twimg.com/profile_images/833084205500346369/NYsigyB8_normal.jpg?resize=48%2C48&amp;zoom=2 2x" scale="2">						<b class="fn"><a href="http://twitter.com/tlfbrito" rel="external nofollow" class="url">Tiago Brito (@tlfbrito)</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-714">
							<time datetime="2017-12-05T00:55:31+01:00">
								December 5, 2017 at 00:55							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for this article. Very detailed.</p>
<p id="comment-like-714" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=714&amp;_wpnonce=513a4d9d88" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-714" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=714#respond" data-commentid="714" data-postid="14874" data-belowelement="div-comment-714" data-respondelement="respond" aria-label="Reply to Tiago Brito (@tlfbrito)">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-704" class="pingback even thread-odd thread-alt depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://jesperjarlskov.dk/november-2017-php/" rel="external nofollow" class="url">November-2017.php – Jesper Jarlskov's blog</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-679" class="comment byuser comment-author-pnghai odd alt thread-even depth-1 highlander-comment">
			<article id="div-comment-679" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/349d44c089cf2ec5f1c800f158fa2458.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-349d44c089cf2ec5f1c800f158fa2458-0" originals="48" src-orig="https://0.gravatar.com/avatar/349d44c089cf2ec5f1c800f158fa2458?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">pnghai</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-679">
							<time datetime="2017-11-21T10:27:48+01:00">
								November 21, 2017 at 10:27							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Reblogged this on <a href="https://haiphanit.wordpress.com/2017/11/21/ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/" rel="nofollow">Pikachu's Corner</a>.</p>
<p id="comment-like-679" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=679&amp;_wpnonce=a7369b5897" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-679" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=679#respond" data-commentid="679" data-postid="14874" data-belowelement="div-comment-679" data-respondelement="respond" aria-label="Reply to pnghai">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-669" class="comment even thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-669" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/98442eeeeb11844d9992d93562f892ce.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-98442eeeeb11844d9992d93562f892ce-0" originals="48" src-orig="https://0.gravatar.com/avatar/98442eeeeb11844d9992d93562f892ce?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://gravatar.com/stephanerondalarexo" rel="external nofollow" class="url">Stephane</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-669">
							<time datetime="2017-11-19T13:48:40+01:00">
								November 19, 2017 at 13:48							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for the article.<br>
Great subject.<br>
Would you be willing to present that at Wajug user group (in belgium)?<br>
We’re looking for great speakers and great subjects.<br>
Have a look at our upcoming/past events:<br>
<a href="http://www.wajug.be/" rel="nofollow">http://www.wajug.be/</a><br>
<a href="http://www.wajug.be/pastEvents" rel="nofollow">http://www.wajug.be/pastEvents</a></p>
<p>Hope to hear from you,<br>
Stephane</p>
<p id="comment-like-669" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=669&amp;_wpnonce=02d26a9fe5" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-669" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=669#respond" data-commentid="669" data-postid="14874" data-belowelement="div-comment-669" data-respondelement="respond" aria-label="Reply to Stephane">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-673" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-2 parent highlander-comment">
			<article id="div-comment-673" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-46" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-673">
							<time datetime="2017-11-19T23:22:06+01:00">
								November 19, 2017 at 23:22							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you!</p>
<p>I feel flattered now!! <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"><br>
Liege is a bit out of my way though…<br>
But I still wanna write a few more posts and then if I decide to make some talks I will send you guys an email.</p>
<p>Thank you for the invite, I really appreciate it.</p>
<p id="comment-like-673" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=673&amp;_wpnonce=9c9961cd82" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-673" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=673#respond" data-commentid="673" data-postid="14874" data-belowelement="div-comment-673" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-675" class="comment even depth-3 highlander-comment">
			<article id="div-comment-675" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/98442eeeeb11844d9992d93562f892ce.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-98442eeeeb11844d9992d93562f892ce-1" originals="48" src-orig="https://0.gravatar.com/avatar/98442eeeeb11844d9992d93562f892ce?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Stephane Rondal</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-675">
							<time datetime="2017-11-20T09:15:18+01:00">
								November 20, 2017 at 09:15							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You’re welcome, I really liked your post.<br>
No problem, contact me when you’re ready for some talks.<br>
It will be a pleasure to host you.<br>
And Liege is not that far from Amsterdam <img draggable="false" class="emoji" alt="😉" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f609.svg" scale="0"><br>
In the meantime, good continuation with your excellent articles.</p>
<p>Cheers,<br>
Stephane</p>
<p id="comment-like-675" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=675&amp;_wpnonce=8d93023e73" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-675" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=675#respond" data-commentid="675" data-postid="14874" data-belowelement="div-comment-675" data-respondelement="respond" aria-label="Reply to Stephane Rondal">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-665" class="comment byuser comment-author-alyaros odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-665" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/378eefea3af018ef9279ad59fbc0bfff" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-378eefea3af018ef9279ad59fbc0bfff-0" originals="48" src-orig="https://0.gravatar.com/avatar/378eefea3af018ef9279ad59fbc0bfff?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://onetechaday.wordpress.com/" rel="external nofollow" class="url">alyaros</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-665">
							<time datetime="2017-11-18T17:14:10+01:00">
								November 18, 2017 at 17:14							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>First I would like to say that this is a very good summary of all the concepts (DDD, CQRS, P&amp;A etc…) into one coherent whole solution and also to take the opportunity and say that I really enjoy reading your blog posts.<br>
I’m familiar with the ideas mentioned in the post for several years now and also I’ve been following those topics in various places: blogs, books, conferences and more and also tested\implemented some of them myself in various projects to some extent.<br>
There 2 main issues that bother me the most regarding this and I’ll be very happy to hear your opinion.<br>
1)  Creating many abstraction and separations (Domain objects, Domain services, App services, DTO’s , Persistence adapters  etc.. ) is adding a lot of entities to maintain and also many mappers between them – this creates A lot of boilerplate code that is hard to maintain. For example I have at the minimum 3 flavors of the same entity – one for the primary adapters (i.e. return User to the UI\service-client), second for the domain, third for the persistence adapter. (Usually it’s simple 1:1 mapping but obviously not always)</p>
<p>2)  Such abstractions creates significant performance penalty mainly on data driven applications. For example let’s look on the separation between domain and persistence. We aspire to keep the business code isolated inside the domain and treating the persistence as storage mechanism – we can save or getBy (filter) but we try to keep the business decision\logic inside the domain – doing so can lead to a very inefficient usage of the persistence (I.e. DB) – for example instead of creating a more complex query that will do some of the calculation on the DB itself we fetch a lot of data, translate it to domain, perform the calculation and return the result. The question is how you prevent leakage of business rules into the persistence adapter while still keeping the process efficient as possible.</p>
<p id="comment-like-665" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=665&amp;_wpnonce=ed2a2d4336" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-665" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=665#respond" data-commentid="665" data-postid="14874" data-belowelement="div-comment-665" data-respondelement="respond" aria-label="Reply to alyaros">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-671" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-671" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-47" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-671">
							<time datetime="2017-11-19T23:12:41+01:00">
								November 19, 2017 at 23:12							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi,</p>
<p>Thank you, I’m glad you have been enjoying my posts. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>Regarding your questions:</p>
<p>1) Yes, you are absolutely right. Doing all this creates more code.<br>
However, I don’t think it has high maintainability costs as once it is done, it just sits there. If we need to change it, it’s better to change in that one place, as opposed to everywhere where the actual tool would be explicitly used. But on the other hand, it does give us the advantage of easily changing how we handle the actual tool behind the port/adapter.<br>
For example, at my current company we had an adapter for the symfony event dispatcher and all our core only knew about the interface in front of the adapter. When we decided to start using async events, we just had to create the adapter for the async events and add it to the list of adapters being used by the actual dispatcher being used in our application.<br>
The same thing goes for the cases where we want to upgrade some library version. If we have an adapter, we just need to write a new adapter, the application core will stay the same.<br>
These practices give a lot of stability to the application core.<br>
Nevertheless, Software Architecture is all about tradeoffs. So, if the project at hand is not going to be long-lived, or the company is still in a stage of lean-startup, and creating these ports/adapters will be too time-consuming, maybe it’s better to just use the tools directly throughout the codebase. Also keep in mind that there are ports/adapters easier to create than others, so maybe we can create the ones that are easier to create and not the most difficult ones.<br>
In the end, it’s all about tradeoffs. The important is that we know all these patterns, because they can help us at some point, but we use only what is worth using in a specific context.</p>
<p>2) Picking up your example “for example instead of creating a more complex query that will do some of the calculation on the DB itself we fetch a lot of data, translate it to domain, perform the calculation and return the result. The question is how you prevent leakage of business rules into the persistence adapter while still keeping the process efficient as possible.”<br>
I think that the actual domain is the fact that we use the result of that specific calculation, not the way we actually calculate it. So, I would create a query object with a class name and method name that accurately reflects the calculation being made from the domain point of view, and have the DB make that calculation for me and just return the result. Since we only want to get data, we dont need to use an ORM to hydrate the data into entities. We only need to hydrate entities if we want them to “do” something, as opposed to just give use some data to show our users.<br>
I use query objects when I just want to get data. A query object only has one query inside.<br>
I use repositories pretty much as collections. A repository always returns an entity or set of entities.</p>
<p>I hope this helps.</p>
<p id="comment-like-671" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=671&amp;_wpnonce=b298862477" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-671" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=671#respond" data-commentid="671" data-postid="14874" data-belowelement="div-comment-671" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-783" class="comment odd alt depth-3 parent highlander-comment">
			<article id="div-comment-783" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/625bfdcc5ebe17f847a1de7f6ce4c0a0" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-625bfdcc5ebe17f847a1de7f6ce4c0a0-1" originals="48" src-orig="https://0.gravatar.com/avatar/625bfdcc5ebe17f847a1de7f6ce4c0a0?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Oleksandr Sova</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-783">
							<time datetime="2017-12-30T03:24:15+01:00">
								December 30, 2017 at 03:24							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you for your great post/article. Wish to have it couple years earlier. Everything described amazing but still have one question: at previous comment you told about that when you do a Query and you only need the data you do it avoiding ORM and other stuff. That is a way that I usually do. For instance I have a controller that depends on, lets say <i> LastMonthDeposits – contract of a query, which is implemented by LastMonthDepositsPostgreSQL which depends DIRECTLY on connection. And at schema your query depends on contract of persistence which is implemented by persistence adapter which depends on whole ORM and so on. So why would anyone choose to go all the way down through ORM instead of be specific? And in terms of PHP – why would anyone use adapter over doctrine/orm instead of direct doctrine/dbal (query level cache is it’s responsibility) in case of Query, not Command handling?</i></p><i>
<p>Yes, I have read that it’s just a guideline and so on but the main thing that I’d like to know is what were the preconditions/circumstances to emit such particular guideline?</p>
<p id="comment-like-783" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=783&amp;_wpnonce=9e0ffa9f58" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-783" class="comment-like-feedback">Like</span></p>
</i><p><i></i></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=783#respond" data-commentid="783" data-postid="14874" data-belowelement="div-comment-783" data-respondelement="respond" aria-label="Reply to Oleksandr Sova">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-786" class="comment byuser comment-author-hgraca bypostauthor even depth-4 highlander-comment">
			<article id="div-comment-786" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-48" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-786">
							<time datetime="2017-12-30T13:26:46+01:00">
								December 30, 2017 at 13:26							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, tkx.</p>
<p>If I understand correctly, your question is “Why does the query object implementation depend on the persistence port, whose implementation uses the ORM/DBAL, instead of the connection directly?”</p>
<p>There are 2 things I wanna point out to answer your question:</p>
<p>1.<br>
The reason is the same as usual, by making the query object implementation depend on the port, we can change or completely swap the persistence implementation without changing the query object implementation (as long as the query language is the same). For example, if we use a port/adapter we can add a line of code to the adapter to log all queries being made. In the other hand, if we inject the connection in all our query objects, to add the same logging we will have to add that line of code to all the query objects and inject that logger into all of those objects.</p>
<p>2.<br>
The implementation of the persistence port does not need to be the same. So, for commands, you can use an implementation (adapter) that wraps around the ORM but, for the query objects, you can use an implementation that wraps around the DBAL, or the connection itself. This way, you can skip the ORM and/or DBAL overhead when you don’t need it and still have the flexibility that the port/adapter brings us.</p>
<p>Did this answer your question?</p>
<p id="comment-like-786" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=786&amp;_wpnonce=25cc193918" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-786" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=786#respond" data-commentid="786" data-postid="14874" data-belowelement="div-comment-786" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-661" class="comment odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-661" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/cbec86946b25a1679fceb265fd54d1ce" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-cbec86946b25a1679fceb265fd54d1ce-0" originals="48" src-orig="https://0.gravatar.com/avatar/cbec86946b25a1679fceb265fd54d1ce?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://spj.com.pl/" rel="external nofollow" class="url">Tomasz Sadza</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-661">
							<time datetime="2017-11-18T11:47:31+01:00">
								November 18, 2017 at 11:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, may I ask about final infographic in scalable version (vector pdf or svg) to printout on the wall in my developers office ? It’s very good and I think I may be usefull many times. Thank you</p>
<p id="comment-like-661" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=661&amp;_wpnonce=9480bdfd52" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-661" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=661#respond" data-commentid="661" data-postid="14874" data-belowelement="div-comment-661" data-respondelement="respond" aria-label="Reply to Tomasz Sadza">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-662" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-662" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-49" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-662">
							<time datetime="2017-11-18T16:13:06+01:00">
								November 18, 2017 at 16:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Sure, here you go: <a href="https://drive.google.com/open?id=1E_hx5B4czRVFVhGJbrbPDlb_JFxJC8fYB86OMzZuAhg" rel="nofollow">https://drive.google.com/open?id=1E_hx5B4czRVFVhGJbrbPDlb_JFxJC8fYB86OMzZuAhg</a></p>
<p id="comment-like-662" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=662&amp;_wpnonce=1de2d91275" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-662" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=662#respond" data-commentid="662" data-postid="14874" data-belowelement="div-comment-662" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-660" class="comment odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-660" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/91717ad94f01b6be1e63111f23e3660c" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-91717ad94f01b6be1e63111f23e3660c-0" originals="48" src-orig="https://0.gravatar.com/avatar/91717ad94f01b6be1e63111f23e3660c?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="https://lessthan12ms.com/" rel="external nofollow" class="url">Dmitriy</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-660">
							<time datetime="2017-11-18T11:18:54+01:00">
								November 18, 2017 at 11:18							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Wow, that is an article! Thanks for putting such a huge amount of work to compose it.<br>
I have a lot of questions about proper architecture but the most struggling one which is bothering me in my work is authorization.</p>
<p>Would you mind to put some light on how you’d design authorization across all the layers and components? You mentioned that component itself can be of the purpose of authorization. How does it all work together?</p>
<p id="comment-like-660" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=660&amp;_wpnonce=bb72588afd" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-660" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=660#respond" data-commentid="660" data-postid="14874" data-belowelement="div-comment-660" data-respondelement="respond" aria-label="Reply to Dmitriy">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-663" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-663" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-50" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-663">
							<time datetime="2017-11-18T16:25:16+01:00">
								November 18, 2017 at 16:25							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Tkx. <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>I would use an ACL module. I would try to find an ACL module, a tool, that I could just create an adapter for it and protect the routes according to what user is logged in, and some configuration files specifying what type of user has access to each route.<br>
I think Authorization and Authentication were not a good example, it’s a flop, sorry. The Components should be Domain related, they are BoundedContexts, and Authorization and Authentication are not domain. I will replace those examples immediately.</p>
<p id="comment-like-663" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=663&amp;_wpnonce=0f300a48c1" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-663" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=663#respond" data-commentid="663" data-postid="14874" data-belowelement="div-comment-663" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-670" class="comment odd alt depth-3 highlander-comment">
			<article id="div-comment-670" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ae9d562f99b12dba78ea4fafa5d76ef4" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-ae9d562f99b12dba78ea4fafa5d76ef4-0" originals="48" src-orig="https://1.gravatar.com/avatar/ae9d562f99b12dba78ea4fafa5d76ef4?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Peter</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-670">
							<time datetime="2017-11-19T17:45:29+01:00">
								November 19, 2017 at 17:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I think you need to make the distinction between authorising and authenticating (making sure this person is who clam to be and that he can actually access the part of the application he is trying to access) and managing you authentication and authorization (user registration, user login, managing user roles, …)</p>
<p>The latter can be seen as a (sub)domain of your application. However this is usually pretty generic and you can easily use an existing component to handle all of it, because why spend precious time reinventing and redesigning the wheel. Unless you have very specific needs which you can’t find in the existing components.</p>
<p>The former is in my opinion a concern of your (driving) adapter. It is (usually) not your application logic that should check wether the user is logged in, or has access to this specific command. It is the duty of your web controller (or even web framework) to handle this. I see it this way, because depending on where the request comes from, your access rules may vary. For example, when using the CLI, you could assume the user doesn’t need to be logged in, as he is an admin of your system. Or you may want some functionality to be accessible not only to a person logged in to your system, but also to someone logged in into an external admin system (like someone from a helpdesk who can edit a users account).</p>
<p>Sometimes it might seem to be a domain rule that some things can only be altered by the user who created this thing, but more often then not, this business rule doesn’t hold up when you start thinking about the part of the system, which can not be seen be a regular user.</p>
<p id="comment-like-670" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=670&amp;_wpnonce=ce93e85cb7" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-670" class="comment-like-feedback">Liked by <a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="view-likers" data-like-count="1">1 person</a></span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=670#respond" data-commentid="670" data-postid="14874" data-belowelement="div-comment-670" data-respondelement="respond" aria-label="Reply to Peter">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-676" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-676" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/91717ad94f01b6be1e63111f23e3660c" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-91717ad94f01b6be1e63111f23e3660c-1" originals="48" src-orig="https://0.gravatar.com/avatar/91717ad94f01b6be1e63111f23e3660c?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="https://lessthan12ms.com/" rel="external nofollow" class="url">Dmitriy</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-676">
							<time datetime="2017-11-20T12:13:41+01:00">
								November 20, 2017 at 12:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I can’t find a place in my head for a proper authorization model. While ACL is a good separation (if I understand it correctly) – like if you have some particular role attached to you, then you can post to a blog, if don’t then you cant.</p>
<p>In my practice, there were more complex rules which transcend layers (app and domain layers.). You might need a specific role to make a domain action but also you need to meet some specific domain criteria.</p>
<p>For example, “You can post a comment if you have a “client” role AND you’ve purchased this product in the past”. This kind of rules involves specific domain logic to be executed.</p>
<p>So when you saying that “Authorization and Authentication are not domain”, I kind of disagree about authorization. Because Authorization can involve domain rules. Right?</p>
<p>I really want to learn effective ways to organize authorization logic in clean architecture. While I do understand all this layer&amp;ports&amp;adapters paradigm I feel like authorization part is often left undisclosed in many blog posts and books.</p>
<p>—<br>
p.s. I haven’t read the latest Uncle Bob’s book on the subject. Perhaps there are some hints about authorization.</p>
<p id="comment-like-676" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=676&amp;_wpnonce=6e6f8785fd" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-676" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=676#respond" data-commentid="676" data-postid="14874" data-belowelement="div-comment-676" data-respondelement="respond" aria-label="Reply to Dmitriy">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-705" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-705" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-51" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-705">
							<time datetime="2017-12-01T13:32:12+01:00">
								December 1, 2017 at 13:32							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Sorry, I’ve missed your comment last week.</p>
<p>But to answer you, what you are talking about is not exactly Authorization in terms that I was talking about.<br>
I was referring to Authorization in the sense of “Who can access what” platform-wide, which is basically a configuration that is set up in some config file, although to make it scalable we should use a generic ACL component.</p>
<p>What you are referring to is indeed business rules, not authorization in the sense of a platform-wide set of rules.<br>
So those business rules do not belong in a generic Authorization component, it belongs in the component that needs it.</p>
<p>Going back to your example “You can post a comment if you have a ‘client’ role AND you’ve purchased this product in the past”, we only need this when the consumer issues a command to post a comment.<br>
So, the way I see it, this is a specific rule for this specific use case (ie. “CreateProductComment”), of a specific component (ie. “ReviewComponent”).<br>
We need to validate this rule but it is very specific.<br>
Doing it quick and dirty, we can simply put an if statement in the command handler (or application service method).<br>
Doing it a bit more scalable, we can create an authorization service specific to this component which will contain all the validation rules for all commands in the component.<br>
Doing it a bit better, we could have a configuration setup saying that a use case (command, or application service method) prior to running needs to be validated with some other class/method.<br>
If we are using a Command Bus, this would be something that could be done there, with a validation middleware.<br>
Depending on our concrete needs, we could also use a Specification pattern where we would put fine-grained business rules, in such a way that we could eventually create complex business rules in specification objects by composing them from other specification objects.</p>
<p>In any case, both the use case code and its validation rules belong together, in the same component, and it is not what is generally referred to as Authorization.</p>
<p id="comment-like-705" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=705&amp;_wpnonce=fbe17c8e5b" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-705" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=705#respond" data-commentid="705" data-postid="14874" data-belowelement="div-comment-705" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-711" class="comment even depth-3 parent highlander-comment">
			<article id="div-comment-711" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/91717ad94f01b6be1e63111f23e3660c" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-91717ad94f01b6be1e63111f23e3660c-2" originals="48" src-orig="https://0.gravatar.com/avatar/91717ad94f01b6be1e63111f23e3660c?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="https://lessthan12ms.com/" rel="external nofollow" class="url">Dmitriy</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-711">
							<time datetime="2017-12-03T07:35:19+01:00">
								December 3, 2017 at 07:35							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>(I was not able to reply directly to the message you’ve replied to me with. Maybe the blog reached maximum comment depth)</p>
<p>Authorization</p>
<p>I see you separate the two: generic ACL authorization and business rules. It makes total sense to me to have a separated authorizer class attached to a command handler. In fact, I practiced it and it worked very well.</p>
<p>So to follow your logic, generic ACL lets administrator to manually assign roles to users and allow roles to perform certain actions. Once a user is allowed to make a command only then domain rules will perform additional validation against the command and maybe reject it due to some unmet restrictions. It is like a 2-level authorization.</p>
<p>Performance</p>
<p>I was recently asked on my blog (<a href="https://lessthan12ms.com/authorization-and-authentication-in-clean-architecture/#comment-3629170994" rel="nofollow">https://lessthan12ms.com/authorization-and-authentication-in-clean-architecture/#comment-3629170994</a>) how to deal with performance and code separation. For example, an authorizer class and command handler both can query the same data to make the work. But since they are independent, we may end up with multiple database queries.</p>
<p>How do you design such things in your apps? Can you give some guidance on improving performance in “clean architecture” apps?</p>
<p id="comment-like-711" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=711&amp;_wpnonce=3cf58add0d" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-711" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=711#respond" data-commentid="711" data-postid="14874" data-belowelement="div-comment-711" data-respondelement="respond" aria-label="Reply to Dmitriy">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-712" class="comment byuser comment-author-hgraca bypostauthor odd alt depth-4 highlander-comment">
			<article id="div-comment-712" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-52" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-712">
							<time datetime="2017-12-03T09:42:30+01:00">
								December 3, 2017 at 09:42							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Glad my explanation helped you <img draggable="false" class="emoji" alt="🙂" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1f642.svg" scale="0"></p>
<p>About the performance related to repeating queries in different contexts of the application, I think the Application Core should not concern itself with it. I think that is something for the ORM to deal with.</p>
<p>Doctrine, for example, uses a 1st level cache that stores the objects that were already fetched from the DB. It also keeps track of what queries were executed and what objects they returned. This 1st level cache is up during the request and only in the end it flushes all changes to the DB. So it takes care of repeating queries.</p>
<p>Doctrine also has a 2nd level cache where it stores objects in redis and reuses that cache through several requests.</p>
<p>Nevertheless, what I think we need to be very careful with is the N+1 problem when we create our queries. There is not much the ORM can do to help us with that except for telling us that a query is being repeated.</p>
<p id="comment-like-712" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=712&amp;_wpnonce=72c0af9c34" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-712" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=712#respond" data-commentid="712" data-postid="14874" data-belowelement="div-comment-712" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-659" class="pingback even thread-odd thread-alt depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://lessthan12ms.com/clean-architecture-links/" rel="external nofollow" class="url">Clean architecture links | lessthan12ms.com</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-658" class="comment byuser comment-author-rclanan odd alt thread-even depth-1 highlander-comment">
			<article id="div-comment-658" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/4fdaf861a4e2146ef4d2cac924453029.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-4fdaf861a4e2146ef4d2cac924453029-0" originals="48" src-orig="https://1.gravatar.com/avatar/4fdaf861a4e2146ef4d2cac924453029?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="https://utopianconcept.com/" rel="external nofollow" class="url">Ray Clanan</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-658">
							<time datetime="2017-11-17T19:33:40+01:00">
								November 17, 2017 at 19:33							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Great article, I can’t wait to read more from you.</p>
<p id="comment-like-658" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=658&amp;_wpnonce=5dc5a83863" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-658" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=658#respond" data-commentid="658" data-postid="14874" data-belowelement="div-comment-658" data-respondelement="respond" aria-label="Reply to Ray Clanan">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-657" class="comment even thread-odd thread-alt depth-1 highlander-comment">
			<article id="div-comment-657" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/0305d7bb35aba50c6ca8448965a8f95e" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-0305d7bb35aba50c6ca8448965a8f95e-0" originals="48" src-orig="https://0.gravatar.com/avatar/0305d7bb35aba50c6ca8448965a8f95e?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">Patrick Roza</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-657">
							<time datetime="2017-11-17T15:41:20+01:00">
								November 17, 2017 at 15:41							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Love your post. Excellent reference material for some active topics for me.</p>
<p>This is how I’ve been architecting software projects for the past few years and I’ve been extremely happy with the results:<br>
– Clean<br>
– Extendable<br>
– Flexible<br>
– Predictable<br>
– Scalable</p>
<p>At danger of treading into “Hammer &amp; Nail” territory, I found this can be applied to pretty much every type of project, be it Desktop UI, Console, Web App, API, regardless of delivery mechanism, you name it. and virtually any programming language and framework.</p>
<p>I never liked how frameworks and libraries would take over your project structure and dependencies, as well as infiltrate your lingo and dictating your choices.<br>
But with this approach it has become just a detail, sitting at the outside boundary of your app.</p>
<p id="comment-like-657" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=657&amp;_wpnonce=8adce91257" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-657" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=657#respond" data-commentid="657" data-postid="14874" data-belowelement="div-comment-657" data-respondelement="respond" aria-label="Reply to Patrick Roza">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		<li id="comment-654" class="comment byuser comment-author-ngocviet odd alt thread-even depth-1 parent highlander-comment">
			<article id="div-comment-654" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/5cfb78328c3542047d6cb4014507f34f.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5cfb78328c3542047d6cb4014507f34f-0" originals="48" src-orig="https://2.gravatar.com/avatar/5cfb78328c3542047d6cb4014507f34f?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">tnviet</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-654">
							<time datetime="2017-11-17T10:33:45+01:00">
								November 17, 2017 at 10:33							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for your articles, I understand more about the patterns now.<br>
But it seems all the backend patterns. How the frontend fit on the architecture? For example, in the single page application (React, Angular, …)  where we have components with their own business logic (like validation, hide/show field based on properties? Should the UI have their own domain model/services?</p>
<p id="comment-like-654" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=654&amp;_wpnonce=d881492139" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-654" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=654#respond" data-commentid="654" data-postid="14874" data-belowelement="div-comment-654" data-respondelement="respond" aria-label="Reply to tnviet">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-664" class="comment byuser comment-author-hgraca bypostauthor even depth-2 highlander-comment">
			<article id="div-comment-664" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-53" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-664">
							<time datetime="2017-11-18T16:44:35+01:00">
								November 18, 2017 at 16:44							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Well, I’m not a frontender, but I feel these concepts are quite generic and usable in the frontend as well.<br>
Just the other day I was discussing with the react native developer working with me and we decided to create an adapter for the backend API his application is using because if we need to switch to another API version he can easily create another adapter and have it working.</p>
<p>When it comes to the domain in the frontend, it depends. If it really is just a frontend app with no backend and domain logic, then we can create a domain model as well. But in a very small app, I don’t know if it is worth it, I can only judge case by case, we can not go into the hammer and nail approach.</p>
<p>As for “validation, hide/show field based on properties”, those are not domain concerns, those are just functionality used by the frontend. I would even regard them as language constructs that can just be used wherever. For example, PHP does not have a native function to create a Uuid, but it is a very innocuous thing, so I would just create a function to generate them and treat it as if it was part of the PHP core itself. At any point I could just change its implementation to use Uuid v3 or v4, or whatever.</p>
<p>I hope this helps, although as I said, I have no experience in frontend.</p>
<p id="comment-like-664" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=664&amp;_wpnonce=fdf1284fbf" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-664" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=664#respond" data-commentid="664" data-postid="14874" data-belowelement="div-comment-664" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-650" class="comment byuser comment-author-thedilab odd alt thread-odd thread-alt depth-1 parent highlander-comment">
			<article id="div-comment-650" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/5385a63fb63aa282d92c929fa27df283.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5385a63fb63aa282d92c929fa27df283-0" originals="48" src-orig="https://2.gravatar.com/avatar/5385a63fb63aa282d92c929fa27df283?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">thedilab</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-650">
							<time datetime="2017-11-17T02:43:46+01:00">
								November 17, 2017 at 02:43							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Have you ever implemented such patterns in any projects?</p>
<p id="comment-like-650" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=650&amp;_wpnonce=e13dbc00bf" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-650" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=650#respond" data-commentid="650" data-postid="14874" data-belowelement="div-comment-650" data-respondelement="respond" aria-label="Reply to thedilab">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-651" class="comment byuser comment-author-hgraca bypostauthor even depth-2 parent highlander-comment">
			<article id="div-comment-651" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/9e8bab4f1410e0e6e963d83cd848288a(2).jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-9e8bab4f1410e0e6e963d83cd848288a-54" originals="48" src-orig="https://0.gravatar.com/avatar/9e8bab4f1410e0e6e963d83cd848288a?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn"><a href="http://herbertograca.com/" rel="external nofollow" class="url">hgraca</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-651">
							<time datetime="2017-11-17T07:13:39+01:00">
								November 17, 2017 at 07:13							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Yes, I have.<br>
In big enterprise projects, for example one is a SaaS ecom platform with thousands of web-shops worldwide, another one is a marketplace, live in 2 countries with a message bus thats handles over 20 million messages per month.</p>
<p id="comment-like-651" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=651&amp;_wpnonce=d2ce7dd4bb" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-651" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=651#respond" data-commentid="651" data-postid="14874" data-belowelement="div-comment-651" data-respondelement="respond" aria-label="Reply to hgraca">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-652" class="comment byuser comment-author-thedilab odd alt depth-3 highlander-comment">
			<article id="div-comment-652" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/5385a63fb63aa282d92c929fa27df283.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48" id="grav-5385a63fb63aa282d92c929fa27df283-1" originals="48" src-orig="https://2.gravatar.com/avatar/5385a63fb63aa282d92c929fa27df283?s=48&amp;d=identicon&amp;r=G" scale="2">						<b class="fn">thedilab</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-652">
							<time datetime="2017-11-17T07:59:33+01:00">
								November 17, 2017 at 07:59							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Sounds awesome!</p>
<p>Regards,<br>
Xu</p>
<p id="comment-like-652" data-liked="comment-not-liked" class="comment-likes comment-not-liked"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?like_comment=652&amp;_wpnonce=b18e704464" class="comment-like-link needs-login" rel="nofollow" data-blog="98044927"><span>Like</span></a><span id="comment-like-count-652" class="comment-like-feedback">Like</span></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?replytocom=652#respond" data-commentid="652" data-postid="14874" data-belowelement="div-comment-652" data-respondelement="respond" aria-label="Reply to thedilab">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-649" class="pingback even thread-even depth-1 highlander-comment">
			<div class="comment-body">
				Pingback: <a href="https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/" rel="external nofollow" class="url">The Software Architecture Chronicles – @herbertograca</a> 			</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond js">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="https://herbertograca.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate="">
				<input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="727c11bcd9"><input type="hidden" name="_wp_http_referer" value="/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea tabindex="-1" style="position: absolute; top: -999px; left: 0px; right: auto; bottom: auto; border: 0px; padding: 0px; box-sizing: content-box; overflow-wrap: break-word; overflow: hidden; transition: none 0s ease 0s; height: 0px !important; min-height: 0px !important; font-family: Arial, Helvetica, Tahoma, Verdana, sans-serif; font-size: 14px; font-weight: 400; font-style: normal; letter-spacing: 0px; text-transform: none; text-decoration: none solid rgba(0, 0, 0, 0.7); word-spacing: 0px; text-indent: 0px; line-height: 18px; width: 718px;" class="autosizejs "></textarea><textarea id="comment" name="comment" title="Enter your comment here..." placeholder="Enter your comment here..." style="height: 38px; overflow: hidden; overflow-wrap: break-word; resize: none;"></textarea></div>
</div>

<div id="comment-form-identity" style="display: none;">
	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-form-guest" id="postas-guest" class="nascar-signin-link" title="Login via Guest">
									</a>
			</li>
			<li>
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-form-load-service:WordPress.com" id="postas-wordpress" class="nascar-signin-link" title="Login via WordPress.com">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg>				</a>
			</li>
			<li>
			</li><li>
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-form-load-service:Twitter" id="postas-twitter" class="nascar-signin-link" title="Login via Twitter">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg>				</a>
			</li>
			<li>
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#comment-form-load-service:Facebook" id="postas-facebook" class="nascar-signin-link" title="Login via Facebook">
					<svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg>				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ad516503a11cd5ca435acc9bb6523536" alt="Gravatar" width="25" class="no-grav" originals="25" scale="2">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value=""></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value=""></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="url" value=""></div>
				</div>
			</div>
			
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ad516503a11cd5ca435acc9bb6523536" alt="WordPress.com Logo" width="25" class="no-grav" originals="25" scale="2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="">
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="">
						<p class="comment-form-posting-as pa-wordpress">
			<strong></strong>
			You are commenting using your WordPress.com account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;wordpress&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#0087be" d="M12.158 12.786l-2.698 7.84c.806.236 1.657.365 2.54.365 1.047 0 2.05-.18 2.986-.51-.024-.037-.046-.078-.065-.123l-2.762-7.57zM3.008 12c0 3.56 2.07 6.634 5.068 8.092L3.788 8.342c-.5 1.117-.78 2.354-.78 3.658zm15.06-.454c0-1.112-.398-1.88-.74-2.48-.456-.74-.883-1.368-.883-2.11 0-.825.627-1.595 1.51-1.595.04 0 .078.006.116.008-1.598-1.464-3.73-2.36-6.07-2.36-3.14 0-5.904 1.613-7.512 4.053.21.008.41.012.58.012.94 0 2.395-.114 2.395-.114.484-.028.54.684.057.74 0 0-.487.058-1.03.086l3.275 9.74 1.968-5.902-1.4-3.838c-.485-.028-.944-.085-.944-.085-.486-.03-.43-.77.056-.742 0 0 1.484.114 2.368.114.94 0 2.397-.114 2.397-.114.486-.028.543.684.058.74 0 0-.488.058-1.03.086l3.25 9.665.897-2.997c.456-1.17.684-2.137.684-2.907zm1.82-3.86c.04.286.06.593.06.924 0 .912-.17 1.938-.683 3.22l-2.746 7.94c2.672-1.558 4.47-4.454 4.47-7.77 0-1.564-.4-3.033-1.1-4.314zM12 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-googleplus" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ad516503a11cd5ca435acc9bb6523536" alt="Google+ photo" width="25" class="no-grav" originals="25" scale="2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="googleplus_avatar" id="googleplus-avatar" class="comment-meta-googleplus" value="">
				<input type="hidden" name="googleplus_user_id" id="googleplus-user_id" class="comment-meta-googleplus" value="">
				<input type="hidden" name="googleplus_access_token" id="googleplus-access_token" class="comment-meta-googleplus" value="">
						<p class="comment-form-posting-as pa-googleplus">
			<strong></strong>
			You are commenting using your Google+ account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;googleplus&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" x="0px" y="0px" viewBox="0 0 60 60"><path fill="#519bf7" d="M56.3,30c0,-1.6 -0.2,-3.4 -0.6,-5h-3.1H42.2H30v10.6h14.8C44,39.3 42,42 39.1,43.9l8.8,6.8C53,46 56.3,39 56.3,30z"></path><path fill="#3db366" d="M30,57.5c6.7,0 13.1,-2.4 17.9,-6.8l-8.8,-6.8c-2.5,1.6 -5.6,2.4 -9.1,2.4c-7.2,0 -13.3,-4.7 -15.4,-11.2l-9.3,7.1C9.8,51.3 19.1,57.5 30,57.5z"></path><path fill="#fdc600" d="M5.3,42.2l9.3,-7.1c-0.5,-1.6 -0.8,-3.3 -0.8,-5.1s0.3,-3.5 0.8,-5.1l-9.3,-7.1C3.5,21.5 2.5,25.6 2.5,30S3.5,38.5 5.3,42.2z"></path><path fill="#f15b44" d="M40.1,17.4l8,-8C43.3,5.1 37,2.5 30,2.5C19.1,2.5 9.8,8.7 5.3,17.8l9.3,7.1c2.1,-6.5 8.2,-11.1 15.4,-11.1C33.9,13.7 37.4,15.1 40.1,17.4z"></path></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ad516503a11cd5ca435acc9bb6523536" alt="Twitter picture" width="25" class="no-grav" originals="25" scale="2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="">
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="">
						<p class="comment-form-posting-as pa-twitter">
			<strong></strong>
			You are commenting using your Twitter account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;twitter&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#1DA1F2" d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/ad516503a11cd5ca435acc9bb6523536" alt="Facebook photo" width="25" class="no-grav" originals="25" scale="2">
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="">
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="">
						<p class="comment-form-posting-as pa-facebook">
			<strong></strong>
			You are commenting using your Facebook account.			<span class="comment-form-log-out">
				(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( &#39;facebook&#39; );">Log&nbsp;Out</a>&nbsp;/&nbsp;
				<a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)
			</span>
			<span class="pa-icon"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 24 24"><rect x="0" fill="none" width="24" height="24"></rect><g><path fill="#3B5998" d="M20.007 3H3.993C3.445 3 3 3.445 3 3.993v16.013c0 .55.445.994.993.994h8.62v-6.97H10.27V11.31h2.346V9.31c0-2.325 1.42-3.59 3.494-3.59.993 0 1.847.073 2.096.106v2.43h-1.438c-1.128 0-1.346.537-1.346 1.324v1.734h2.69l-.35 2.717h-2.34V21h4.587c.548 0 .993-.445.993-.993V3.993c0-.548-.445-.993-.993-.993z"></path></g></svg></span>
		</p>
					</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div id="comment-form-subscribe" style="display: none;">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of new comments via email.</label></p><p class="post-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts via email.</label></p></div>




<p class="form-submit" style="display: none;"><input name="submit" type="submit" id="comment-submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="14874" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="01c314f6c6"></p>
<input type="hidden" name="genseq" value="1550065352">
<p style="display: none;"></p>			<input type="hidden" id="ak_js" name="ak_js" value="1550065359590"></form>
			</div><!-- #respond -->
	<div style="clear: both"></div>
</div><!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

<div id="secondary" class="widget-area" role="complementary">
	<aside id="custom_html-2" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><a href="https://twitter.com/hgraca" target="_blank"><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/logo.png" alt="twitter" width="50px" scale="0"></a>
<a href="https://medium.com/@herberto.graca" target="_blank"><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/1_z5S7iSWqfgyvCd74A-prZg.png" alt="medium" width="50px" scale="0"></a>
</div></aside><aside id="search-4" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://herbertograca.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search …" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Search">
			</form></aside><aside id="nav_menu-3" class="widget widget_nav_menu"><div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-6" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-6"><a title="Home" href="https://herbertograca.com/">Home</a></li>
<li id="menu-item-332" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-332"><a href="https://herbertograca.com/dev-theory-articles-listing/">Dev Curricula</a></li>
<li id="menu-item-16833" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-16833"><a href="https://herbertograca.com/category/development/series/">Post Series</a>
<ul class="sub-menu">
	<li id="menu-item-16834" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-16834"><a href="https://herbertograca.com/category/development/series/the-software-architecture-chronicles/">The Software Architecture Chronicles</a></li>
</ul>
</li>
<li id="menu-item-16835" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16835"><a href="https://herbertograca.com/category/development/lecture-distillations/">Lecture distillations</a></li>
<li id="menu-item-609" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-609"><a href="https://herbertograca.com/category/development/book-notes/">Book distillations</a>
<ul class="sub-menu">
	<li id="menu-item-762" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-762"><a href="https://herbertograca.com/category/development/book-notes/domain-driven-design-by-eric-evans/">Domain Driven Design by Eric Evans</a></li>
	<li id="menu-item-4330" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4330"><a href="https://herbertograca.com/category/development/book-notes/lean-architecture-by-james-coplien-and-gertrud-bjornvig/">Lean Architecture by James Coplien and Gertrud Bjornvig</a></li>
	<li id="menu-item-3566" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3566"><a href="https://herbertograca.com/category/development/book-notes/patterns-of-enterprise-application-architecture-by-martin-fowler/">Patterns of Enterprise Application Architecture by Martin Fowler</a></li>
	<li id="menu-item-3567" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3567"><a href="https://herbertograca.com/category/development/book-notes/patterns-principles-and-practices-of-domain-driven-design-by-scott-millett-and-nick-tune/">Patterns Principles and Practices of Domain-Driven Design by Scott Millett and Nick Tune</a></li>
	<li id="menu-item-16832" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16832"><a href="https://herbertograca.com/category/development/book-notes/the-mythical-man-month-by-frederick-p-brooks/">The mythical man-month by Frederick P. Brooks</a></li>
</ul>
</li>
<li id="menu-item-573" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-573"><a href="https://herbertograca.com/10-2/">About</a></li>
</ul></div></aside><aside id="linkcat-559225046" class="widget widget_links"><h1 class="widget-title">Top Posts &amp; Pages</h1>
	<ul class="xoxo blogroll">
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together</a></li>
<li><a href="https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/">The Software Architecture Chronicles</a></li>
<li><a href="https://herbertograca.com/2018/04/02/the-containerization-chronicles/">The Containerization Chronicles</a></li>
<li><a href="https://herbertograca.com/2017/01/26/microservices-architecture/">Microservices architecture: What the gurus say about it</a></li>
<li><a href="https://herbertograca.com/2015/11/01/teams-building-managing-leading-performing/">Teams: building, managing, leading, performing</a></li>
<li><a href="https://herbertograca.com/2017/02/08/ddd-europe-2017/">DDD Europe 2017: The 3 talks I most enjoyed</a></li>
<li><a href="https://herbertograca.com/dev-theory-articles-listing/">Dev curricula</a></li>

	</ul>
</aside>
<aside id="blog_subscription-2" class="widget widget_blog_subscription jetpack_subscription_widget"><h1 class="widget-title"><label for="subscribe-field">Follow Blog via Email</label></h1>
            <form action="https://subscribe.wordpress.com/" method="post" accept-charset="utf-8" id="subscribe-blog">
									<p>Enter your email address to follow this blog and receive notifications of new posts by email.</p>
<p>Join 607 other followers</p>
                    <p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"></p>
				
                <p>
                    <input type="hidden" name="action" value="subscribe">
                    <input type="hidden" name="blog_id" value="98044927">
                    <input type="hidden" name="source" value="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">
                    <input type="hidden" name="sub-type" value="widget">
                    <input type="hidden" name="redirect_fragment" value="blog_subscription-2">
					<input type="hidden" id="_wpnonce" name="_wpnonce" value="27f2a5016a">                    <input type="submit" value="Follow">
                </p>
            </form>
			
</aside><aside id="rss-2" class="widget widget_rss"><h1 class="widget-title"><a class="rsswidget" href="https://8thlight.com/blog/feed/rss.xml" title="Syndicate this content"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/rss.png" alt="RSS" scale="0"></a> <a class="rsswidget" href="https://8thlight.com/blog" title="Posts on software craftsmanship and consulting from 8th Light&#39;s designers and crafters.">8th Light</a></h1><ul><li><a class="rsswidget" href="https://8thlight.com/blog/lydia-lindenberg/2019/02/12/blockchain-field-guide-published.html" title="We are pleased to announce the release of our new field guide, “Beyond the Buzzword: Navigating the Blockchain Hype,” where we attempt to address the hype cycle of blockchain adoption and how blockchain technology is starting to be integrated into existing systems and business processes. With all the hype around blockchain, it can be hard to nail down the fa […]">NEW: Beyond the Buzzword: Navigating the Blockchain Hype - A Field Guide from 8th Light</a></li><li><a class="rsswidget" href="https://8thlight.com/blog/dan-pelensky/2019/02/05/dont-repeat-yourself.html" title="One of the earliest, most fundamental things I learned about writing code was the Don&#39;t Repeat Yourself (DRY) principle. Initially, this resonated with me. When writing the code, you&#39;ve already solved a problem, why would you go to the effort of solving it a second time? While technically my understanding was correct, it only scratched the surface. […]">I'm Only Going To Say This Once - Don't Repeat Yourself!</a></li><li><a class="rsswidget" href="https://8thlight.com/blog/eva-penzeymoog/2019/01/29/eva-design-event-recap.html" title="Recently, 8th Light University had the pleasure of hosting UX designer Rachel Wendte. She taught both designers and developers alike how to boost learning through finding your foil. The concept of a “character foil” comes from literature. In fiction, a “foil” is a character who contrasts with another character (usually the protagonist) in order to highlight […]">Rachel Wendte on How to Boost Learning Through Finding Your “Design Foil”</a></li></ul></aside><aside id="rss-4" class="widget widget_rss"><h1 class="widget-title"><a class="rsswidget" href="http://blog.cleancoder.com/atom.xml" title="Syndicate this content"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/rss.png" alt="RSS" scale="0"></a> <a class="rsswidget" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/" title="">The Clean Code</a></h1><ul><li>FP vs. OO List Processing</li><li>We, The Unoffended</li><li>SJWJS</li></ul></aside><aside id="rss-3" class="widget widget_rss"><h1 class="widget-title"><a class="rsswidget" href="https://martinfowler.com/feed.atom" title="Syndicate this content"><img style="background: orange; color: white; border: none;" width="14" height="14" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/rss.png" alt="RSS" scale="0"></a> <a class="rsswidget" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/" title="">Martin Fowler</a></h1><ul><li>Repair to “Using OAuth for a simple command line script to access Google's data”</li><li>photostream 119</li><li>Kindle edition of Refactoring now available from Amazon</li></ul></aside>		<div class="wpcnt">
			<div class="wpa wpwidesky">
				<span class="wpa-about">Advertisements</span>
				<div class="u">
							<div style="padding-bottom:15px;width:160px;height:600px;">
		<div id="atatags-286348-5c641ec848db5">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-286348-5c641ec848db5',  {
					collapseEmpty: 'before',
					sectionId: '286348',
					width: 160,
					height: 600
				});
			});
			</script>
		</div></div>
				</div>
				
			</div>
		</div></div><!-- #secondary -->

		</div><!-- #content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
						<div class="site-info">
				<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a>
				
							</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #content-wrapper -->
</div><!-- #page -->

<!--  -->
<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/gprofiles.js.下载"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/wpgroho.js.下载"></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-9e8bab4f1410e0e6e963d83cd848288a">
	</div>
	<div class="grofile-hash-map-3032823d3dbf5276e5703ecedd193a0d">
	</div>
	<div class="grofile-hash-map-6d62d767bc55880b7a96dcfa0e53e293">
	</div>
	<div class="grofile-hash-map-fc9709f3af7d61ad2a8c69b733392fb0">
	</div>
	<div class="grofile-hash-map-9e8bab4f1410e0e6e963d83cd848288a">
	</div>
	<div class="grofile-hash-map-766793ec8502ac7f2b79831c7ea08502">
	</div>
	<div class="grofile-hash-map-df46e3fbdfdac5daf45656e9963717d4">
	</div>
	<div class="grofile-hash-map-413d3e96501851a41a5f788496fac298">
	</div>
	<div class="grofile-hash-map-a9280e4178702a3501e77a6d2d9af721">
	</div>
	<div class="grofile-hash-map-04bb27ab94cf2ae16ca4655d9980c828">
	</div>
	<div class="grofile-hash-map-c8be27ecd9e5fbadaea6e32f5481bb5a">
	</div>
	<div class="grofile-hash-map-6b04b82ad397b42f828576536032afd2">
	</div>
	<div class="grofile-hash-map-6d62d767bc55880b7a96dcfa0e53e293">
	</div>
	<div class="grofile-hash-map-9870c9d707803b6f160c30973d08b4f4">
	</div>
	<div class="grofile-hash-map-e5a5dae1ed16a5d7dd8b1cc811d01672">
	</div>
	<div class="grofile-hash-map-c3289eff870aa46eee70124f43d8129f">
	</div>
	<div class="grofile-hash-map-c1b360ef601551a98ff92bfae42dad28">
	</div>
	<div class="grofile-hash-map-2ecec54a40e56e69a2d4e47efd79de81">
	</div>
	<div class="grofile-hash-map-763b518f6efac381ec3e6c1622c3ebe6">
	</div>
	<div class="grofile-hash-map-26bfe61462ae617ed39b3d9c83197324">
	</div>
	<div class="grofile-hash-map-82620b7b781a2b4246fc4bc1c839018d">
	</div>
	<div class="grofile-hash-map-45a7cf4202fd46e398a832cf3547d718">
	</div>
	<div class="grofile-hash-map-f6d9e22f3b8e99baeda85717f28c30aa">
	</div>
	<div class="grofile-hash-map-81a3a9de6f5338ff79adb1133db15ded">
	</div>
	<div class="grofile-hash-map-397fc4730321231b1f643902d6063e35">
	</div>
	<div class="grofile-hash-map-cbbb22af9f8d67e0e44a434b94001042">
	</div>
	<div class="grofile-hash-map-78b46ee0c937cbdc06c03fcd6ede8306">
	</div>
	<div class="grofile-hash-map-7ded171203a83024d1e547e7884e6478">
	</div>
	<div class="grofile-hash-map-625bfdcc5ebe17f847a1de7f6ce4c0a0">
	</div>
	<div class="grofile-hash-map-4763b4d6e4b51ca8fb4dbf4620f71d81">
	</div>
	<div class="grofile-hash-map-6557b36c09c57b7d60dd7e0a2789f938">
	</div>
	<div class="grofile-hash-map-349d44c089cf2ec5f1c800f158fa2458">
	</div>
	<div class="grofile-hash-map-98442eeeeb11844d9992d93562f892ce">
	</div>
	<div class="grofile-hash-map-378eefea3af018ef9279ad59fbc0bfff">
	</div>
	<div class="grofile-hash-map-cbec86946b25a1679fceb265fd54d1ce">
	</div>
	<div class="grofile-hash-map-91717ad94f01b6be1e63111f23e3660c">
	</div>
	<div class="grofile-hash-map-ae9d562f99b12dba78ea4fafa5d76ef4">
	</div>
	<div class="grofile-hash-map-4fdaf861a4e2146ef4d2cac924453029">
	</div>
	<div class="grofile-hash-map-0305d7bb35aba50c6ca8448965a8f95e">
	</div>
	<div class="grofile-hash-map-5cfb78328c3542047d6cb4014507f34f">
	</div>
	<div class="grofile-hash-map-5385a63fb63aa282d92c929fa27df283">
	</div>
	</div>
<script type="text/javascript">
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/herbertograca.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/herbertograca.wordpress.com\/wp-login.php?action=logout&_wpnonce=a81696addf","homeURL":"https:\/\/herbertograca.com\/","postID":"14874","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
/* ]]> */
</script>
<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(5)"></script>

	<div id="carousel-reblog-box">
		<form action="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/#" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post">
				<input type="hidden" id="carousel-reblog-blog-id" value="98044927">
				<input type="hidden" id="carousel-reblog-blog-url" value="https://herbertograca.com">
				<input type="hidden" id="carousel-reblog-blog-title" value="@herbertograca">
				<input type="hidden" id="carousel-reblog-post-url" value="">
				<input type="hidden" id="carousel-reblog-post-title" value="">
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="bae333c954"><input type="hidden" name="_wp_http_referer" value="/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">		</form>

		<div class="arrow"></div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/herbertograca.com\/2017\/11\/16\/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together\/":14874};
	</script>
				<link rel="stylesheet" id="all-css-0-3" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/jetpack-carousel.css" type="text/css" media="all">
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel-ie8fix.css?m=1412618825h&#038;ver=20121024' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="all-css-2-3" href="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(6)" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var comment_like_text = {"loading":"Loading..."};
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
var actionbardata = {"siteID":"98044927","siteName":"@herbertograca","siteURL":"https:\/\/herbertograca.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/448a31aa6850fbccb7cc0021392a0d0b?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/independent-publisher-2","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbertograca.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F","themeURL":"https:\/\/wordpress.com\/theme\/independent-publisher-2\/","xhrURL":"https:\/\/herbertograca.com\/wp-admin\/admin-ajax.php","nonce":"a838b325f8","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"27f2a5016a\" \/>","referer":"https:\/\/herbertograca.com\/2017\/11\/16\/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together\/","canFollow":"1","feedID":"37045174","statusMessage":"","customizeLink":"https:\/\/herbertograca.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbertograca.wordpress.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F","postID":"14874","shortlink":"https:\/\/wp.me\/p6DnXN-3RU","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbertograca.com\/14874","statsLink":"https:\/\/wordpress.com\/stats\/post\/14874\/herbertograca.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Independent Publisher 2","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 607 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbertograca.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/herbertograca.com\/wp-admin\/admin-ajax.php","nonce":"d7398afe67","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/herbertograca.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F","blog_id":"98044927","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=98044927&v=wpcom&tz=1&user_id=0&subd=herbertograca","is_public":"1","reblog_enabled":""};
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/saved_resource(7)"></script><div class="widget widget_eu_cookie_law_widget" style="display: block;"><div class="hide-on-button ads-active" data-hide-timeout="30" data-consent-expiration="180" id="eu-cookie-law">
	<form method="post">
		<input type="submit" value="Close and accept" class="accept">

		Privacy &amp; Cookies: This site uses cookies. By continuing to use this website, you agree to their use. <br>
To find out more, including how to control cookies, see here:
		<a href="https://automattic.com/cookies">
			Cookie Policy		</a>
 </form>
</div>
</div><div id="actionbar" class="actnbr-pub-independent-publisher-2 actnbr-has-follow actnbr-hidden"><ul><li class="actnbr-btn actnbr-hidden"> 			    	<a class="actnbr-action actnbr-actn-follow" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/"><svg class="gridicon gridicon__follow" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Follow</span></a> 			    	<div class="actnbr-popover tip tip-top-left actnbr-notice"> 			    		<div class="tip-arrow"></div> 			    		<div class="tip-inner actnbr-follow-bubble"></div> 			    	</div> 			    </li><li class="actnbr-ellipsis actnbr-hidden"> 			  <svg class="gridicon gridicon__ellipsis" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><circle cx="5" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="12" cy="12" r="2"></circle></g></svg> 			  <div class="actnbr-popover tip tip-top-left actnbr-more"> 			  	<div class="tip-arrow"></div> 			  	<div class="tip-inner"> 				  <ul> 				    <li class="actnbr-sitename actnbr-hidden"><a href="https://herbertograca.com/"><img alt="" src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/448a31aa6850fbccb7cc0021392a0d0b.png" class="avatar avatar-50" height="50" width="50" originals="50" scale="2"> @herbertograca</a></li> 				   	<li class="actnbr-folded-customize actnbr-hidden"><a href="https://herbertograca.wordpress.com/wp-admin/customize.php?url=https%3A%2F%2Fherbertograca.wordpress.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F"><svg class="gridicon gridicon__customize" height="20px" width="20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M2 6c0-1.505.78-3.08 2-4 0 .845.69 2 2 2 1.657 0 3 1.343 3 3 0 .386-.08.752-.212 1.09.74.594 1.476 1.19 2.19 1.81L8.9 11.98c-.62-.716-1.214-1.454-1.807-2.192C6.753 9.92 6.387 10 6 10c-2.21 0-4-1.79-4-4zm12.152 6.848l1.34-1.34c.607.304 1.283.492 2.008.492 2.485 0 4.5-2.015 4.5-4.5 0-.725-.188-1.4-.493-2.007L18 9l-2-2 3.507-3.507C18.9 3.188 18.225 3 17.5 3 15.015 3 13 5.015 13 7.5c0 .725.188 1.4.493 2.007L3 20l2 2 6.848-6.848c1.885 1.928 3.874 3.753 5.977 5.45l1.425 1.148 1.5-1.5-1.15-1.425c-1.695-2.103-3.52-4.092-5.448-5.977z" data-reactid=".2.1.1:0.1b.0"></path></g></svg><span>Customize<span></span></span></a></li> 				    <li class="actnbr-folded-follow actnbr-hidden"><a class="actnbr-action actnbr-actn-follow" href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/"><svg class="gridicon gridicon__follow" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g><path d="M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"></path></g></svg><span>Follow</span></a></li> 					<li class="actnbr-signup actnbr-hidden"><a href="https://wordpress.com/start/">Sign up</a></li> 				    <li class="actnbr-login actnbr-hidden"><a href="https://herbertograca.wordpress.com/wp-login.php?redirect_to=https%3A%2F%2Fherbertograca.com%2F2017%2F11%2F16%2Fexplicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together%2F">Log in</a></li> 				     				    <li class="actnbr-shortlink actnbr-hidden"><a href="https://wp.me/p6DnXN-3RU">Copy shortlink</a></li> 				    <li class="flb-report actnbr-hidden"><a href="http://en.wordpress.com/abuse/">Report this content</a></li> 				     				     				    <li class="actnbr-subs actnbr-hidden"><a href="https://subscribe.wordpress.com/">Manage subscriptions</a></li> 				    <li class="actnbr-fold actnbr-hidden"><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">Collapse this bar</a></li> 			      </ul> 			    </div> 		      </div> 		    </li> 	      </ul></div>
<script type="text/javascript">
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script>		<iframe src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/master.html" scrolling="no" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
<script src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/w.js.下载" type="text/javascript" async="" defer=""></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'98044927','blog_tz':'1','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'98044927','v':'wpcom','tz':'1','user_id':'0','post':'14874','subd':'herbertograca'}]);
_stq.push(['extra', {'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWtpP0NsWnVkPS9sL0ViLndld3BxWnRYfEk3ajJqTzNXcmNxfjJda2hDLmlONixBOEZEeUQmP2g4LmF8OVdvVGptMjFnW1BxVGk/L2RRWz15MXgyLEFVM2t0eVBrQnFSNHhoYW9EckhnSHk4cS0wclpfbTd4VW5rMDd+VT9zY0cyeXc1cWJWUGpVZU41QVhiMyZKLjlOdUZpXWVVdG09MlgvRGVCeTFhaWprTSY2M3QmWll4S1pQeiYvMnVjTXBtXWJ0Lm5mNVRLTiVRNEVfdFZuV3F2W3FhY29uckl8UVdsdTBjVUR6LjgucjEvTTdQREQlLHEwMkJjZ0JGTzVKNDlvNGVQMU5WSXJpTCxCQUZBY29paEtoLw=='}]);
_stq.push([ 'clickTrackerInit', '98044927', '14874' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>


<div class="comment-likes-overlay" style="display: none;"></div><img src="./DDD, Hexagonal, Onion, Clean, CQRS, … How I put it all together – @herbertograca_files/g.gif" alt=":)" id="wpstats" scale="0"></body></html>